<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>æ­å·è‡ªå®¶å°çŒ«å’ª-æå…ˆç”Ÿ - å® ç‰©ç¤¾åŒºå¹³å°</title>
    
    <!-- åœ°å›¾API -->
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=0d3b3b8f6e6e4f7b9a6e6e6e6e6e6e6&plugin=AMap.Geolocation,AMap.PlaceSearch,AMap.Geocoder,AMap.ToolBar,AMap.Autocomplete"></script>
    
    <style>
        /* è‹¹æœé£æ ¼å…¨å±€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* è‹¹æœé£æ ¼é…è‰² */
            --apple-black: #1d1d1f;
            --apple-gray-light: #f5f5f7;
            --apple-gray-medium: #86868b;
            --apple-gray-dark: #6e6e73;
            --apple-blue: #0071e3;
            --apple-blue-hover: #0051d5;
            --apple-green: #34c759;
            --apple-orange: #ff9500;
            --apple-red: #ff3b30;
            --apple-purple: #af52de;
            --apple-white: #fbfbfd;
            --apple-border: #d2d2d7;
            
            /* å­—ä½“ç³»ç»Ÿ */
            --font-family: "SF Pro Display", "SF Pro Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            
            /* é—´è·ç³»ç»Ÿ */
            --spacing-xs: 8px;
            --spacing-sm: 16px;
            --spacing-md: 32px;
            --spacing-lg: 48px;
            --spacing-xl: 64px;
            --spacing-xxl: 96px;
            
            /* åœ†è§’ */
            --border-radius-sm: 6px;
            --border-radius-md: 12px;
            --border-radius-lg: 18px;
            
            /* é˜´å½± */
            --shadow-light: 0 4px 20px rgba(0, 0, 0, 0.05);
            --shadow-medium: 0 8px 30px rgba(0, 0, 0, 0.12);
            --shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.15);
        }

        body {
            font-family: var(--font-family);
            background: linear-gradient(135deg, #FFF8E1 0%, #FFE0B2 100%);
            color: var(--apple-black);
            line-height: 1.47059;
            font-weight: 400;
            letter-spacing: -0.022em;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            min-height: 100vh;
        }

        /* å®¹å™¨ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-sm);
        }

        /* å¯¼èˆªæ  */
        .nav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--apple-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
        }

        .nav-menu {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--apple-black);
            font-weight: 500;
            transition: color 0.3s ease;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--apple-blue);
            background: rgba(0, 113, 227, 0.1);
        }

        .logo {
            font-size: 16px;
            font-weight: 600;
            color: var(--apple-black);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ç”¨æˆ·èœå• */
        .user-menu {
            position: relative;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--apple-blue);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .user-avatar:hover {
            background: var(--apple-blue-hover);
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-heavy);
            min-width: 200px;
            display: none;
            z-index: 1000;
            margin-top: 8px;
        }

        .user-dropdown.active {
            display: block;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background 0.3s ease;
            border-bottom: 1px solid var(--apple-gray-light);
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: var(--apple-gray-light);
        }

        .dropdown-item:first-child {
            border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
        }

        .dropdown-item:last-child {
            border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg);
        }

        /* é¡µé¢åˆ‡æ¢ */
        .page {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ä¸»é¡µæ ·å¼ */
        .hero {
            text-align: center;
            padding: var(--spacing-xl) 0;
            background: linear-gradient(135deg, #fbfbfd 0%, #f5f5f7 100%);
            border-radius: var(--border-radius-lg);
            margin: var(--spacing-md) 0;
        }

        .hero h1 {
            font-size: 40px;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            background: linear-gradient(45deg, #FFB300, #FF6B35);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 18px;
            color: var(--apple-gray-medium);
            margin-bottom: var(--spacing-md);
        }

        /* å¿«æ·åŠŸèƒ½å¡ç‰‡ */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }

        .feature-card {
            background: white;
            padding: var(--spacing-md);
            border-radius: var(--border-radius-lg);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-medium);
        }

        .feature-icon {
            font-size: 48px;
            margin-bottom: var(--spacing-sm);
        }

        .feature-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
            color: var(--apple-black);
        }

        .feature-desc {
            font-size: 14px;
            color: var(--apple-gray-medium);
        }

        /* æœç´¢å’Œç­›é€‰åŒºåŸŸ */
        .search-filter {
            background: white;
            padding: var(--spacing-md);
            border-radius: var(--border-radius-lg);
            margin-bottom: var(--spacing-md);
            box-shadow: var(--shadow-light);
        }

        .search-box {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }

        .search-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--apple-border);
            border-radius: var(--border-radius-sm);
            font-size: 17px;
            font-family: var(--font-family);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--apple-blue);
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
        }

        .filter-row {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 8px 12px;
            border: 1px solid var(--apple-border);
            border-radius: var(--border-radius-sm);
            background: white;
            font-family: var(--font-family);
            cursor: pointer;
        }

        /* çŒ«å’ªå¡ç‰‡ç½‘æ ¼ */
        .cat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }

        .cat-card {
            background: white;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
            box-shadow: var(--shadow-light);
        }

        .cat-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-heavy);
        }

        .cat-image-container {
            position: relative;
            height: 240px;
            overflow: hidden;
        }

        .cat-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
        }

        .cat-card:hover .cat-image {
            transform: scale(1.1);
        }

        .cat-info {
            padding: var(--spacing-sm);
        }

        .cat-name {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
            color: var(--apple-black);
        }

        .cat-breed {
            font-size: 16px;
            color: var(--apple-gray-medium);
            margin-bottom: var(--spacing-xs);
        }

        .cat-meta {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
            margin-top: var(--spacing-xs);
        }

        .cat-tag {
            background: var(--apple-gray-light);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            color: var(--apple-gray-dark);
        }

        /* è¯¦æƒ…é¡µæ ·å¼ */
        .cat-detail {
            background: white;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-medium);
            margin: var(--spacing-md) 0;
        }

        .detail-image-container {
            position: relative;
            height: 400px;
            overflow: hidden;
        }

        .detail-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .detail-content {
            padding: var(--spacing-md);
        }

        .detail-title {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
        }

        .detail-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
            padding: var(--spacing-sm);
            background: var(--apple-gray-light);
            border-radius: var(--border-radius-md);
        }

        .meta-item {
            display: flex;
            flex-direction: column;
        }

        .meta-label {
            font-size: 12px;
            color: var(--apple-gray-medium);
            margin-bottom: 4px;
        }

        .meta-value {
            font-size: 16px;
            font-weight: 500;
            color: var(--apple-black);
        }

        .detail-description {
            font-size: 17px;
            line-height: 1.6;
            margin-bottom: var(--spacing-md);
            color: var(--apple-black);
        }

        /* è¯„è®ºåŒºåŸŸ */
        .comments-section {
            margin-top: var(--spacing-lg);
            border-top: 1px solid var(--apple-border);
            padding-top: var(--spacing-md);
        }

        .comments-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .comments-title {
            font-size: 24px;
            font-weight: 600;
        }

        .comment-form {
            background: var(--apple-gray-light);
            padding: var(--spacing-md);
            border-radius: var(--border-radius-md);
            margin-bottom: var(--spacing-md);
        }

        .comment-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--apple-border);
            border-radius: var(--border-radius-sm);
            resize: vertical;
            min-height: 80px;
            font-family: var(--font-family);
            font-size: 16px;
        }

        .comment-item {
            background: white;
            padding: var(--spacing-md);
            border-radius: var(--border-radius-md);
            margin-bottom: var(--spacing-sm);
            border: 1px solid var(--apple-border);
        }

        .comment-author {
            font-weight: 600;
            color: var(--apple-black);
            margin-bottom: 4px;
        }

        .comment-time {
            font-size: 12px;
            color: var(--apple-gray-medium);
            margin-bottom: var(--spacing-sm);
        }

        .comment-content {
            font-size: 16px;
            line-height: 1.5;
            color: var(--apple-black);
        }

        /* åœ°å›¾æ ·å¼ */
        .map-container {
            background: white;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-light);
            margin: var(--spacing-md) 0;
            height: 500px;
            position: relative;
        }

        #map {
            width: 100%;
            height: 100%;
        }

        .map-controls {
            position: absolute;
            top: var(--spacing-sm);
            left: var(--spacing-sm);
            background: white;
            padding: var(--spacing-sm);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-medium);
            z-index: 10;
            width: 300px;
        }

        .map-input-group {
            margin-bottom: var(--spacing-sm);
        }

        .map-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--apple-border);
            border-radius: var(--border-radius-sm);
            margin-bottom: var(--spacing-xs);
            font-family: var(--font-family);
        }

        .map-btn {
            width: 100%;
            padding: 10px 16px;
            background: var(--apple-blue);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-size: 14px;
            font-family: var(--font-family);
            margin-bottom: var(--spacing-xs);
            transition: all 0.3s ease;
        }

        .map-btn:hover {
            background: var(--apple-blue-hover);
        }

        .map-btn:disabled {
            background: var(--apple-gray-medium);
            cursor: not-allowed;
        }

        /* ç‰©æµä¿¡æ¯ */
        .logistics-container {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-light);
            margin: var(--spacing-md) 0;
        }

        .logistics-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .logistics-title {
            font-size: 24px;
            font-weight: 600;
        }

        .logistics-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--apple-border);
            border-radius: var(--border-radius-sm);
            margin-bottom: var(--spacing-sm);
            font-family: var(--font-family);
        }

        .logistics-timeline {
            position: relative;
            padding-left: 40px;
        }

        .logistics-timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--apple-border);
        }

        .timeline-item {
            position: relative;
            padding-bottom: var(--spacing-md);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 6px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--apple-blue);
            border: 2px solid white;
            box-shadow: 0 0 0 2px var(--apple-blue);
        }

        .timeline-time {
            font-size: 12px;
            color: var(--apple-gray-medium);
            margin-bottom: 4px;
        }

        .timeline-content {
            font-size: 14px;
            color: var(--apple-black);
            line-height: 1.5;
        }

        /* è®ºå›æ ·å¼ */
        .forum-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .post-list {
            margin: var(--spacing-md) 0;
        }

        .post-item {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
            box-shadow: var(--shadow-light);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .post-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-sm);
        }

        .post-author {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .author-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--apple-gray-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .author-info {
            display: flex;
            flex-direction: column;
        }

        .author-name {
            font-weight: 600;
            color: var(--apple-black);
        }

        .post-time {
            font-size: 12px;
            color: var(--apple-gray-medium);
        }

        .post-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            color: var(--apple-black);
        }

        .post-content {
            font-size: 16px;
            line-height: 1.6;
            color: var(--apple-black);
            margin-bottom: var(--spacing-sm);
        }

        .post-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }

        .post-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: var(--border-radius-sm);
        }

        .post-actions {
            display: flex;
            gap: var(--spacing-md);
            align-items: center;
        }

        .post-action {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--apple-gray-medium);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .post-action:hover {
            color: var(--apple-blue);
        }

        /* å‘å¸–è¡¨å• */
        .create-post {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-light);
            margin-bottom: var(--spacing-md);
        }

        .create-post-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: var(--spacing-md);
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--apple-border);
            border-radius: var(--border-radius-sm);
            margin-bottom: var(--spacing-sm);
            font-family: var(--font-family);
            font-size: 16px;
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        /* å•†åŸæ ·å¼ */
        .shop-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: var(--spacing-md);
        }

        @media (max-width: 768px) {
            .shop-container {
                grid-template-columns: 1fr;
            }
        }

        .shop-sidebar {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-light);
            height: fit-content;
        }

        .shop-main {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-light);
        }

        .category-list {
            list-style: none;
        }

        .category-item {
            padding: var(--spacing-sm);
            cursor: pointer;
            border-radius: var(--border-radius-sm);
            transition: background 0.3s ease;
            margin-bottom: 4px;
        }

        .category-item:hover, .category-item.active {
            background: var(--apple-gray-light);
            color: var(--apple-blue);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--spacing-md);
        }

        .product-card {
            border: 1px solid var(--apple-border);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .product-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-4px);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .product-info {
            padding: var(--spacing-sm);
        }

        .product-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .product-price {
            font-size: 18px;
            font-weight: 700;
            color: var(--apple-red);
            margin-bottom: var(--spacing-sm);
        }

        .product-desc {
            font-size: 14px;
            color: var(--apple-gray-medium);
            margin-bottom: var(--spacing-sm);
        }

        /* è´­ç‰©è½¦é¡µé¢ */
        .cart-container {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-light);
            margin: var(--spacing-md) 0;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .cart-title {
            font-size: 24px;
            font-weight: 600;
        }

        .cart-empty {
            text-align: center;
            padding: var(--spacing-xxl);
            color: var(--apple-gray-medium);
        }

        .cart-item {
            display: flex;
            gap: var(--spacing-md);
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--apple-border);
            align-items: center;
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: var(--border-radius-sm);
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .cart-item-price {
            font-size: 16px;
            color: var(--apple-red);
            font-weight: 600;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .quantity-btn {
            width: 24px;
            height: 24px;
            border: 1px solid var(--apple-border);
            background: white;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: var(--apple-gray-light);
        }

        .quantity-input {
            width: 40px;
            text-align: center;
            border: 1px solid var(--apple-border);
            border-radius: var(--border-radius-sm);
            padding: 4px;
        }

        .cart-total {
            text-align: right;
            padding: var(--spacing-md);
            border-top: 2px solid var(--apple-border);
            font-size: 18px;
            font-weight: 600;
        }

        .checkout-btn {
            width: 100%;
            padding: 16px;
            background: var(--apple-green);
            color: white;
            border: none;
            border-radius: var(--border-radius-md);
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            margin-top: var(--spacing-md);
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            background: #28a745;
        }

        /* ä¸ªäººä¸­å¿ƒé¡µé¢ */
        .profile-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: var(--spacing-md);
        }

        @media (max-width: 768px) {
            .profile-container {
                grid-template-columns: 1fr;
            }
        }

        .profile-sidebar {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-light);
            text-align: center;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--apple-blue);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin: 0 auto var(--spacing-md);
        }

        .profile-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }

        .profile-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }

        .stat-item {
            text-align: center;
            padding: var(--spacing-sm);
            background: var(--apple-gray-light);
            border-radius: var(--border-radius-md);
        }

        .stat-number {
            font-size: 18px;
            font-weight: 600;
            color: var(--apple-blue);
        }

        .stat-label {
            font-size: 12px;
            color: var(--apple-gray-medium);
        }

        .profile-content {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-light);
        }

        .profile-tabs {
            display: flex;
            gap: var(--spacing-sm);
            border-bottom: 1px solid var(--apple-border);
            margin-bottom: var(--spacing-md);
        }

        .profile-tab {
            padding: var(--spacing-sm) var(--spacing-md);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: var(--apple-gray-medium);
            transition: all 0.3s ease;
        }

        .profile-tab.active {
            color: var(--apple-blue);
            border-bottom: 2px solid var(--apple-blue);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            font-size: 17px;
            font-weight: 400;
            text-decoration: none;
            border: none;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            min-height: 44px;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--apple-blue);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--apple-blue-hover);
            transform: scale(1.02);
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--apple-blue);
            border: 1px solid var(--apple-border);
        }

        .btn-secondary:hover {
            background-color: var(--apple-gray-light);
            transform: scale(1.02);
        }

        .btn-success {
            background-color: var(--apple-green);
            color: white;
        }

        .btn-danger {
            background-color: var(--apple-red);
            color: white;
        }

        .btn-group {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }

        /* ç®¡ç†å‘˜é¢æ¿ */
        .admin-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }

        .admin-card {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-light);
        }

        .admin-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }

        .admin-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--spacing-sm);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--apple-blue);
        }

        .stat-label {
            font-size: 12px;
            color: var(--apple-gray-medium);
        }

        /* ç§ä¿¡å¼¹çª— */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--apple-gray-medium);
        }

        .modal-close:hover {
            color: var(--apple-black);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 28px;
            }

            .cat-grid {
                grid-template-columns: 1fr;
            }

            .detail-meta {
                grid-template-columns: 1fr;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-link {
                font-size: 12px;
                padding: 6px 8px;
            }

            .logo span {
                display: none;
            }

            .shop-container {
                grid-template-columns: 1fr;
            }

            .map-controls {
                width: 250px;
            }
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            font-size: 18px;
            color: var(--apple-gray-medium);
        }

        .loading::before {
            content: "ğŸ±";
            font-size: 48px;
            margin-right: var(--spacing-sm);
            animation: bounce 1.5s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }

        /* ç©ºçŠ¶æ€ */
        .empty-state {
            text-align: center;
            padding: var(--spacing-xxl) var(--spacing-md);
            color: var(--apple-gray-medium);
        }

        .empty-state h3 {
            font-size: 24px;
            margin-bottom: var(--spacing-sm);
        }

        .empty-state p {
            font-size: 16px;
            margin-bottom: var(--spacing-md);
        }

        /* è¿”å›æŒ‰é’® */
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--apple-blue);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: var(--spacing-md);
            padding: 8px 12px;
            border-radius: var(--border-radius-sm);
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background-color: rgba(0, 113, 227, 0.1);
        }

        .tab-container {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-light);
            margin: var(--spacing-md) 0;
        }

        .tab-nav {
            display: flex;
            gap: var(--spacing-sm);
            border-bottom: 1px solid var(--apple-border);
            margin-bottom: var(--spacing-md);
        }

        .tab-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: var(--apple-gray-medium);
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            color: var(--apple-blue);
            border-bottom: 2px solid var(--apple-blue);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* æƒé™æç¤º */
        .permission-denied {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: var(--spacing-md);
            border-radius: var(--border-radius-md);
            margin: var(--spacing-md) 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="nav">
        <div class="container">
            <div class="nav-content">
                <a href="#" class="logo" onclick="showPage('home')">
                    <span>ğŸ±</span>
                    <span>æ­å·å® ç‰©ç¤¾åŒº</span>
                </a>
                <div class="nav-menu">
                    <a href="#" class="nav-link active" onclick="showPage('home')">é¦–é¡µ</a>
                    <a href="#" class="nav-link" onclick="showPage('cats')">çŒ«å’ª</a>
                    <a href="#" class="nav-link" onclick="showPage('hospital')">å® ç‰©åŒ»é™¢</a>
                    <a href="#" class="nav-link" onclick="showPage('logistics')">ç‰©æµæŸ¥è¯¢</a>
                    <a href="#" class="nav-link" onclick="showPage('forum')">è®ºå›</a>
                    <a href="#" class="nav-link" onclick="showPage('shop')">å•†åŸ</a>
                    <a href="#" class="nav-link" onclick="showPage('admin')" id="adminLink" style="display: none;">ç®¡ç†</a>
                </div>
                
                <!-- ç”¨æˆ·èœå• -->
                <div class="user-menu">
                    <div class="user-avatar" onclick="toggleUserMenu()">ğŸ‘¤</div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="dropdown-item" onclick="showPage('profile')">ä¸ªäººä¸­å¿ƒ</div>
                        <div class="dropdown-item" onclick="showPage('cart')">è´­ç‰©è½¦ (<span id="cartCount">0</span>)</div>
                        <div class="dropdown-item" onclick="showPage('orders')">æˆ‘çš„è®¢å•</div>
                        <div class="dropdown-item" onclick="showMessageModal()">ç§ä¿¡ç®¡ç†</div>
                        <div class="dropdown-item" onclick="logout()">é€€å‡ºç™»å½•</div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- é¦–é¡µ -->
        <div id="home" class="page active">
            <div class="hero">
                <h1>ğŸ± æ­å·å® ç‰©ç¤¾åŒºå¹³å°</h1>
                <p>ä¸“ä¸šçš„å® ç‰©æœåŠ¡ç»¼åˆå¹³å° - åŒ»é™¢ã€ç‰©æµã€è®ºå›ã€å•†åŸä¸€ä½“åŒ–</p>
            </div>

            <!-- å¿«æ·åŠŸèƒ½ -->
            <div class="feature-grid">
                <div class="feature-card" onclick="showPage('cats')">
                    <div class="feature-icon">ğŸˆ</div>
                    <div class="feature-title">çŒ«å’ªå±•ç¤º</div>
                    <div class="feature-desc">æŸ¥çœ‹å¯çˆ±çš„çŒ«å’ªä»¬</div>
                </div>
                <div class="feature-card" onclick="showPage('hospital')">
                    <div class="feature-icon">ğŸ¥</div>
                    <div class="feature-title">å® ç‰©åŒ»é™¢</div>
                    <div class="feature-desc">é™„è¿‘çš„å® ç‰©åŒ»é™¢</div>
                </div>
                <div class="feature-card" onclick="showPage('logistics')">
                    <div class="feature-icon">ğŸ“¦</div>
                    <div class="feature-title">ç‰©æµæŸ¥è¯¢</div>
                    <div class="feature-desc">å®æ—¶è¿½è¸ªå¿«é€’</div>
                </div>
                <div class="feature-card" onclick="showPage('forum')">
                    <div class="feature-icon">ğŸ’¬</div>
                    <div class="feature-title">å® ç‰©è®ºå›</div>
                    <div class="feature-desc">åˆ†äº«å…»å® ç»éªŒ</div>
                </div>
                <div class="feature-card" onclick="showPage('shop')">
                    <div class="feature-icon">ğŸ›ï¸</div>
                    <div class="feature-title">å® ç‰©å•†åŸ</div>
                    <div class="feature-desc">ä¼˜è´¨å® ç‰©ç”¨å“</div>
                </div>
            </div>
        </div>

        <!-- çŒ«å’ªé¡µé¢ -->
        <div id="cats" class="page">
            <div class="hero">
                <h1>ğŸ± æˆ‘ä»¬çš„çŒ«å’ª</h1>
                <p>é‡‘æ¸å±‚çŒ«å’ªçš„æ¸©é¦¨å®¶å›­</p>
            </div>

            <!-- æœç´¢å’Œç­›é€‰ -->
            <div class="search-filter">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="æœç´¢çŒ«å’ªåå­—ã€å“ç§æˆ–æ€§æ ¼..." oninput="handleSearch(event)">
                </div>
                <div class="filter-row">
                    <select class="filter-select" onchange="handleFilterChange()">
                        <option value="all">æ‰€æœ‰æ€§åˆ«</option>
                        <option value="å…¬çŒ«">å…¬çŒ«</option>
                        <option value="æ¯çŒ«">æ¯çŒ«</option>
                    </select>
                    <select class="filter-select" onchange="handleSortChange()">
                        <option value="newest">æœ€æ–°æ·»åŠ </option>
                        <option value="oldest">æœ€æ—©æ·»åŠ </option>
                        <option value="name">æŒ‰åå­—æ’åº</option>
                        <option value="age">æŒ‰å¹´é¾„æ’åº</option>
                    </select>
                </div>
            </div>

            <!-- çŒ«å’ªç½‘æ ¼ -->
            <div id="catGrid" class="cat-grid">
                <!-- çŒ«å’ªå¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- ç©ºçŠ¶æ€ -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <h3>ğŸ˜” æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„çŒ«å’ª</h3>
                <p>å°è¯•è°ƒæ•´æœç´¢æ¡ä»¶</p>
            </div>
        </div>

        <!-- å® ç‰©åŒ»é™¢é¡µé¢ -->
        <div id="hospital" class="page">
            <div class="hero">
                <h1>ğŸ¥ é™„è¿‘å® ç‰©åŒ»é™¢</h1>
                <p>åŸºäºæ‚¨çš„å®æ—¶ä½ç½®ä¸ºæ‚¨æ¨è</p>
            </div>

            <div class="map-container">
                <div class="map-controls">
                    <div class="map-input-group">
                        <input type="text" class="map-input" id="hospitalSearch" placeholder="æœç´¢å® ç‰©åŒ»é™¢...">
                        <input type="text" class="map-input" id="startLocation" placeholder="èµ·ç‚¹ï¼ˆæˆ–ç‚¹å‡»å®šä½ï¼‰">
                        <input type="text" class="map-input" id="endLocation" placeholder="ç»ˆç‚¹ï¼ˆæˆ–é€‰æ‹©åŒ»é™¢ï¼‰">
                    </div>
                    <button class="map-btn" onclick="getCurrentLocation()">ğŸ“ è·å–å½“å‰ä½ç½®</button>
                    <button class="map-btn" onclick="searchNearbyHospitals()">ğŸ” æœç´¢é™„è¿‘åŒ»é™¢</button>
                    <button class="map-btn" onclick="startNavigation()">ğŸ§­ å¼€å§‹å¯¼èˆª</button>
                </div>
                <div id="map"></div>
            </div>

            <div class="tab-container">
                <div class="tab-nav">
                    <button class="tab-btn active" onclick="switchTab('hospitals', 'list')">åŒ»é™¢åˆ—è¡¨</button>
                    <button class="tab-btn" onclick="switchTab('hospitals', 'info')">å°±è¯Šé¡»çŸ¥</button>
                </div>
                <div id="hospitals-list" class="tab-content active">
                    <div id="hospitalList">
                        <!-- åŒ»é™¢åˆ—è¡¨å°†åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                <div id="hospitals-info" class="tab-content">
                    <h3>å°±è¯Šé¡»çŸ¥</h3>
                    <p>1. è¯·æå‰é¢„çº¦ï¼Œé¿å…ç­‰å¾…æ—¶é—´è¿‡é•¿</p>
                    <p>2. æºå¸¦çŒ«å’ªçš„ç–«è‹—è®°å½•æœ¬</p>
                    <p>3. å¦‚æœ‰ç´§æ€¥æƒ…å†µï¼Œè¯·ç›´æ¥æ‹¨æ‰“æ€¥æ•‘ç”µè¯</p>
                    <p>4. å°±è¯Šå‰è¯·ç¡®ä¿çŒ«å’ªæƒ…ç»ªç¨³å®š</p>
                </div>
            </div>
        </div>

        <!-- ç‰©æµæŸ¥è¯¢é¡µé¢ -->
        <div id="logistics" class="page">
            <div class="hero">
                <h1>ğŸ“¦ ç‰©æµæŸ¥è¯¢</h1>
                <p>å®æ—¶è¿½è¸ªæ‚¨çš„å® ç‰©ç”¨å“å¿«é€’</p>
            </div>

            <div class="logistics-container">
                <div class="logistics-header">
                    <h2 class="logistics-title">å¿«é€’è¿½è¸ª</h2>
                </div>
                <input type="text" class="logistics-input" id="trackingNumber" placeholder="è¯·è¾“å…¥å¿«é€’å•å·...">
                <button class="btn btn-primary" onclick="trackPackage()">ğŸ” æŸ¥è¯¢ç‰©æµ</button>
                
                <div id="logisticsResult" style="margin-top: var(--spacing-md);">
                    <!-- ç‰©æµç»“æœå°†åŠ¨æ€æ˜¾ç¤º -->
                </div>
            </div>

            <div class="tab-container">
                <div class="tab-nav">
                    <button class="tab-btn active" onclick="switchTab('logistics', 'companies')">å¿«é€’å…¬å¸</button>
                    <button class="tab-btn" onclick="switchTab('logistics', 'guide')">å¯„ä»¶æŒ‡å—</button>
                </div>
                <div id="logistics-companies" class="tab-content active">
                    <h3>åˆä½œå¿«é€’å…¬å¸</h3>
                    <ul>
                        <li>é¡ºä¸°å¿«é€’ - å…¨å›½24å°æ—¶è¾¾</li>
                        <li>äº¬ä¸œç‰©æµ - ä¸“ä¸šå® ç‰©ç”¨å“é…é€</li>
                        <li>èœé¸Ÿé©¿ç«™ - ä¾¿æ·è‡ªææœåŠ¡</li>
                    </ul>
                </div>
                <div id="logistics-guide" class="tab-content">
                    <h3>å¯„ä»¶æŒ‡å—</h3>
                    <p>1. ç¡®ä¿åŒ…è£…ç‰¢å›ºï¼Œé¿å…æŸå</p>
                    <p>2. æ˜“ç¢å“è¯·æ ‡æ³¨é†’ç›®æ ‡è¯†</p>
                    <p>3. ç”Ÿé²œç”¨å“é€‰æ‹©å†·é“¾é…é€</p>
                    <p>4. ä¿ä»·æœåŠ¡å»ºè®®è´µé‡ç‰©å“ä½¿ç”¨</p>
                </div>
            </div>
        </div>

        <!-- è®ºå›é¡µé¢ -->
        <div id="forum" class="page">
            <div class="forum-container">
                <div class="hero">
                    <h1>ğŸ’¬ å® ç‰©è®ºå›</h1>
                    <p>åˆ†äº«å…»å® ç»éªŒï¼Œäº¤æµå¿ƒå¾—</p>
                </div>

                <!-- å‘å¸–æŒ‰é’® -->
                <div style="text-align: center; margin: var(--spacing-md) 0;">
                    <button class="btn btn-primary" onclick="showCreatePost()">âœï¸ å‘å¸ƒæ–°å¸–</button>
                </div>

                <!-- å‘å¸–è¡¨å• -->
                <div id="createPostForm" class="create-post" style="display: none;">
                    <h2 class="create-post-title">å‘å¸ƒæ–°å¸–å­</h2>
                    <input type="text" class="form-input" id="postTitle" placeholder="è¯·è¾“å…¥æ ‡é¢˜...">
                    <textarea class="form-textarea" id="postContent" placeholder="åˆ†äº«æ‚¨çš„å…»å® ç»éªŒ..."></textarea>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="createPost()">ğŸ“ å‘å¸ƒ</button>
                        <button class="btn btn-secondary" onclick="hideCreatePost()">å–æ¶ˆ</button>
                    </div>
                </div>

                <!-- å¸–å­åˆ—è¡¨ -->
                <div id="postList" class="post-list">
                    <!-- å¸–å­å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>

        <!-- å•†åŸé¡µé¢ -->
        <div id="shop" class="page">
            <div class="hero">
                <h1>ğŸ›ï¸ å® ç‰©å•†åŸ</h1>
                <p>ä¼˜è´¨å® ç‰©ç”¨å“ï¼Œæé€Ÿé…é€</p>
            </div>

            <div class="shop-container">
                <!-- ä¾§è¾¹æ åˆ†ç±» -->
                <aside class="shop-sidebar">
                    <h3>å•†å“åˆ†ç±»</h3>
                    <ul class="category-list">
                        <li class="category-item active" onclick="filterProducts('all')">å…¨éƒ¨å•†å“</li>
                        <li class="category-item" onclick="filterProducts('food')">çŒ«ç²®ä¸»é£Ÿ</li>
                        <li class="category-item" onclick="filterProducts('snack')">é›¶é£Ÿç½å¤´</li>
                        <li class="category-item" onclick="filterProducts('toy')">ç©å…·ç”¨å“</li>
                        <li class="category-item" onclick="filterProducts('health')">ä¿å¥åŒ»ç–—</li>
                        <li class="category-item" onclick="filterProducts('clean')">æ¸…æ´ç”¨å“</li>
                    </ul>
                </aside>

                <!-- å•†å“åˆ—è¡¨ -->
                <main class="shop-main">
                    <div id="productsGrid" class="products-grid">
                        <!-- å•†å“å¡ç‰‡å°†åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </main>
            </div>
        </div>

        <!-- ç®¡ç†å‘˜é¡µé¢ -->
        <div id="admin" class="page">
            <div class="hero">
                <h1>âš™ï¸ ç®¡ç†å‘˜é¢æ¿</h1>
                <p>ç³»ç»Ÿç®¡ç†å’Œæ•°æ®åˆ†æ</p>
            </div>

            <div id="adminPermission" class="permission-denied" style="display: none;">
                <h3>ğŸš« æƒé™ä¸è¶³</h3>
                <p>æ‚¨æ²¡æœ‰æƒé™è®¿é—®ç®¡ç†å‘˜é¢æ¿</p>
            </div>

            <div id="adminContent" class="admin-dashboard">
                <div class="admin-card">
                    <h3 class="admin-title">ğŸ“Š æ•°æ®ç»Ÿè®¡</h3>
                    <div class="admin-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="totalCats">0</div>
                            <div class="stat-label">çŒ«å’ªæ€»æ•°</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="totalPosts">0</div>
                            <div class="stat-label">è®ºå›å¸–å­</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="totalProducts">0</div>
                            <div class="stat-label">å•†å“æ•°é‡</div>
                        </div>
                    </div>
                </div>

                <div class="admin-card">
                    <h3 class="admin-title">ğŸ’¬ æœ€æ–°è¯„è®º</h3>
                    <div id="latestComments">
                        <!-- æœ€æ–°è¯„è®ºå°†åŠ¨æ€æ˜¾ç¤º -->
                    </div>
                </div>

                <div class="admin-card">
                    <h3 class="admin-title">ğŸ“¦ è®¢å•ç®¡ç†</h3>
                    <button class="btn btn-primary" onclick="showOrders()">æŸ¥çœ‹è®¢å•</button>
                </div>

                <div class="admin-card">
                    <h3 class="admin-title">ğŸ‘¥ ç”¨æˆ·ç®¡ç†</h3>
                    <button class="btn btn-primary" onclick="showUsers()">ç”¨æˆ·åˆ—è¡¨</button>
                </div>

                <div class="admin-card">
                    <h3 class="admin-title">âœ‰ï¸ ç§ä¿¡ç®¡ç†</h3>
                    <button class="btn btn-primary" onclick="showAdminMessages()">æŸ¥çœ‹ç§ä¿¡</button>
                </div>

                <div class="admin-card">
                    <h3 class="admin-title">ğŸ“ å†…å®¹ç®¡ç†</h3>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="manageCats()">ç®¡ç†çŒ«å’ª</button>
                        <button class="btn btn-secondary" onclick="managePosts()">ç®¡ç†å¸–å­</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸ªäººä¸­å¿ƒé¡µé¢ -->
        <div id="profile" class="page">
            <div class="hero">
                <h1>ğŸ‘¤ ä¸ªäººä¸­å¿ƒ</h1>
                <p>ç®¡ç†æ‚¨çš„ä¸ªäººä¿¡æ¯å’Œè®¾ç½®</p>
            </div>

            <div class="profile-container">
                <!-- ä¾§è¾¹æ  -->
                <aside class="profile-sidebar">
                    <div class="profile-avatar">ğŸ‘¤</div>
                    <div class="profile-name">è®¿å®¢ç”¨æˆ·</div>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="userPostCount">0</div>
                            <div class="stat-label">å‘å¸–æ•°</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="userCommentCount">0</div>
                            <div class="stat-label">è¯„è®ºæ•°</div>
                        </div>
                    </div>
                </aside>

                <!-- ä¸»å†…å®¹åŒº -->
                <main class="profile-content">
                    <div class="profile-tabs">
                        <button class="profile-tab active" onclick="switchProfileTab('info')">ä¸ªäººä¿¡æ¯</button>
                        <button class="profile-tab" onclick="switchProfileTab('activity')">æˆ‘çš„æ´»åŠ¨</button>
                        <button class="profile-tab" onclick="switchProfileTab('settings')">è®¾ç½®</button>
                    </div>

                    <div id="profile-info" class="tab-content active">
                        <h3>ä¸ªäººä¿¡æ¯</h3>
                        <p>ç”¨æˆ·åï¼šè®¿å®¢ç”¨æˆ·</p>
                        <p>æ³¨å†Œæ—¶é—´ï¼š2024-01-01</p>
                        <p>é‚®ç®±ï¼šæœªè®¾ç½®</p>
                    </div>

                    <div id="profile-activity" class="tab-content">
                        <h3>æˆ‘çš„æ´»åŠ¨</h3>
                        <p>æ‚¨çš„å‘å¸–å’Œè¯„è®ºè®°å½•</p>
                    </div>

                    <div id="profile-settings" class="tab-content">
                        <h3>è´¦æˆ·è®¾ç½®</h3>
                        <p>é€šçŸ¥è®¾ç½®ã€éšç§è®¾ç½®ç­‰</p>
                    </div>
                </main>
            </div>
        </div>

        <!-- è´­ç‰©è½¦é¡µé¢ -->
        <div id="cart" class="page">
            <div class="hero">
                <h1>ğŸ›’ è´­ç‰©è½¦</h1>
                <p>ç®¡ç†æ‚¨çš„è´­ç‰©è½¦å•†å“</p>
            </div>

            <div class="cart-container">
                <div class="cart-header">
                    <h2 class="cart-title">æˆ‘çš„è´­ç‰©è½¦</h2>
                    <button class="btn btn-secondary" onclick="clearCart()">æ¸…ç©ºè´­ç‰©è½¦</button>
                </div>

                <div id="cartItems">
                    <!-- è´­ç‰©è½¦å•†å“å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>

                <div id="cartEmpty" class="cart-empty" style="display: none;">
                    <h3>ğŸ›’ è´­ç‰©è½¦æ˜¯ç©ºçš„</h3>
                    <p>å¿«å»å•†åŸæŒ‘é€‰æ‚¨å–œæ¬¢çš„å•†å“å§ï¼</p>
                    <button class="btn btn-primary" onclick="showPage('shop')">å»å•†åŸ</button>
                </div>

                <div id="cartTotal" class="cart-total" style="display: none;">
                    æ€»è®¡ï¼šÂ¥<span id="totalPrice">0.00</span>
                </div>

                <button class="checkout-btn" onclick="checkout()" style="display: none;">ç«‹å³ç»“ç®—</button>
            </div>
        </div>

        <!-- è®¢å•é¡µé¢ -->
        <div id="orders" class="page">
            <div class="hero">
                <h1>ğŸ“‹ æˆ‘çš„è®¢å•</h1>
                <p>æŸ¥çœ‹æ‚¨çš„è®¢å•å†å²</p>
            </div>

            <div class="tab-container">
                <div class="tab-nav">
                    <button class="tab-btn active" onclick="switchTab('orders', 'all')">å…¨éƒ¨è®¢å•</button>
                    <button class="tab-btn" onclick="switchTab('orders', 'pending')">å¾…ä»˜æ¬¾</button>
                    <button class="tab-btn" onclick="switchTab('orders', 'shipping')">é…é€ä¸­</button>
                    <button class="tab-btn" onclick="switchTab('orders', 'completed')">å·²å®Œæˆ</button>
                </div>
                <div id="orders-all" class="tab-content active">
                    <!-- è®¢å•åˆ—è¡¨å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div id="orders-pending" class="tab-content">
                    <p>æš‚æ— å¾…ä»˜æ¬¾è®¢å•</p>
                </div>
                <div id="orders-shipping" class="tab-content">
                    <p>æš‚æ— é…é€ä¸­è®¢å•</p>
                </div>
                <div id="orders-completed" class="tab-content">
                    <p>æš‚æ— å·²å®Œæˆè®¢å•</p>
                </div>
            </div>
        </div>

        <!-- çŒ«å’ªè¯¦æƒ…é¡µé¢ -->
        <div id="catDetail" class="page">
            <a href="#" class="back-button" onclick="showPage('cats')">â† è¿”å›</a>
            <div id="catDetailContent" class="cat-detail">
                <!-- è¯¦æƒ…å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- ç¼–è¾‘çŒ«å’ªé¡µé¢ -->
        <div id="editCat" class="page">
            <a href="#" class="back-button" onclick="showBackToCatDetail()">â† è¿”å›</a>
            <div class="form-container">
                <h2>ç¼–è¾‘çŒ«å’ªä¿¡æ¯</h2>
                <form id="editCatForm" onsubmit="handleEditCat(event)">
                    <!-- è¡¨å•å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </form>
            </div>
        </div>

        <!-- æ·»åŠ çŒ«å’ªé¡µé¢ -->
        <div id="addCat" class="page">
            <a href="#" class="back-button" onclick="showPage('cats')">â† è¿”å›</a>
            <div class="form-container">
                <h2>æ·»åŠ æ–°çŒ«å’ª</h2>
                <form id="addCatForm" onsubmit="handleAddCat(event)">
                    <!-- è¡¨å•å†…å®¹ -->
                </form>
            </div>
        </div>
    </div>

    <!-- ç§ä¿¡å¼¹çª— -->
    <div id="messageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ç§ä¿¡ç®¡ç†å‘˜</h3>
                <button class="modal-close" onclick="hideMessageModal()">Ã—</button>
            </div>
            <textarea id="messageContent" class="form-textarea" placeholder="è¯·è¾“å…¥æ‚¨è¦å‘é€ç»™ç®¡ç†å‘˜çš„æ¶ˆæ¯..." style="min-height: 150px;"></textarea>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="sendMessage()">ğŸ“¤ å‘é€</button>
                <button class="btn btn-secondary" onclick="hideMessageModal()">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€æ•°æ®å­˜å‚¨
        let cats = [
            {
                id: 1,
                name: 'å°ç‹å­',
                age: '1å²8ä¸ªæœˆ',
                breed: 'è‹±å›½é‡‘æ¸å±‚',
                personality: 'æ¸©é¡ºé«˜è´µï¼Œå–œæ¬¢ä¸äººäº²è¿‘',
                description: 'å°ç‹å­æ˜¯ä¸€åªè¡€ç»Ÿçº¯æ­£çš„è‹±å›½é‡‘æ¸å±‚ï¼Œæ‹¥æœ‰åä¸½çš„é‡‘è‰²è¢«æ¯›å’Œç»¿è‰²çœ¼ç›ã€‚',
                images: ['https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=800&h=600&fit=crop'],
                gender: 'å…¬çŒ«',
                weight: '4.8kg',
                color: '12è‰²é‡‘æ¸å±‚',
                vaccinated: true,
                neutered: true,
                addedDate: '2024-01-15',
                comments: []
            },
            {
                id: 2,
                name: 'å°å…¬ä¸»',
                age: '1å²6ä¸ªæœˆ',
                breed: 'è‹±å›½é‡‘æ¸å±‚',
                personality: 'æ´»æ³¼å¯çˆ±ï¼Œå–œæ¬¢æ’’å¨‡å–èŒ',
                description: 'å°å…¬ä¸»æ˜¯æå…ˆç”Ÿå®¶çš„å°ä»™å¥³ï¼Œæ‹¥æœ‰å®Œç¾çš„åœ†è„¸å’Œèƒ–èƒ–çš„èº«ä½“ã€‚',
                images: ['https://images.unsplash.com/photo-1513245543132-31f507417b26?w=800&h=600&fit=crop'],
                gender: 'æ¯çŒ«',
                weight: '4.2kg',
                color: '11è‰²é‡‘æ¸å±‚',
                vaccinated: true,
                neutered: true,
                addedDate: '2024-02-20',
                comments: []
            }
        ];

        let filteredCats = [...cats];
        let currentCatId = null;
        let posts = [];
        let products = [];
        let cart = [];
        let orders = [];
        let messages = [];
        let currentUser = null;
        let isAdmin = false;
        let map = null;
        let currentLocation = null;
        let selectedHospital = null;

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            checkAdminStatus();
            loadCartFromStorage();
            renderCatGrid();
            initializeProducts();
            initializePosts();
            updateCartCount();
        });

        // æ£€æŸ¥ç®¡ç†å‘˜çŠ¶æ€
        function checkAdminStatus() {
            // ç®€å•çš„ç®¡ç†å‘˜æ£€æŸ¥ï¼ˆå®é™…åº”ç”¨ä¸­åº”è¯¥æœ‰æ›´å®‰å…¨çš„éªŒè¯ï¼‰
            const adminCode = localStorage.getItem('adminCode');
            if (adminCode === 'admin123') {
                isAdmin = true;
                document.getElementById('adminLink').style.display = 'block';
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        function initializeApp() {
            // ä»localStorageåŠ è½½æ•°æ®
            const savedCats = localStorage.getItem('cats');
            const savedPosts = localStorage.getItem('posts');
            const savedMessages = localStorage.getItem('messages');

            if (savedCats) cats = JSON.parse(savedCats);
            if (savedPosts) posts = JSON.parse(savedPosts);
            if (savedMessages) messages = JSON.parse(savedMessages);

            filteredCats = [...cats];
        }

        // é¡µé¢åˆ‡æ¢
        function showPage(pageId) {
            // æ£€æŸ¥ç®¡ç†å‘˜æƒé™
            if (pageId === 'admin' && !isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™è®¿é—®ç®¡ç†å‘˜é¢æ¿');
                return;
            }

            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // æ˜¾ç¤ºç›®æ ‡é¡µé¢
            document.getElementById(pageId).classList.add('active');
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`.nav-link[onclick="showPage('${pageId}')"]`);
            if (activeLink) activeLink.classList.add('active');
            
            // å…³é—­ç”¨æˆ·èœå•
            document.getElementById('userDropdown').classList.remove('active');
            
            // ç‰¹æ®Šé¡µé¢å¤„ç†
            if (pageId === 'hospital') {
                setTimeout(initializeMap, 100);
            } else if (pageId === 'admin') {
                updateAdminStats();
            } else if (pageId === 'cart') {
                renderCart();
            } else if (pageId === 'profile') {
                updateProfileStats();
            }
        }

        // åˆå§‹åŒ–åœ°å›¾
        function initializeMap() {
            if (typeof AMap === 'undefined') {
                document.getElementById('map').innerHTML = '<div style="text-align: center; padding: 50px;">åœ°å›¾åŠ è½½ä¸­...</div>';
                setTimeout(initializeMap, 1000);
                return;
            }

            // åˆ›å»ºåœ°å›¾
            map = new AMap.Map('map', {
                zoom: 13,
                center: [120.15507, 30.27408], // æ­å·å¸‚ä¸­å¿ƒ
                viewMode: '2D'
            });

            // æ·»åŠ æ§ä»¶
            map.addControl(new AMap.ToolBar({
                position: 'RB'
            }));

            // æ·»åŠ å®šä½æ§ä»¶
            map.addControl(new AMap.Geolocation({
                position: 'LT',
                buttonOffset: new AMap.Pixel(10, 20)
            }));

            // è·å–å½“å‰ä½ç½®
            getCurrentLocation();
        }

        // è·å–å½“å‰ä½ç½®
        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lng = position.coords.longitude;
                        const lat = position.coords.latitude;
                        
                        currentLocation = [lng, lat];
                        
                        if (map) {
                            map.setCenter(currentLocation);
                            map.setZoom(14);
                            
                            // æ·»åŠ å½“å‰ä½ç½®æ ‡è®°
                            new AMap.Marker({
                                position: currentLocation,
                                title: 'æ‚¨çš„ä½ç½®',
                                icon: new AMap.Icon({
                                    size: new AMap.Size(25, 34),
                                    imageSize: new AMap.Size(25, 34),
                                    image: 'https://webapi.amap.com/theme/v1.3/markers/b/mark_bs.png'
                                })
                            }).setMap(map);
                            
                            // è®¾ç½®èµ·ç‚¹è¾“å…¥æ¡†
                            document.getElementById('startLocation').value = `å½“å‰ä½ç½® (${lat.toFixed(4)}, ${lng.toFixed(4)})`;
                            
                            // æœç´¢é™„è¿‘åŒ»é™¢
                            searchNearbyHospitals();
                        }
                    },
                    (error) => {
                        console.error('å®šä½å¤±è´¥:', error);
                        alert('æ— æ³•è·å–æ‚¨çš„ä½ç½®ï¼Œè¯·æ£€æŸ¥å®šä½æƒé™');
                        // ä½¿ç”¨é»˜è®¤ä½ç½®
                        searchNearbyHospitals();
                    }
                );
            } else {
                alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒå®šä½åŠŸèƒ½');
            }
        }

        // æœç´¢é™„è¿‘åŒ»é™¢
        function searchNearbyHospitals() {
            if (!map) {
                alert('åœ°å›¾æ­£åœ¨åŠ è½½ä¸­ï¼Œè¯·ç¨åå†è¯•');
                return;
            }

            const placeSearch = new AMap.PlaceSearch({
                pageSize: 10,
                pageIndex: 1,
                city: 'æ­å·',
                map: map
            });

            // æœç´¢å…³é”®è¯
            const keywords = document.getElementById('hospitalSearch').value || 'å® ç‰©åŒ»é™¢';
            const searchCenter = currentLocation || [120.15507, 30.27408];
            
            placeSearch.searchNearBy(keywords, searchCenter, 5000, (status, result) => {
                if (status === 'complete' && result.poiList && result.poiList.pois.length > 0) {
                    console.log('æœç´¢å®Œæˆ:', result);
                    displayHospitalList(result.poiList.pois);
                } else {
                    console.error('æœç´¢å¤±è´¥:', result);
                    // æ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®
                    showMockHospitals();
                }
            });
        }

        // æ˜¾ç¤ºåŒ»é™¢åˆ—è¡¨
        function displayHospitalList(pois) {
            const hospitalList = document.getElementById('hospitalList');
            hospitalList.innerHTML = pois.map(poi => `
                <div class="comment-item" onclick="selectHospital(${poi.location.lng}, ${poi.location.lat}, '${poi.name}', '${poi.address}')">
                    <h4>${poi.name}</h4>
                    <p>ğŸ“ ${poi.address || 'åœ°å€æœªçŸ¥'}</p>
                    <p>ğŸ“ ${poi.tel || 'ç”µè¯æœªçŸ¥'}</p>
                    <p>ğŸ“ è·ç¦»ï¼š${poi.distance ? (poi.distance/1000).toFixed(2) + 'km' : 'æœªçŸ¥'}</p>
                    <button class="btn btn-primary" onclick="event.stopPropagation(); setAsDestination(${poi.location.lng}, ${poi.location.lat}, '${poi.name}')">è®¾ä¸ºç›®çš„åœ°</button>
                </div>
            `).join('');
        }

        // é€‰æ‹©åŒ»é™¢
        function selectHospital(lng, lat, name, address) {
            selectedHospital = { lng, lat, name, address };
            document.getElementById('endLocation').value = name;
            
            if (map) {
                map.setCenter([lng, lat]);
                
                // æ¸…é™¤ä¹‹å‰çš„æ ‡è®°
                map.clearMap();
                
                // é‡æ–°æ·»åŠ å½“å‰ä½ç½®æ ‡è®°
                if (currentLocation) {
                    new AMap.Marker({
                        position: currentLocation,
                        title: 'æ‚¨çš„ä½ç½®'
                    }).setMap(map);
                }
                
                // æ·»åŠ åŒ»é™¢æ ‡è®°
                new AMap.Marker({
                    position: [lng, lat],
                    title: name,
                    icon: new AMap.Icon({
                        size: new AMap.Size(25, 34),
                        imageSize: new AMap.Size(25, 34),
                        image: 'https://webapi.amap.com/theme/v1.3/markers/n/mark_r.png'
                    })
                }).setMap(map);
            }
        }

        // è®¾ä¸ºç›®çš„åœ°
        function setAsDestination(lng, lat, name) {
            selectedHospital = { lng, lat, name };
            document.getElementById('endLocation').value = name;
            alert(`å·²è®¾ç½® "${name}" ä¸ºç›®çš„åœ°`);
        }

        // å¼€å§‹å¯¼èˆª
        function startNavigation() {
            if (!currentLocation) {
                alert('è¯·å…ˆè·å–å½“å‰ä½ç½®');
                return;
            }
            
            if (!selectedHospital) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªåŒ»é™¢ä½œä¸ºç›®çš„åœ°');
                return;
            }

            // ä½¿ç”¨é«˜å¾·åœ°å›¾å¯¼èˆª
            const startLng = currentLocation[0];
            const startLat = currentLocation[1];
            const endLng = selectedHospital.lng;
            const endLat = selectedHospital.lat;

            // æ„å»ºå¯¼èˆªURL
            const navUrl = `https://uri.amap.com/navigation?from=${startLng},${startLat},æˆ‘çš„ä½ç½®&to=${endLng},${endLat},${encodeURIComponent(selectedHospital.name)}&mode=car&policy=1&src=mypage&coordinate=gaode&callnative=0`;
            
            // åœ¨æ–°çª—å£æ‰“å¼€å¯¼èˆª
            window.open(navUrl, '_blank');
        }

        // æ˜¾ç¤ºæ¨¡æ‹ŸåŒ»é™¢æ•°æ®
        function showMockHospitals() {
            const mockHospitals = [
                { name: 'æ­å·å® ç‰©åŒ»é™¢', address: 'æ­å·å¸‚è¥¿æ¹–åŒº', phone: '0571-12345678', lng: 120.15507, lat: 30.27408 },
                { name: 'çˆ±å¿ƒåŠ¨ç‰©åŒ»é™¢', address: 'æ­å·å¸‚ä¸ŠåŸåŒº', phone: '0571-87654321', lng: 120.16507, lat: 30.28408 },
                { name: 'å® ç‰©å¥åº·ä¸­å¿ƒ', address: 'æ­å·å¸‚æ±Ÿå¹²åŒº', phone: '0571-11223344', lng: 120.14507, lat: 30.26408 }
            ];

            const hospitalList = document.getElementById('hospitalList');
            hospitalList.innerHTML = mockHospitals.map(hospital => `
                <div class="comment-item" onclick="selectHospital(${hospital.lng}, ${hospital.lat}, '${hospital.name}', '${hospital.address}')">
                    <h4>${hospital.name}</h4>
                    <p>ğŸ“ ${hospital.address}</p>
                    <p>ğŸ“ ${hospital.phone}</p>
                    <button class="btn btn-primary" onclick="event.stopPropagation(); setAsDestination(${hospital.lng}, ${hospital.lat}, '${hospital.name}')">è®¾ä¸ºç›®çš„åœ°</button>
                </div>
            `).join('');
        }

        // ç”¨æˆ·èœå•åˆ‡æ¢
        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('active');
        }

        // ç‰©æµæŸ¥è¯¢
        function trackPackage() {
            const trackingNumber = document.getElementById('trackingNumber').value;
            if (!trackingNumber) {
                alert('è¯·è¾“å…¥å¿«é€’å•å·');
                return;
            }

            // æ¨¡æ‹Ÿç‰©æµæ•°æ®
            const mockLogistics = [
                { time: '2024-01-20 14:30', content: 'å¿«ä»¶å·²ç­¾æ”¶ï¼Œç­¾æ”¶äººï¼šæœ¬äºº' },
                { time: '2024-01-20 09:15', content: 'å¿«ä»¶æ­£åœ¨æ´¾é€ä¸­ï¼Œæ´¾é€å‘˜ï¼šå¼ å¸ˆå‚…ï¼Œç”µè¯ï¼š138****5678' },
                { time: '2024-01-19 18:20', content: 'å¿«ä»¶å·²åˆ°è¾¾æ­å·é…é€ä¸­å¿ƒ' },
                { time: '2024-01-19 10:30', content: 'å¿«ä»¶å·²ä»ä¸Šæµ·å‘å‡º' },
                { time: '2024-01-18 16:45', content: 'å¿«ä»¶å·²è¢«æ½æ”¶' }
            ];

            const logisticsResult = document.getElementById('logisticsResult');
            logisticsResult.innerHTML = `
                <h3>ç‰©æµä¿¡æ¯ - ${trackingNumber}</h3>
                <div class="logistics-timeline">
                    ${mockLogistics.map(item => `
                        <div class="timeline-item">
                            <div class="timeline-time">${item.time}</div>
                            <div class="timeline-content">${item.content}</div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // åˆå§‹åŒ–å•†å“æ•°æ®
        function initializeProducts() {
            products = [
                {
                    id: 1,
                    name: 'çš‡å®¶çŒ«ç²® æˆçŒ«ä¸“ç”¨',
                    price: 158.00,
                    category: 'food',
                    image: 'https://images.unsplash.com/photo-1583337130417-3346a1be7dee?w=300&h=200&fit=crop',
                    description: 'è¥å…»å‡è¡¡ï¼Œé€‚åˆæˆçŒ«æ—¥å¸¸é£Ÿç”¨'
                },
                {
                    id: 2,
                    name: 'çŒ«å’ªé€—çŒ«æ£’å¥—è£…',
                    price: 29.90,
                    category: 'toy',
                    image: 'https://images.unsplash.com/photo-1548247416-ec66f4900b2e?w=300&h=200&fit=crop',
                    description: 'å¤šç§æ¬¾å¼ï¼Œè®©çŒ«å’ªçˆ±ä¸é‡Šæ‰‹'
                },
                {
                    id: 3,
                    name: 'çŒ«ç ‚ç›† è‡ªåŠ¨æ¸…æ´',
                    price: 899.00,
                    category: 'clean',
                    image: 'https://images.unsplash.com/photo-1574158622682-e40e69881006?w=300&h=200&fit=crop',
                    description: 'æ™ºèƒ½æ„Ÿåº”ï¼Œè‡ªåŠ¨æ¸…ç†'
                }
            ];
            
            renderProducts();
        }

        // æ¸²æŸ“å•†å“
        function renderProducts(category = 'all') {
            const filteredProducts = category === 'all' 
                ? products 
                : products.filter(p => p.category === category);

            const productsGrid = document.getElementById('productsGrid');
            productsGrid.innerHTML = filteredProducts.map(product => `
                <div class="product-card">
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">Â¥${product.price.toFixed(2)}</div>
                        <div class="product-desc">${product.description}</div>
                        <button class="btn btn-primary" onclick="addToCart(${product.id})">ğŸ›’ åŠ å…¥è´­ç‰©è½¦</button>
                    </div>
                </div>
            `).join('');
        }

        // ç­›é€‰å•†å“
        function filterProducts(category) {
            // æ›´æ–°åˆ†ç±»çŠ¶æ€
            document.querySelectorAll('.category-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderProducts(category);
        }

        // æ·»åŠ åˆ°è´­ç‰©è½¦
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        ...product,
                        quantity: 1
                    });
                }
                saveCartToStorage();
                updateCartCount();
                alert(`âœ… "${product.name}" å·²åŠ å…¥è´­ç‰©è½¦ï¼`);
            }
        }

        // ä¿å­˜è´­ç‰©è½¦åˆ°æœ¬åœ°å­˜å‚¨
        function saveCartToStorage() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è´­ç‰©è½¦
        function loadCartFromStorage() {
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
            }
        }

        // æ›´æ–°è´­ç‰©è½¦æ•°é‡
        function updateCartCount() {
            const count = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        // æ¸²æŸ“è´­ç‰©è½¦
        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            const cartEmpty = document.getElementById('cartEmpty');
            const cartTotal = document.getElementById('cartTotal');
            const checkoutBtn = document.querySelector('.checkout-btn');

            if (cart.length === 0) {
                cartItems.style.display = 'none';
                cartEmpty.style.display = 'block';
                cartTotal.style.display = 'none';
                checkoutBtn.style.display = 'none';
            } else {
                cartItems.style.display = 'block';
                cartEmpty.style.display = 'none';
                cartTotal.style.display = 'block';
                checkoutBtn.style.display = 'block';

                cartItems.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">Â¥${item.price.toFixed(2)}</div>
                        </div>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                            <input type="number" class="quantity-input" value="${item.quantity}" readonly>
                            <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                        </div>
                    </div>
                `).join('');

                // è®¡ç®—æ€»ä»·
                const totalPrice = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
                document.getElementById('totalPrice').textContent = totalPrice.toFixed(2);
            }
        }

        // æ›´æ–°æ•°é‡
        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    cart = cart.filter(item => item.id !== productId);
                }
                saveCartToStorage();
                updateCartCount();
                renderCart();
            }
        }

        // æ¸…ç©ºè´­ç‰©è½¦
        function clearCart() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºè´­ç‰©è½¦å—ï¼Ÿ')) {
                cart = [];
                saveCartToStorage();
                updateCartCount();
                renderCart();
            }
        }

        // ç»“ç®—
        function checkout() {
            if (cart.length === 0) {
                alert('è´­ç‰©è½¦æ˜¯ç©ºçš„');
                return;
            }

            const totalPrice = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            
            if (confirm(`æ€»è®¡ï¼šÂ¥${totalPrice.toFixed(2)}\nç¡®è®¤ä¸‹å•å—ï¼Ÿ`)) {
                // åˆ›å»ºè®¢å•
                const order = {
                    id: Date.now(),
                    items: [...cart],
                    totalPrice: totalPrice,
                    status: 'pending',
                    createTime: new Date().toLocaleString()
                };
                
                orders.push(order);
                localStorage.setItem('orders', JSON.stringify(orders));
                
                // æ¸…ç©ºè´­ç‰©è½¦
                cart = [];
                saveCartToStorage();
                updateCartCount();
                renderCart();
                
                alert('ğŸ‰ è®¢å•åˆ›å»ºæˆåŠŸï¼è¯·åœ¨"æˆ‘çš„è®¢å•"ä¸­æŸ¥çœ‹è®¢å•çŠ¶æ€ã€‚');
                showPage('orders');
            }
        }

        // åˆå§‹åŒ–å¸–å­
        function initializePosts() {
            posts = [
                {
                    id: 1,
                    title: 'æ–°æ‰‹å…»çŒ«å¿…çœ‹ï¼é‡‘æ¸å±‚å…»æŠ¤å¿ƒå¾—',
                    content: 'å…»äº†é‡‘æ¸å±‚å°ç‹å­åŠå¹´å¤šäº†ï¼Œæ€»ç»“ä¸€äº›å…»æŠ¤å¿ƒå¾—...',
                    author: 'çŒ«å¥´å°æ',
                    avatar: 'ğŸ˜Š',
                    time: '2å°æ—¶å‰',
                    likes: 23,
                    comments: 8
                },
                {
                    id: 2,
                    title: 'çŒ«å’ªæŒ‘é£Ÿæ€ä¹ˆåŠï¼Ÿè¥å…»å¸ˆæ”¯æ‹›',
                    content: 'æœ€è¿‘å‘ç°å°å…¬ä¸»æŒ‘é£Ÿï¼Œè¯·æ•™äº†ä¸“ä¸šå® ç‰©è¥å…»å¸ˆ...',
                    author: 'çˆ±çŒ«äººå£«',
                    avatar: 'ğŸ±',
                    time: '5å°æ—¶å‰',
                    likes: 15,
                    comments: 6
                }
            ];
            
            renderPosts();
        }

        // æ¸²æŸ“å¸–å­
        function renderPosts() {
            const postList = document.getElementById('postList');
            postList.innerHTML = posts.map(post => `
                <div class="post-item" onclick="viewPost(${post.id})">
                    <div class="post-header">
                        <div class="post-author">
                            <div class="author-avatar">${post.avatar}</div>
                            <div class="author-info">
                                <div class="author-name">${post.author}</div>
                                <div class="post-time">${post.time}</div>
                            </div>
                        </div>
                        ${isAdmin ? `<button class="btn btn-secondary" onclick="deletePost(${post.id}, event)">åˆ é™¤</button>` : ''}
                    </div>
                    <h3 class="post-title">${post.title}</h3>
                    <p class="post-content">${post.content}</p>
                    <div class="post-actions">
                        <span class="post-action">ğŸ‘ ${post.likes}</span>
                        <span class="post-action">ğŸ’¬ ${post.comments}</span>
                        <span class="post-action">ğŸ“¤ åˆ†äº«</span>
                    </div>
                </div>
            `).join('');
        }

        // æ˜¾ç¤ºå‘å¸–è¡¨å•
        function showCreatePost() {
            document.getElementById('createPostForm').style.display = 'block';
        }

        // éšè—å‘å¸–è¡¨å•
        function hideCreatePost() {
            document.getElementById('createPostForm').style.display = 'none';
        }

        // åˆ›å»ºå¸–å­
        function createPost() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            
            if (!title || !content) {
                alert('è¯·å¡«å†™æ ‡é¢˜å’Œå†…å®¹');
                return;
            }

            const newPost = {
                id: Date.now(),
                title: title,
                content: content,
                author: 'å½“å‰ç”¨æˆ·',
                avatar: 'ğŸ˜Š',
                time: 'åˆšåˆš',
                likes: 0,
                comments: 0
            };

            posts.unshift(newPost);
            localStorage.setItem('posts', JSON.stringify(posts));
            renderPosts();
            hideCreatePost();
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            
            alert('âœ… å¸–å­å‘å¸ƒæˆåŠŸï¼');
        }

        // åˆ é™¤å¸–å­ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
        function deletePost(postId, event) {
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™åˆ é™¤å¸–å­');
                return;
            }
            
            event.stopPropagation();
            
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ç¯‡å¸–å­å—ï¼Ÿ')) {
                posts = posts.filter(p => p.id !== postId);
                localStorage.setItem('posts', JSON.stringify(posts));
                renderPosts();
                alert('âœ… å¸–å­å·²åˆ é™¤');
            }
        }

        // æŸ¥çœ‹å¸–å­è¯¦æƒ…
        function viewPost(postId) {
            const post = posts.find(p => p.id === postId);
            if (post) {
                alert(`å¸–å­è¯¦æƒ…ï¼š\n\næ ‡é¢˜ï¼š${post.title}\nå†…å®¹ï¼š${post.content}`);
            }
        }

        // æ˜¾ç¤ºçŒ«å’ªè¯¦æƒ…
        function showCatDetail(catId) {
            const cat = cats.find(c => c.id === parseInt(catId));
            if (!cat) return;
            
            currentCatId = catId;
            
            const detailContent = document.getElementById('catDetailContent');
            detailContent.innerHTML = `
                <div class="detail-image-container">
                    <img src="${cat.images[0]}" alt="${cat.name}" class="detail-image">
                </div>
                <div class="detail-content">
                    <h1 class="detail-title">${cat.name}</h1>
                    
                    <div class="detail-meta">
                        <div class="meta-item">
                            <span class="meta-label">å“ç§</span>
                            <span class="meta-value">${cat.breed}</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">å¹´é¾„</span>
                            <span class="meta-value">${cat.age}</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">æ€§åˆ«</span>
                            <span class="meta-value">${cat.gender}</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">ä½“é‡</span>
                            <span class="meta-value">${cat.weight}</span>
                        </div>
                    </div>
                    
                    <p class="detail-description">${cat.description}</p>
                    
                    <div class="cat-meta">
                        ${cat.vaccinated ? '<span class="cat-tag">âœ… å·²æ¥ç§ç–«è‹—</span>' : ''}
                        ${cat.neutered ? '<span class="cat-tag">âœ… å·²ç»è‚²</span>' : ''}
                    </div>
                    
                    ${isAdmin ? `
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="showEditCatPage(${cat.id})">âœï¸ ç¼–è¾‘</button>
                        <button class="btn btn-danger" onclick="deleteCat(${cat.id})">ğŸ—‘ï¸ åˆ é™¤</button>
                    </div>
                    ` : ''}
                    
                    <!-- è¯„è®ºåŒºåŸŸ -->
                    <div class="comments-section">
                        <div class="comments-header">
                            <h3 class="comments-title">ğŸ’¬ è¯„è®ºåŒº</h3>
                        </div>
                        
                        <!-- è¯„è®ºè¡¨å• -->
                        <div class="comment-form">
                            <textarea class="comment-input" id="commentInput" placeholder="å†™ä¸‹ä½ çš„è¯„è®º..."></textarea>
                            <button class="btn btn-primary" onclick="addComment()">å‘è¡¨è¯„è®º</button>
                        </div>
                        
                        <!-- è¯„è®ºåˆ—è¡¨ -->
                        <div id="commentsList">
                            ${renderComments(cat.comments || [])}
                        </div>
                    </div>
                </div>
            `;
            
            showPage('catDetail');
        }

        // æ¸²æŸ“è¯„è®º
        function renderComments(comments) {
            if (!comments || comments.length === 0) {
                return '<p style="text-align: center; color: #86868b;">æš‚æ— è¯„è®ºï¼Œæ¥æŠ¢æ²™å‘å§ï¼</p>';
            }
            
            return comments.map((comment, index) => `
                <div class="comment-item">
                    <div class="comment-author">${comment.author}</div>
                    <div class="comment-time">${comment.time}</div>
                    <div class="comment-content">${comment.content}</div>
                    ${isAdmin ? `<button class="btn btn-danger" style="margin-top: 8px;" onclick="deleteComment(${index})">åˆ é™¤è¯„è®º</button>` : ''}
                </div>
            `).join('');
        }

        // æ·»åŠ è¯„è®º
        function addComment() {
            const content = document.getElementById('commentInput').value;
            if (!content) {
                alert('è¯·è¾“å…¥è¯„è®ºå†…å®¹');
                return;
            }

            const cat = cats.find(c => c.id === currentCatId);
            if (cat) {
                if (!cat.comments) cat.comments = [];
                
                const newComment = {
                    author: 'è®¿å®¢ç”¨æˆ·',
                    time: 'åˆšåˆš',
                    content: content
                };
                
                cat.comments.push(newComment);
                
                // ä¿å­˜åˆ°localStorage
                localStorage.setItem('cats', JSON.stringify(cats));
                
                // æ›´æ–°æ˜¾ç¤º
                document.getElementById('commentsList').innerHTML = renderComments(cat.comments);
                document.getElementById('commentInput').value = '';
                
                alert('âœ… è¯„è®ºå‘è¡¨æˆåŠŸï¼');
            }
        }

        // åˆ é™¤è¯„è®ºï¼ˆä»…ç®¡ç†å‘˜ï¼‰
        function deleteComment(commentIndex) {
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™åˆ é™¤è¯„è®º');
                return;
            }

            const cat = cats.find(c => c.id === currentCatId);
            if (cat && cat.comments) {
                if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è¯„è®ºå—ï¼Ÿ')) {
                    cat.comments.splice(commentIndex, 1);
                    localStorage.setItem('cats', JSON.stringify(cats));
                    document.getElementById('commentsList').innerHTML = renderComments(cat.comments);
                    alert('âœ… è¯„è®ºå·²åˆ é™¤');
                }
            }
        }

        // æ˜¾ç¤ºç§ä¿¡å¼¹çª—
        function showMessageModal() {
            document.getElementById('messageModal').classList.add('active');
        }

        // éšè—ç§ä¿¡å¼¹çª—
        function hideMessageModal() {
            document.getElementById('messageModal').classList.remove('active');
        }

        // å‘é€ç§ä¿¡
        function sendMessage() {
            const content = document.getElementById('messageContent').value;
            if (!content) {
                alert('è¯·è¾“å…¥æ¶ˆæ¯å†…å®¹');
                return;
            }

            const newMessage = {
                id: Date.now(),
                content: content,
                time: new Date().toLocaleString(),
                from: 'ç”¨æˆ·',
                to: 'ç®¡ç†å‘˜',
                read: false
            };

            messages.push(newMessage);
            localStorage.setItem('messages', JSON.stringify(messages));
            
            document.getElementById('messageContent').value = '';
            hideMessageModal();
            
            alert('âœ… æ¶ˆæ¯å·²å‘é€ç»™ç®¡ç†å‘˜ï¼æˆ‘ä»¬ä¼šå°½å¿«å›å¤æ‚¨ã€‚');
        }

        // ç®¡ç†å‘˜åŠŸèƒ½
        function updateAdminStats() {
            const adminPermission = document.getElementById('adminPermission');
            const adminContent = document.getElementById('adminContent');
            
            if (!isAdmin) {
                adminPermission.style.display = 'block';
                adminContent.style.display = 'none';
                return;
            }
            
            adminPermission.style.display = 'none';
            adminContent.style.display = 'grid';
            
            document.getElementById('totalCats').textContent = cats.length;
            document.getElementById('totalPosts').textContent = posts.length;
            document.getElementById('totalProducts').textContent = products.length;
            
            // æ˜¾ç¤ºæœ€æ–°è¯„è®º
            const latestComments = document.getElementById('latestComments');
            let allComments = [];
            
            cats.forEach(cat => {
                if (cat.comments) {
                    cat.comments.forEach((comment, index) => {
                        allComments.push({
                            cat: cat.name,
                            comment: comment,
                            index: index
                        });
                    });
                }
            });
            
            if (allComments.length > 0) {
                latestComments.innerHTML = allComments.slice(-3).map(item => `
                    <div style="padding: 10px; border-bottom: 1px solid #eee;">
                        <strong>${item.comment.author}</strong> è¯„è®ºäº† <strong>${item.cat}</strong><br>
                        <small>${item.comment.content}</small>
                        <button class="btn btn-danger" style="margin-top: 4px; padding: 4px 8px; font-size: 12px;" onclick="deleteCommentByAdmin('${item.cat}', ${item.index})">åˆ é™¤</button>
                    </div>
                `).join('');
            } else {
                latestComments.innerHTML = '<p style="color: #86868b;">æš‚æ— æ–°è¯„è®º</p>';
            }
        }

        // ç®¡ç†å‘˜åˆ é™¤è¯„è®º
        function deleteCommentByAdmin(catName, commentIndex) {
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™åˆ é™¤è¯„è®º');
                return;
            }

            const cat = cats.find(c => c.name === catName);
            if (cat && cat.comments) {
                if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è¯„è®ºå—ï¼Ÿ')) {
                    cat.comments.splice(commentIndex, 1);
                    localStorage.setItem('cats', JSON.stringify(cats));
                    updateAdminStats();
                    alert('âœ… è¯„è®ºå·²åˆ é™¤');
                }
            }
        }

        // æ˜¾ç¤ºè®¢å•ç®¡ç†
        function showOrders() {
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™æŸ¥çœ‹è®¢å•ç®¡ç†');
                return;
            }
            alert('è®¢å•ç®¡ç†åŠŸèƒ½å¼€å‘ä¸­...');
        }

        // æ˜¾ç¤ºç”¨æˆ·ç®¡ç†
        function showUsers() {
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™æŸ¥çœ‹ç”¨æˆ·ç®¡ç†');
                return;
            }
            alert('ç”¨æˆ·ç®¡ç†åŠŸèƒ½å¼€å‘ä¸­...');
        }

        // æ˜¾ç¤ºç®¡ç†å‘˜ç§ä¿¡
        function showAdminMessages() {
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™æŸ¥çœ‹ç§ä¿¡ç®¡ç†');
                return;
            }
            
            if (messages.length === 0) {
                alert('æš‚æ— ç§ä¿¡');
            } else {
                const messageList = messages.map(msg => 
                    `æ¥è‡ªï¼š${msg.from}\næ—¶é—´ï¼š${msg.time}\nå†…å®¹ï¼š${msg.content}\n---`
                ).join('\n');
                alert('ç§ä¿¡åˆ—è¡¨ï¼š\n\n' + messageList);
            }
        }

        // ç®¡ç†çŒ«å’ª
        function manageCats() {
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™ç®¡ç†çŒ«å’ª');
                return;
            }
            showPage('cats');
        }

        // ç®¡ç†å¸–å­
        function managePosts() {
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™ç®¡ç†å¸–å­');
                return;
            }
            showPage('forum');
        }

        // æ›´æ–°ä¸ªäººç»Ÿè®¡
        function updateProfileStats() {
            // è®¡ç®—ç”¨æˆ·å‘å¸–æ•°
            const userPosts = posts.filter(p => p.author === 'å½“å‰ç”¨æˆ·').length;
            document.getElementById('userPostCount').textContent = userPosts;
            
            // è®¡ç®—ç”¨æˆ·è¯„è®ºæ•°
            let userComments = 0;
            cats.forEach(cat => {
                if (cat.comments) {
                    userComments += cat.comments.filter(c => c.author === 'è®¿å®¢ç”¨æˆ·').length;
                }
            });
            document.getElementById('userCommentCount').textContent = userComments;
        }

        // åˆ‡æ¢ä¸ªäººèµ„æ–™æ ‡ç­¾
        function switchProfileTab(tab) {
            // æ›´æ–°æ ‡ç­¾çŠ¶æ€
            document.querySelectorAll('.profile-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // æ›´æ–°å†…å®¹æ˜¾ç¤º
            document.querySelectorAll('[id^="profile-"]').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`profile-${tab}`).classList.add('active');
        }

        // Tabåˆ‡æ¢
        function switchTab(context, tab) {
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            const container = document.querySelector(`#${context} .tab-nav`);
            container.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // æ›´æ–°å†…å®¹æ˜¾ç¤º
            const contents = document.querySelectorAll(`[id^="${context}-"]`);
            contents.forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${context}-${tab}`).classList.add('active');
        }

        // ç™»å‡º
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                currentUser = null;
                isAdmin = false;
                localStorage.removeItem('adminCode');
                document.getElementById('adminLink').style.display = 'none';
                showPage('home');
                alert('å·²é€€å‡ºç™»å½•');
            }
        }

        // çŒ«å’ªç›¸å…³åŠŸèƒ½
        function renderCatGrid() {
            const grid = document.getElementById('catGrid');
            if (!grid) return;
            
            if (filteredCats.length === 0) {
                grid.innerHTML = '<div class="empty-state"><h3>ğŸ˜” æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„çŒ«å’ª</h3><p>å°è¯•è°ƒæ•´æœç´¢æ¡ä»¶</p></div>';
                return;
            }
            
            grid.innerHTML = filteredCats.map(cat => `
                <div class="cat-card" onclick="showCatDetail(${cat.id})">
                    <div class="cat-image-container">
                        <img src="${cat.images[0]}" alt="${cat.name}" class="cat-image">
                    </div>
                    <div class="cat-info">
                        <h3 class="cat-name">${cat.name}</h3>
                        <p class="cat-breed">${cat.breed} Â· ${cat.age}</p>
                        <div class="cat-meta">
                            <span class="cat-tag">${cat.gender}</span>
                            <span class="cat-tag">${cat.personality}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function handleSearch(event) {
            const searchTerm = event.target.value.toLowerCase();
            applyFiltersAndSearch(searchTerm);
        }

        function handleFilterChange() {
            const searchTerm = document.querySelector('.search-input').value.toLowerCase();
            applyFiltersAndSearch(searchTerm);
        }

        function handleSortChange() {
            const searchTerm = document.querySelector('.search-input').value.toLowerCase();
            applyFiltersAndSearch(searchTerm);
        }

        function applyFiltersAndSearch(searchTerm = '') {
            const filterGender = document.querySelector('.filter-select').value;
            const sortBy = document.querySelectorAll('.filter-select')[1]?.value || 'newest';
            
            filteredCats = [...cats];
            
            // æœç´¢ç­›é€‰
            if (searchTerm) {
                filteredCats = filteredCats.filter(cat => 
                    cat.name.toLowerCase().includes(searchTerm) ||
                    cat.breed.toLowerCase().includes(searchTerm) ||
                    cat.personality.toLowerCase().includes(searchTerm)
                );
            }
            
            // æ€§åˆ«ç­›é€‰
            if (filterGender !== 'all') {
                filteredCats = filteredCats.filter(cat => cat.gender === filterGender);
            }
            
            // æ’åº
            switch (sortBy) {
                case 'newest':
                    filteredCats.sort((a, b) => new Date(b.addedDate) - new Date(a.addedDate));
                    break;
                case 'oldest':
                    filteredCats.sort((a, b) => new Date(a.addedDate) - new Date(b.addedDate));
                    break;
                case 'name':
                    filteredCats.sort((a, b) => a.name.localeCompare(b.name, 'zh-CN'));
                    break;
                case 'age':
                    filteredCats.sort((a, b) => {
                        const ageA = parseInt(a.age.match(/\d+/)[0]);
                        const ageB = parseInt(b.age.match(/\d+/)[0]);
                        return ageB - ageA;
                    });
                    break;
            }
            
            renderCatGrid();
        }

        function deleteCat(catId) {
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™åˆ é™¤çŒ«å’ª');
                return;
            }
            
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™åªçŒ«å’ªå—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) {
                cats = cats.filter(cat => cat.id !== catId);
                filteredCats = filteredCats.filter(cat => cat.id !== catId);
                localStorage.setItem('cats', JSON.stringify(cats));
                renderCatGrid();
                showPage('cats');
                alert('âœ… çŒ«å’ªå·²åˆ é™¤ï¼');
            }
        }

        function showEditCatPage(catId) {
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™ç¼–è¾‘çŒ«å’ª');
                return;
            }
            
            currentCatId = catId;
            alert('ç¼–è¾‘åŠŸèƒ½å¼€å‘ä¸­...');
        }

        function showBackToCatDetail() {
            if (currentCatId) {
                showCatDetail(currentCatId);
            } else {
                showPage('cats');
            }
        }

        function handleEditCat(event) {
            event.preventDefault();
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™ç¼–è¾‘çŒ«å’ª');
                return;
            }
            alert('ç¼–è¾‘åŠŸèƒ½å¼€å‘ä¸­...');
        }

        function handleAddCat(event) {
            event.preventDefault();
            if (!isAdmin) {
                alert('æ‚¨æ²¡æœ‰æƒé™æ·»åŠ çŒ«å’ª');
                return;
            }
            alert('æ·»åŠ åŠŸèƒ½å¼€å‘ä¸­...');
        }

        // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­ç”¨æˆ·èœå•
        document.addEventListener('click', function(event) {
            const userMenu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('userDropdown');
            
            if (!userMenu.contains(event.target)) {
                dropdown.classList.remove('active');
            }
        });

        // ä¿å­˜æ•°æ®åˆ°localStorage
        window.addEventListener('beforeunload', function() {
            localStorage.setItem('cats', JSON.stringify(cats));
            localStorage.setItem('posts', JSON.stringify(posts));
            localStorage.setItem('messages', JSON.stringify(messages));
        });
    </script>
</body>
</html>