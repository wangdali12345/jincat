<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Êù≠Â∑ûËá™ÂÆ∂Â∞èÁå´Âí™-ÊùéÂÖàÁîü</title>
    
    <!-- È´òÂæ∑Âú∞ÂõæAPI -->
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=ÊÇ®ÁöÑÈ´òÂæ∑Âú∞ÂõæKEY&plugin=AMap.Geolocation,AMap.PlaceSearch,AMap.Geocoder"></script>
    
    <!-- ËÖæËÆØÂú∞ÂõæAPIÔºàÂ§áÁî®Ôºâ -->
    <script charset="utf-8" src="https://map.qq.com/api/gljs?v=1.exp&key=ÊÇ®ÁöÑËÖæËÆØÂú∞ÂõæKEY"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #FFF8E1 0%, #FFE0B2 100%);
            color: #1d1d1f;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ÂØºËà™Ê†è */
        nav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
        }

        .nav-menu {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: #1d1d1f;
            font-weight: 500;
            transition: color 0.3s ease;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
        }

        .nav-link:hover {
            color: #0071e3;
            background: rgba(0, 113, 227, 0.1);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
        }

        .mobile-menu-btn:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Ëã±ÈõÑÂå∫Âüü */
        .hero {
            text-align: center;
            padding: 100px 0;
            background: linear-gradient(135deg, #fbfbfd 0%, #f5f5f7 100%);
        }

        .hero h1 {
            font-size: 56px;
            font-weight: 700;
            margin-bottom: 24px;
            background: linear-gradient(135deg, #1d1d1f 0%, #86868b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 21px;
            color: #86868b;
            max-width: 600px;
            margin: 0 auto 40px;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            border-radius: 980px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 17px;
        }

        .btn-primary {
            background: #0071e3;
            color: white;
        }

        .btn-primary:hover {
            background: #0077ed;
            transform: scale(1.05);
        }

        /* ÁªüËÆ°Âå∫Âüü */
        .stats {
            padding: 80px 0;
            background: white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            text-align: center;
        }

        .stat-item h3 {
            font-size: 48px;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 8px;
        }

        .stat-item p {
            font-size: 17px;
            color: #86868b;
        }

        /* ÊêúÁ¥¢Âå∫Âüü */
        .search-section {
            padding: 80px 0;
        }

        .search-card {
            background: white;
            border-radius: 18px;
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 0 auto;
        }

        .search-input {
            width: 100%;
            padding: 16px 20px;
            border: 1px solid #d2d2d7;
            border-radius: 12px;
            font-size: 17px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #0071e3;
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
        }

        .filter-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .filter-select {
            padding: 12px 16px;
            border: 1px solid #d2d2d7;
            border-radius: 12px;
            font-size: 17px;
            background: white;
        }

        /* Áå´Âí™ÁΩëÊ†º */
        .cats-section {
            padding: 80px 0;
            background: white;
        }

        .section-title {
            text-align: center;
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 16px;
            color: #1d1d1f;
        }

        .section-subtitle {
            text-align: center;
            font-size: 21px;
            color: #86868b;
            margin-bottom: 60px;
        }

        .cats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 32px;
        }

        .cat-card {
            background: white;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
        }

        .cat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .cat-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            object-position: center;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            border-radius: 18px 18px 0 0;
        }

        .cat-info {
            padding: 24px;
        }

        .cat-name {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1d1d1f;
        }

        .cat-details {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-bottom: 16px;
        }

        .cat-detail {
            font-size: 15px;
            color: #86868b;
        }

        .cat-personality {
            font-size: 15px;
            color: #86868b;
            line-height: 1.5;
        }

        /* Ê®°ÊÄÅÊ°Ü */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 18px;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            width: 90%;
        }

        .modal-header {
            position: relative;
            height: 400px;
            overflow: hidden;
        }

        .modal-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 40px;
        }

        .modal-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #1d1d1f;
        }

        .modal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .modal-item {
            text-align: center;
            padding: 20px;
            background: #f5f5f7;
            border-radius: 12px;
        }

        .modal-item-label {
            font-size: 14px;
            color: #86868b;
            margin-bottom: 4px;
        }

        .modal-item-value {
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .modal-description {
            font-size: 17px;
            line-height: 1.6;
            color: #1d1d1f;
            margin-top: 30px;
        }

        .modal-actions {
            display: flex;
            gap: 16px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .like-btn {
            background: #ff3b30;
            color: white;
        }

        .like-btn.liked {
            background: #86868b;
        }

        .order-btn {
            background: #34c759;
            color: white;
        }

        .message-btn {
            background: #0071e3;
            color: white;
        }

        /* ËÆ¢ÂçïÊ®°ÊÄÅÊ°Ü */
        .order-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            backdrop-filter: blur(10px);
        }

        .order-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 18px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .order-header {
            padding: 30px 30px 20px;
            border-bottom: 1px solid #f0f0f0;
        }

        .order-body {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1d1d1f;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #d2d2d7;
            border-radius: 12px;
            font-size: 17px;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #0071e3;
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
        }

        .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #d2d2d7;
            border-radius: 12px;
            font-size: 17px;
            min-height: 100px;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #0071e3;
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
        }

        .order-summary {
            background: #f5f5f7;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .summary-total {
            display: flex;
            justify-content: space-between;
            font-size: 18px;
            font-weight: 600;
            border-top: 1px solid #d2d2d7;
            padding-top: 10px;
            margin-top: 10px;
        }

        /* ÁßÅ‰ø°Ê®°ÊÄÅÊ°Ü */
        .message-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            backdrop-filter: blur(10px);
        }

        .message-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 18px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        /* Áâ©ÊµÅËøΩË∏™ */
        .logistics-section {
            background: white;
            border-radius: 18px;
            padding: 30px;
            margin: 20px 0;
            display: none;
        }

        .logistics-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #1d1d1f;
        }

        .logistics-timeline {
            position: relative;
            padding-left: 30px;
        }

        .logistics-item {
            position: relative;
            padding-bottom: 20px;
            padding-left: 20px;
        }

        .logistics-item:before {
            content: '';
            position: absolute;
            left: -8px;
            top: 6px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #0071e3;
        }

        .logistics-item:after {
            content: '';
            position: absolute;
            left: -2px;
            top: 18px;
            width: 2px;
            height: calc(100% - 18px);
            background: #d2d2d7;
        }

        .logistics-item:last-child:after {
            display: none;
        }

        .logistics-time {
            font-size: 14px;
            color: #86868b;
            margin-bottom: 4px;
        }

        .logistics-text {
            font-size: 16px;
            color: #1d1d1f;
        }

        .logistics-item.completed:before {
            background: #34c759;
        }

        .logistics-item.current:before {
            background: #0071e3;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(0, 113, 227, 0.7);
            }
            50% {
                box-shadow: 0 0 0 8px rgba(0, 113, 227, 0);
            }
        }

        /* Áî®Êà∑‰∏≠ÂøÉ */
        .user-section {
            position: relative;
        }

        .user-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background 0.3s ease;
        }

        .user-btn:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            min-width: 200px;
            display: none;
            z-index: 1000;
        }

        .user-dropdown.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background 0.3s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: #f5f5f7;
        }

        .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: #ff3b30;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        /* ÂïÜÂüéÊ†∑Âºè */
        .shop-section {
            padding: 80px 0;
            background: white;
        }

        .shop-categories {
            display: flex;
            gap: 16px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .category-btn {
            padding: 12px 24px;
            border: 1px solid #d2d2d7;
            border-radius: 25px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            font-weight: 500;
        }

        .category-btn.active,
        .category-btn:hover {
            background: #0071e3;
            color: white;
            border-color: #0071e3;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .product-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
        }

        .product-info {
            padding: 20px;
        }

        .product-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1d1d1f;
        }

        .product-price {
            font-size: 20px;
            font-weight: 700;
            color: #0071e3;
            margin-bottom: 12px;
        }

        .product-desc {
            font-size: 14px;
            color: #86868b;
            line-height: 1.4;
        }

        .add-to-cart {
            width: 100%;
            padding: 12px;
            background: #34c759;
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-top: 12px;
        }

        .add-to-cart:hover {
            background: #30d158;
        }

        /* ÂÆ†Áâ©ÂåªÈô¢Ê†∑Âºè */
        .hospital-section {
            padding: 80px 0;
            background: #f5f5f7;
        }

        .hospital-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }

        .hospital-card {
            background: white;
            border-radius: 18px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .hospital-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .hospital-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .hospital-name {
            font-size: 20px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .hospital-rating {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #ff9500;
            font-weight: 600;
        }

        .hospital-address {
            color: #86868b;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .hospital-phone {
            color: #0071e3;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .hospital-services {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .service-tag {
            background: #f0f0f0;
            color: #1d1d1f;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 500;
        }

        .hospital-actions {
            display: flex;
            gap: 12px;
        }

        .hospital-btn {
            flex: 1;
            padding: 10px 16px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .book-btn {
            background: #0071e3;
            color: white;
        }

        .book-btn:hover {
            background: #0077ed;
        }

        .review-btn {
            background: #f5f5f7;
            color: #1d1d1f;
        }

        .review-btn:hover {
            background: #e8e8ed;
        }

        /* ËÆ∫ÂùõÊ†∑Âºè - Ë¥¥ÂêßÈ£éÊ†º */
        .forum-section {
            padding: 0;
            background: #f5f5f7;
            min-height: 100vh;
        }

        .forum-header {
            background: white;
            padding: 20px 0;
            border-bottom: 2px solid #e5e5e7;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .forum-title {
            font-size: 28px;
            font-weight: 700;
            color: #1d1d1f;
            text-align: center;
        }

        .forum-toolbar {
            background: white;
            padding: 15px 0;
            border-bottom: 1px solid #e5e5e7;
        }

        .toolbar-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .forum-tabs {
            display: flex;
            gap: 5px;
        }

        .forum-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            font-size: 14px;
            font-weight: 500;
            color: #86868b;
            cursor: pointer;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .forum-tab.active {
            background: #0071e3;
            color: white;
        }

        .forum-tab:hover {
            background: #e8e8ed;
        }

        .post-new-btn {
            background: #0071e3;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .post-new-btn:hover {
            background: #0077ed;
        }

        .forum-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px 20px 40px;
        }

        .forum-post {
            background: white;
            border: 1px solid #e5e5e7;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .forum-post:hover {
            border-color: #0071e3;
            box-shadow: 0 4px 15px rgba(0, 113, 227, 0.1);
        }

        .post-main {
            display: flex;
            gap: 15px;
        }

        .author-section {
            text-align: center;
            min-width: 80px;
        }

        .author-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #0071e3, #5856d6);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 8px;
        }

        .author-name {
            font-size: 14px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 4px;
        }

        .author-level {
            font-size: 12px;
            color: #86868b;
            padding: 2px 8px;
            background: #f5f5f7;
            border-radius: 10px;
            display: inline-block;
        }

        .post-content-main {
            flex: 1;
        }

        .post-title {
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 12px;
            cursor: pointer;
            line-height: 1.4;
        }

        .post-title:hover {
            color: #0071e3;
        }

        .post-content {
            color: #1d1d1f;
            line-height: 1.6;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .post-meta {
            display: flex;
            gap: 20px;
            align-items: center;
            font-size: 13px;
            color: #86868b;
            margin-bottom: 15px;
        }

        .post-type {
            background: #e3f2fd;
            color: #1976d2;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .post-actions {
            display: flex;
            gap: 25px;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid #f0f0f0;
        }

        .post-action {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #86868b;
            cursor: pointer;
            transition: color 0.3s ease;
            font-size: 13px;
        }

        .post-action:hover {
            color: #0071e3;
        }

        .post-action.liked {
            color: #ff3b30;
        }

        .post-comment-preview {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-top: 10px;
        }

        .comment-item {
            font-size: 13px;
            color: #1d1d1f;
            margin-bottom: 5px;
        }

        .comment-author {
            color: #0071e3;
            font-weight: 600;
        }

        .hot-tag {
            background: #ff3b30;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
            margin-left: 8px;
            font-weight: 600;
        }

        .new-tag {
            background: #34c759;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
            margin-left: 8px;
            font-weight: 600;
        }

        .new-post-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #0071e3;
            color: white;
            border: none;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 113, 227, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .new-post-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(0, 113, 227, 0.4);
        }

        .forum-stats {
            background: white;
            border: 1px solid #e5e5e7;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            text-align: center;
        }

        .stat-item {
            flex: 1;
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 13px;
            color: #86868b;
        }

        /* ‰∏™‰∫∫Â∏ñÂ≠êÁÆ°ÁêÜÊ†∑Âºè */
        .my-posts-tabs {
            display: flex;
            border-bottom: 1px solid #e5e5e7;
            margin-bottom: 20px;
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 12px 24px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #86868b;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            color: #0071e3;
            border-bottom-color: #0071e3;
        }

        .my-posts-content {
            padding: 20px 0;
        }

        .my-post-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .my-post-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .my-post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .my-post-title {
            font-size: 16px;
            font-weight: 600;
            color: #1d1d1f;
            cursor: pointer;
            flex: 1;
        }

        .my-post-actions {
            display: flex;
            gap: 10px;
        }

        .my-post-btn {
            background: #0071e3;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .my-post-btn.delete {
            background: #ff3b30;
        }

        .my-post-btn:hover {
            opacity: 0.8;
        }

        .my-post-meta {
            font-size: 13px;
            color: #86868b;
            margin-bottom: 10px;
        }

        .my-post-stats {
            display: flex;
            gap: 20px;
            font-size: 13px;
            color: #86868b;
        }

        /* Â∏ñÂ≠êËØ¶ÊÉÖÊ†∑Âºè */
        .post-detail-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e5e5e7;
        }

        .post-detail-author {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .post-detail-content {
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .post-detail-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .post-detail-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .post-detail-image:hover {
            transform: scale(1.05);
        }

        .post-detail-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .post-detail-comments {
            margin-top: 30px;
        }

        .comment-form {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .comment-input {
            width: 100%;
            height: 100px;
            padding: 12px;
            border: 1px solid #e5e5e7;
            border-radius: 8px;
            resize: vertical;
            margin-bottom: 10px;
        }

        .comment-item {
            background: white;
            border: 1px solid #e5e5e7;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .comment-author {
            font-weight: 600;
            color: #0071e3;
            margin-bottom: 5px;
        }

        .comment-time {
            font-size: 12px;
            color: #86868b;
            margin-bottom: 8px;
        }

        .comment-content {
            line-height: 1.6;
        }

        /* Áå´Âí™ËØÑËÆ∫Ê†∑Âºè */
        .cat-info {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
        }

        .cat-info-img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 50%;
            margin-bottom: 10px;
        }

        .comments-list {
            margin-bottom: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .empty-comments {
            text-align: center;
            color: #86868b;
            padding: 40px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #0071e3, #5856d6);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
            margin-right: 10px;
        }

        /* Âú∞ÂõæÊ†∑Âºè */
        .map-section {
            padding: 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .map-container {
            width: 100%;
            height: 300px;
            border-radius: 12px;
            overflow: hidden;
            background: #e9ecef;
            position: relative;
        }

        .map-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .map-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #86868b;
        }

        .real-time-tracking {
            background: linear-gradient(135deg, #0071e3, #5856d6);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .tracking-header {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .tracking-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .tracking-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .tracking-label {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .tracking-value {
            font-size: 16px;
            font-weight: 600;
        }

        .location-badge {
            background: #34c759;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-left: 10px;
        }

        .delivery-estimation {
            background: #ff9500;
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            text-align: center;
            font-weight: 600;
        }

        .route-map {
            background: white;
            border: 1px solid #e5e5e7;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .route-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #1d1d1f;
        }

        .route-steps {
            position: relative;
            padding-left: 30px;
        }

        .route-step {
            position: relative;
            padding-bottom: 20px;
            padding-left: 20px;
        }

        .route-step:before {
            content: '';
            position: absolute;
            left: -8px;
            top: 6px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #0071e3;
            border: 2px solid white;
            box-shadow: 0 2px 8px rgba(0, 113, 227, 0.3);
        }

        .route-step:after {
            content: '';
            position: absolute;
            left: -2px;
            top: 18px;
            width: 2px;
            height: calc(100% - 18px);
            background: #d2d2d7;
        }

        .route-step:last-child:after {
            display: none;
        }

        .route-location {
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 4px;
        }

        .route-time {
            font-size: 13px;
            color: #86868b;
        }

        /* ÂèëÂ∏ñÊ®°ÊÄÅÊ°Ü - Â∞èÁ∫¢‰π¶È£éÊ†º */
        .post-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 3000;
            backdrop-filter: blur(10px);
        }

        .post-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .post-header {
            padding: 25px 25px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .post-title-text {
            font-size: 20px;
            font-weight: 700;
            color: #1d1d1f;
        }

        .post-body {
            padding: 25px;
        }

        .post-type-selector {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .post-type-btn {
            padding: 12px 20px;
            border: 2px solid #f0f0f0;
            background: white;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .post-type-btn.active {
            background: #0071e3;
            border-color: #0071e3;
            color: white;
        }

        .post-form-group {
            margin-bottom: 25px;
        }

        .post-input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
        }

        .post-input:focus {
            outline: none;
            border-color: #0071e3;
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
        }

        .post-textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            font-size: 16px;
            min-height: 200px;
            resize: vertical;
            transition: all 0.3s ease;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            line-height: 1.6;
        }

        .post-textarea:focus {
            outline: none;
            border-color: #0071e3;
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
        }

        .post-image-upload {
            border: 2px dashed #d2d2d7;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        .post-image-upload:hover {
            border-color: #0071e3;
            background: #f8faff;
        }

        .post-image-upload-icon {
            font-size: 40px;
            margin-bottom: 10px;
            color: #86868b;
        }

        .post-image-upload-text {
            color: #86868b;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .post-image-upload-hint {
            color: #d2d2d7;
            font-size: 12px;
        }

        .post-actions-footer {
            display: flex;
            gap: 15px;
            padding: 20px 25px;
            border-top: 1px solid #f0f0f0;
            background: #fafafa;
        }

        .post-btn {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 15px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .post-cancel {
            background: #f0f0f0;
            color: #86868b;
        }

        .post-cancel:hover {
            background: #e8e8ed;
        }

        .post-submit {
            background: linear-gradient(135deg, #0071e3, #5856d6);
            color: white;
        }

        .post-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 113, 227, 0.3);
        }

        .post-submit:disabled {
            background: #d2d2d7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* ÊâãÊú∫Á´Ø‰ºòÂåñ */
        @media (max-width: 768px) {
            .post-content {
                width: 95%;
                max-height: 95vh;
                border-radius: 20px 20px 0 0;
                top: auto;
                bottom: 0;
                left: 0;
                right: 0;
                transform: none;
            }

            .post-header {
                border-radius: 20px 20px 0 0;
                padding: 20px 20px 15px;
            }

            .post-title-text {
                font-size: 18px;
            }

            .post-body {
                padding: 20px;
            }

            .post-type-selector {
                gap: 10px;
            }

            .post-type-btn {
                padding: 10px 16px;
                font-size: 13px;
            }

            .post-input,
            .post-textarea {
                font-size: 16px; /* Èò≤Ê≠¢iOSÁº©Êîæ */
            }

            .post-textarea {
                min-height: 150px;
            }

            .post-actions-footer {
                padding: 15px 20px;
            }

            .forum-toolbar {
                padding: 10px 0;
            }

            .toolbar-content {
                flex-direction: column;
                gap: 15px;
            }

            .forum-tabs {
                overflow-x: auto;
                justify-content: flex-start;
                padding-bottom: 5px;
            }

            .forum-tab {
                flex-shrink: 0;
            }

            .post-new-btn {
                align-self: stretch;
            }

            .forum-content {
                padding: 15px 15px 30px;
            }
        }

        /* Âú∞ÂõæÊ†∑Âºè */
        .map-section {
            padding: 20px;
            background: white;
            border-radius: 12px;
            margin-bottom: 20px;
            display: none;
        }

        .map-container {
            width: 100%;
            height: 300px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .map-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .map-btn {
            padding: 8px 16px;
            border: 1px solid #d2d2d7;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .map-btn:hover {
            background: #f5f5f7;
            border-color: #0071e3;
        }

        .location-info {
            padding: 10px;
            background: #f5f5f7;
            border-radius: 8px;
            font-size: 14px;
            color: #1d1d1f;
            margin-top: 10px;
        }

        /* ÂÆûÊó∂Áâ©ÊµÅËøΩË∏™ */
        .real-time-logistics {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .logistics-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .refresh-btn {
            padding: 8px 16px;
            background: #0071e3;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s ease;
        }

        .refresh-btn:hover {
            background: #0077ed;
        }

        .logistics-map {
            width: 100%;
            height: 250px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .nav-menu {
                flex-direction: column;
                gap: 10px;
                position: absolute;
                top: 60px;
                right: 20px;
                background: white;
                padding: 15px;
                border-radius: 12px;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
                display: none;
            }
            
            .nav-menu.show {
                display: flex;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .shop-categories {
                padding: 0 20px;
            }
            
            .products-grid,
            .hospital-grid {
                grid-template-columns: 1fr;
            }
            
            .forum-tabs {
                overflow-x: auto;
                white-space: nowrap;
            }
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 36px;
            }
            
            .hero p {
                font-size: 17px;
            }
            
            .section-title {
                font-size: 32px;
            }
            
            .filter-row {
                grid-template-columns: 1fr;
            }
            
            .modal-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .modal-content {
                width: 95%;
                margin: 20px;
            }
        }

        /* Âä†ËΩΩÂä®Áîª */
        .fade-in {
            opacity: 0;
            animation: fadeIn 0.6s ease forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #86868b;
        }

        .no-results-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- ÂØºËà™Ê†è -->
    <nav>
        <div class="container">
        <div class="nav-content">
            <a href="#" class="logo">
                <span>üê±</span>
                <span>Êù≠Â∑ûËá™ÂÆ∂Â∞èÁå´Âí™-ÊùéÂÖàÁîü</span>
            </a>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
            <div class="nav-menu" id="navMenu">
                <a href="#" class="nav-link" onclick="showHome()">üè† Á≤æÈÄâÁå´Âí™</a>
                <a href="#" class="nav-link" onclick="showShop()">üõí ÂÆ†Áâ©ÂïÜÂüé</a>
                <a href="#" class="nav-link" onclick="showHospitals()">üè• ÂÆ†Áâ©ÂåªÈô¢</a>
                <a href="#" class="nav-link" onclick="showForum()">üí¨ Êú¨Âú∞ËÆ∫Âùõ</a>
                <a href="#" class="nav-link" onclick="showMyPosts()">üìù ÊàëÁöÑÂ∏ñÂ≠ê</a>
            </div>
            <div class="user-section">
                <button class="user-btn" onclick="toggleUserDropdown()">
                    <span>üë§</span>
                    <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                </button>
                <div class="user-dropdown" id="userDropdown">
                    <div class="dropdown-item" onclick="showOrders()">üì¶ ÊàëÁöÑËÆ¢Âçï</div>
                    <div class="dropdown-item" onclick="showShopOrders()">üõí ÂïÜÂüéËÆ¢Âçï</div>
                    <div class="dropdown-item" onclick="showHospitalAppointments()">üè• ÂåªÈô¢È¢ÑÁ∫¶</div>
                    <div class="dropdown-item" onclick="showMessages()">üí¨ ÁßÅ‰ø°Ê∂àÊÅØ</div>
                    <div class="dropdown-item" onclick="showLogistics()">üöö Áâ©ÊµÅËøΩË∏™</div>
                    <div class="dropdown-item" onclick="showFavorites()">‚ù§Ô∏è ÊàëÁöÑÊî∂Ëóè</div>
                </div>
            </div>
        </div>
        </div>
    </nav>

    <!-- Ëã±ÈõÑÂå∫Âüü -->
    <section class="hero">
        <div class="container">
            <h1>Êù≠Â∑ûËá™ÂÆ∂Â∞èÁå´Âí™</h1>
            <p>Á≤æÂøÉÂüπËÇ≤ÁöÑÈáëÊ∏êÂ±ÇÁå´Âí™ÔºåÊØè‰∏ÄÂè™ÈÉΩÊòØÁã¨‰∏ÄÊó†‰∫åÁöÑÁèçË¥µÂÆùË¥ù„ÄÇÊùéÂÖàÁîüÁöÑÁå´Âí™Â∫ÑÂõ≠Ôºå‰∏∫ÊÇ®ÂëàÁé∞ÊúÄ‰ºòÈõÖÁöÑÈáëÊ∏êÂ±ÇÂÆ∂Êóè„ÄÇ</p>
            <a href="#cats" class="btn btn-primary">ÊµèËßàÁå´Âí™</a>
        </div>
    </section>

    <!-- ÁªüËÆ°Âå∫Âüü -->
    <section class="stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item">
                    <h3 id="totalCats">6</h3>
                    <p>Âè™ÁèçË¥µÁå´Âí™</p>
                </div>
                <div class="stat-item">
                    <h3>100%</h3>
                    <p>Á∫ØÁßçÈáëÊ∏êÂ±Ç</p>
                </div>
                <div class="stat-item">
                    <h3>24/7</h3>
                    <p>Á≤æÂøÉÁÖßÊñô</p>
                </div>
            </div>
        </div>
    </section>

    <!-- ÊêúÁ¥¢Âå∫Âüü -->
    <section class="search-section">
        <div class="container">
            <div class="search-card">
                <h2 style="text-align: center; margin-bottom: 30px; font-size: 24px;">ÂØªÊâæÊÇ®ÂøÉ‰ª™ÁöÑÁå´Âí™</h2>
                <input type="text" class="search-input" id="searchInput" placeholder="ÊêúÁ¥¢Áå´Âí™ÂêçÂ≠ó„ÄÅÂìÅÁßçÊàñÊÄßÊ†º...">
                <div class="filter-row">
                    <select class="filter-select" id="genderFilter">
                        <option value="all">ÊâÄÊúâÊÄßÂà´</option>
                        <option value="ÂÖ¨Áå´">ÂÖ¨Áå´</option>
                        <option value="ÊØçÁå´">ÊØçÁå´</option>
                    </select>
                    <select class="filter-select" id="sortBy">
                        <option value="newest">ÊúÄÊñ∞Ê∑ªÂä†</option>
                        <option value="oldest">ÊúÄÊó©Ê∑ªÂä†</option>
                        <option value="name">ÊåâÂêçÂ≠óÊéíÂ∫è</option>
                        <option value="age">ÊåâÂπ¥ÈæÑÊéíÂ∫è</option>
                    </select>
                </div>
            </div>
        </div>
    </section>

    <!-- Áå´Âí™Â±ïÁ§∫Âå∫Âüü -->
    <section id="catsSection" class="cats-section">
        <div class="container">
            <h2 class="section-title">Á≤æÈÄâÁå´Âí™</h2>
            <p class="section-subtitle" id="catsCount">ÂÖ± 6 Âè™Áå´Âí™</p>
            <div class="cats-grid" id="catsGrid">
                <!-- Áå´Âí™Âç°ÁâáÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
    </section>

    <!-- ÂÆ†Áâ©ÂïÜÂüéÂå∫Âüü -->
    <section id="shopSection" class="shop-section">
        <div class="container">
            <h2 class="section-title">üõí ÂÆ†Áâ©Áî®ÂìÅÂïÜÂüé</h2>
            <p class="section-subtitle">Á≤æÈÄâ‰ºòË¥®ÂÆ†Áâ©Áî®ÂìÅÔºåËÆ©ÊÇ®ÁöÑÁà±Áå´ÁîüÊ¥ªÊõ¥ÁæéÂ•Ω</p>
            
            <div class="shop-categories">
                <button class="category-btn active" onclick="filterProducts('all')">ÂÖ®ÈÉ®ÂïÜÂìÅ</button>
                <button class="category-btn" onclick="filterProducts('food')">Áå´Á≤ÆÈõ∂È£ü</button>
                <button class="category-btn" onclick="filterProducts('toy')">Áé©ÂÖ∑Áî®ÂìÅ</button>
                <button class="category-btn" onclick="filterProducts('health')">ÂåªÁñó‰øùÂÅ•</button>
                <button class="category-btn" onclick="filterProducts('living')">ÁîüÊ¥ªÁî®ÂìÅ</button>
            </div>
            
            <div class="products-grid" id="productsGrid">
                <!-- ÂïÜÂìÅÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
    </section>

    <!-- ÂÆ†Áâ©ÂåªÈô¢Âå∫Âüü -->
    <section id="hospitalSection" class="hospital-section">
        <div class="container">
            <h2 class="section-title">üè• ÈôÑËøëÂÆ†Áâ©ÂåªÈô¢</h2>
            <p class="section-subtitle">‰∏ì‰∏öÂÆ†Áâ©ÂåªÁñóÊúçÂä°Ôºå‰∏∫Áà±ÂÆ†ÂÅ•Â∫∑‰øùÈ©æÊä§Ëà™</p>
            
            <div class="hospital-grid" id="hospitalGrid">
                <!-- ÂåªÈô¢‰ø°ÊÅØÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
    </section>

    <!-- Êú¨Âú∞ËÆ∫ÂùõÂå∫Âüü -->
    <section id="forumSection" class="forum-section">
        <div class="forum-header">
            <div class="container">
                <h1 class="forum-title">üê± Êù≠Â∑ûÂÆ†Áâ©ËÆ∫Âùõ</h1>
            </div>
        </div>
        
        <div class="forum-toolbar">
            <div class="container">
                <div class="toolbar-content">
                    <div class="forum-tabs">
                        <button class="forum-tab active" onclick="switchForumTab('all')">ÂÖ®ÈÉ®</button>
                        <button class="forum-tab" onclick="switchForumTab('dating')">ÂÆ†Áâ©Áõ∏‰∫≤</button>
                        <button class="forum-tab" onclick="switchForumTab('experience')">ÂÖªÂÆ†ÁªèÈ™å</button>
                        <button class="forum-tab" onclick="switchForumTab('help')">Ê±ÇÂä©ÈóÆÁ≠î</button>
                        <button class="forum-tab" onclick="switchForumTab('hot')">ÁÉ≠Èó®</button>
                    </div>
                    <button class="post-new-btn" onclick="showNewPostModal()">ÂèëÂ∏ñ</button>
                </div>
            </div>
        </div>
        
        <div class="forum-content" id="forumContent">
            <!-- ËÆ∫ÂùõÁªüËÆ°ÂíåÂ∏ñÂ≠êÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
        </div>
    </section>

    <!-- ÂèëÂ∏ÉÂ∏ñÂ≠êÊåâÈíÆ -->
    <button class="new-post-btn" onclick="showNewPostModal()">‚úèÔ∏è</button>

    <!-- ÂèëÂ∏ñÊ®°ÊÄÅÊ°Ü - Â∞èÁ∫¢‰π¶È£éÊ†º -->
    <div class="post-modal" id="postModal">
        <div class="post-content">
            <div class="post-header">
                <h2 class="post-title-text">‚ú® ÂèëÂ∏ÉÊñ∞Â∏ñÂ≠ê</h2>
                <button class="modal-close" onclick="closePostModal()" style="font-size: 24px; background: none; border: none; cursor: pointer;">√ó</button>
            </div>
            <div class="post-body">
                <div class="post-type-selector">
                    <button class="post-type-btn active" data-type="experience" onclick="selectPostType(this)">ÂÖªÂÆ†ÁªèÈ™å</button>
                    <button class="post-type-btn" data-type="dating" onclick="selectPostType(this)">ÂÆ†Áâ©Áõ∏‰∫≤</button>
                    <button class="post-type-btn" data-type="help" onclick="selectPostType(this)">Ê±ÇÂä©ÈóÆÁ≠î</button>
                    <button class="post-type-btn" data-type="share" onclick="selectPostType(this)">Êó•Â∏∏ÂàÜ‰∫´</button>
                </div>

                <div class="post-form-group">
                    <input type="text" class="post-input" id="postTitle" placeholder="‚úçÔ∏è ËæìÂÖ•‰∏Ä‰∏™Âê∏Âºï‰∫∫ÁöÑÊ†áÈ¢ò..." maxlength="50">
                    <div style="text-align: right; font-size: 12px; color: #86868b; margin-top: 5px;">
                        <span id="titleCount">0</span>/50
                    </div>
                </div>

                <div class="post-form-group">
                    <textarea class="post-textarea" id="postContent" placeholder="üíù ÂàÜ‰∫´‰Ω†ÁöÑÁ≤æÂΩ©ÂÜÖÂÆπ...&#10;&#10;üìù Â∞èË¥¥Â£´Ôºö&#10;‚Ä¢ ÂÖªÂÆ†ÁªèÈ™åÔºöÂàÜ‰∫´Êä§ÁêÜÂøÉÂæó„ÄÅÈ•≤ÂÖªÊäÄÂ∑ß&#10;‚Ä¢ ÂÆ†Áâ©Áõ∏‰∫≤ÔºöËØ¶ÁªÜ‰ªãÁªçÂπ¥ÈæÑ„ÄÅÂìÅÁßç„ÄÅÊÄßÊ†º„ÄÅË¶ÅÊ±Ç&#10;‚Ä¢ Ê±ÇÂä©ÈóÆÁ≠îÔºöÊèèËø∞ÈóÆÈ¢ò„ÄÅÂ∑≤ÊúâÊé™ÊñΩ„ÄÅÈúÄË¶ÅÂ∏ÆÂä©&#10;‚Ä¢ Êó•Â∏∏ÂàÜ‰∫´ÔºöËÆ∞ÂΩïÊúâË∂£Áû¨Èó¥„ÄÅÂèØÁà±ÁÖßÁâá" maxlength="1000"></textarea>
                    <div style="text-align: right; font-size: 12px; color: #86868b; margin-top: 5px;">
                        <span id="contentCount">0</span>/1000
                    </div>
                </div>

                <div class="post-form-group">
                    <div class="post-image-upload" onclick="selectPostImages()">
                        <div class="post-image-upload-icon">üì∑</div>
                        <div class="post-image-upload-text">ÁÇπÂáª‰∏ä‰º†ÂõæÁâá</div>
                        <div class="post-image-upload-hint">ÊîØÊåÅJPG„ÄÅPNGÊ†ºÂºèÔºåÊúÄÂ§ö9Âº†</div>
                    </div>
                    <div id="imagePreview" style="display: none; margin-top: 15px;"></div>
                </div>
            </div>
            <div class="post-actions-footer">
                <button class="post-btn post-cancel" onclick="closePostModal()">ÂèñÊ∂à</button>
                <button class="post-btn post-submit" id="submitPostBtn" onclick="submitNewPost()">Á´ãÂç≥ÂèëÂ∏É</button>
            </div>
        </div>
    </div>

    <!-- Áå´Âí™ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü -->
    <div class="modal" id="catModal">
        <div class="modal-content">
            <div class="modal-header">
                <img class="modal-image" id="modalImage" src="" alt="">
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <h2 class="modal-title" id="modalTitle"></h2>
                <div class="modal-grid">
                    <div class="modal-item">
                        <div class="modal-item-label">Âπ¥ÈæÑ</div>
                        <div class="modal-item-value" id="modalAge"></div>
                    </div>
                    <div class="modal-item">
                        <div class="modal-item-label">ÊÄßÂà´</div>
                        <div class="modal-item-value" id="modalGender"></div>
                    </div>
                    <div class="modal-item">
                        <div class="modal-item-label">‰ΩìÈáç</div>
                        <div class="modal-item-value" id="modalWeight"></div>
                    </div>
                    <div class="modal-item">
                        <div class="modal-item-label">ÂìÅÁßç</div>
                        <div class="modal-item-value" id="modalBreed"></div>
                    </div>
                </div>
                <div class="modal-description" id="modalDescription"></div>
                <div class="modal-actions">
                    <button class="btn like-btn" id="likeBtn" onclick="toggleLike()">‚ù§Ô∏è ÂñúÊ¨¢</button>
                    <button class="btn order-btn" onclick="openOrderModal()">üõí Á´ãÂç≥Ë¥≠‰π∞</button>
                    <button class="btn comment-btn" onclick="openCatCommentModal()">üí¨ ËØÑËÆ∫ÁïôË®Ä</button>
                    <button class="btn message-btn" onclick="sendCatPrivateMessage()">üì® ÁßÅ‰ø°ÁÆ°ÁêÜÂëò</button>
                    <button class="btn btn-primary" onclick="shareCat()">üîó ÂàÜ‰∫´</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ËÆ¢ÂçïÊ®°ÊÄÅÊ°Ü -->
    <div class="order-modal" id="orderModal">
        <div class="order-content">
            <div class="order-header">
                <h2>Á°ÆËÆ§ËÆ¢Âçï</h2>
                <button class="modal-close" onclick="closeOrderModal()">√ó</button>
            </div>
            <div class="order-body">
                <div class="form-group">
                    <label class="form-label">Êî∂Ë¥ß‰∫∫ÂßìÂêç</label>
                    <input type="text" class="form-input" id="customerName" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÂßìÂêç">
                </div>
                <div class="form-group">
                    <label class="form-label">ËÅîÁ≥ªÁîµËØù</label>
                    <input type="tel" class="form-input" id="customerPhone" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÊâãÊú∫Âè∑">
                </div>
                <div class="form-group">
                    <label class="form-label">Êî∂Ë¥ßÂú∞ÂùÄ</label>
                    <textarea class="form-textarea" id="customerAddress" placeholder="ËØ∑ËæìÂÖ•ËØ¶ÁªÜÊî∂Ë¥ßÂú∞ÂùÄ"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Â§áÊ≥®‰ø°ÊÅØ</label>
                    <textarea class="form-textarea" id="orderNote" placeholder="Êúâ‰ªÄ‰πàÁâπÊÆäË¶ÅÊ±ÇÂèØ‰ª•Âú®ËøôÈáåËØ¥Êòé"></textarea>
                </div>
                <div class="order-summary">
                    <div class="summary-item">
                        <span>Áå´Âí™ÂêçÁß∞Ôºö</span>
                        <span id="orderCatName">-</span>
                    </div>
                    <div class="summary-item">
                        <span>ÂìÅÁßçÔºö</span>
                        <span id="orderCatBreed">-</span>
                    </div>
                    <div class="summary-item">
                        <span>ËøêË¥πÔºö</span>
                        <span>¬•200</span>
                    </div>
                    <div class="summary-total">
                        <span>ÊÄªËÆ°Ôºö</span>
                        <span>¬•12,800</span>
                    </div>
                </div>
                <button class="btn btn-primary" style="width: 100%;" onclick="submitOrder()">Á°ÆËÆ§‰∏ãÂçï</button>
            </div>
        </div>
    </div>

    <!-- ÁßÅ‰ø°Ê®°ÊÄÅÊ°Ü -->
    <div class="message-modal" id="messageModal">
        <div class="message-content">
            <div class="order-header">
                <h2>ÁßÅ‰ø°Âí®ËØ¢</h2>
                <button class="modal-close" onclick="closeMessageModal()">√ó</button>
            </div>
            <div class="order-body">
                <div class="form-group">
                    <label class="form-label">ÊÇ®ÁöÑÁß∞Âëº</label>
                    <input type="text" class="form-input" id="senderName" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÁß∞Âëº">
                </div>
                <div class="form-group">
                    <label class="form-label">ËÅîÁ≥ªÁîµËØù</label>
                    <input type="tel" class="form-input" id="senderPhone" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑËÅîÁ≥ªÊñπÂºè">
                </div>
                <div class="form-group">
                    <label class="form-label">Âí®ËØ¢ÂÜÖÂÆπ</label>
                    <textarea class="form-textarea" id="messageContent" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÊÉ≥Âí®ËØ¢ÁöÑÈóÆÈ¢òÔºåÊàë‰ª¨‰ºöÂ∞ΩÂø´ÂõûÂ§çÊÇ®"></textarea>
                </div>
                <button class="btn btn-primary" style="width: 100%;" onclick="sendMessage()">ÂèëÈÄÅÊ∂àÊÅØ</button>
            </div>
        </div>
    </div>

    <!-- Áâ©ÊµÅ‰ø°ÊÅØÊ®°ÊÄÅÊ°Ü -->
    <div class="order-modal" id="logisticsModal">
        <div class="order-content">
            <div class="order-header">
                <h2>Áâ©ÊµÅËøΩË∏™</h2>
                <button class="modal-close" onclick="closeLogisticsModal()">√ó</button>
            </div>
            <div class="order-body">
                <div class="order-summary">
                    <div class="summary-item">
                        <span>ËÆ¢ÂçïÂè∑Ôºö</span>
                        <span>HK20240801001</span>
                    </div>
                    <div class="summary-item">
                        <span>Áâ©ÊµÅÂÖ¨Âè∏Ôºö</span>
                        <span>È°∫‰∏∞ÈÄüËøê</span>
                    </div>
                    <div class="summary-item">
                        <span>ËøêÂçïÂè∑Ôºö</span>
                        <span>SF1234567890</span>
                    </div>
                </div>
                <!-- ÂÆûÊó∂ËøΩË∏™‰ø°ÊÅØ -->
                <div class="real-time-tracking">
                    <div class="tracking-header">üìç ÂÆûÊó∂‰ΩçÁΩÆ</div>
                    <div class="tracking-info">
                        <div class="tracking-item">
                            <div class="tracking-label">ÂΩìÂâç‰ΩçÁΩÆ</div>
                            <div class="tracking-value" id="currentLocation">Êù≠Â∑ûÂ∏Ç‰∏äÂüéÂå∫</div>
                        </div>
                        <div class="tracking-item">
                            <div class="tracking-label">Âø´ÈÄíÂëò</div>
                            <div class="tracking-value" id="courierName">Âº†Â∏àÂÇÖ</div>
                        </div>
                        <div class="tracking-item">
                            <div class="tracking-label">ËÅîÁ≥ªÁîµËØù</div>
                            <div class="tracking-value" id="courierPhone">138****5678</div>
                        </div>
                        <div class="tracking-item">
                            <div class="tracking-label">È¢ÑËÆ°ÈÄÅËææ</div>
                            <div class="tracking-value" id="estimatedDelivery">‰ªäÊó• 18:00</div>
                        </div>
                    </div>
                </div>

                <!-- Âú∞ÂõæÊòæÁ§∫ -->
                <div class="map-section">
                    <div class="route-title">üó∫Ô∏è ÈÖçÈÄÅË∑ØÁ∫øÂú∞Âõæ</div>
                    <div class="map-container">
                        <div class="map-loading" id="mapLoading">
                            <div>üó∫Ô∏è</div>
                            <div>Âú∞ÂõæÂä†ËΩΩ‰∏≠...</div>
                        </div>
                        <iframe 
                            id="deliveryMap"
                            class="map-iframe" 
                            style="display: none;"
                            src=""
                            allowfullscreen>
                        </iframe>
                    </div>
                </div>

                <!-- ÈÖçÈÄÅË∑ØÁ∫ø -->
                <div class="route-map">
                    <div class="route-title">üìç ÈÖçÈÄÅË∑ØÁ∫ø</div>
                    <div class="route-steps" id="routeSteps">
                        <!-- Ë∑ØÁ∫øÊ≠•È™§Â∞ÜÂä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>

                <div class="logistics-section" style="display: block;">
                    <div class="logistics-title">üì¶ Áâ©ÊµÅËØ¶ÊÉÖ</div>
                    <div class="logistics-timeline" id="logisticsTimeline">
                            <div class="logistics-item completed">
                                <div class="logistics-time">2024-08-01 14:30</div>
                                <div class="logistics-text">ÊÇ®ÁöÑËÆ¢ÂçïÂ∑≤ÂèëË¥ß</div>
                            </div>
                            <div class="logistics-item completed">
                                <div class="logistics-time">2024-08-01 16:45</div>
                                <div class="logistics-text">Âø´ÈÄíÂ∑≤ÊèΩÊî∂</div>
                            </div>
                            <div class="logistics-item completed">
                                <div class="logistics-time">2024-08-02 08:20</div>
                                <div class="logistics-text">ËøêËæì‰∏≠ - Â∑≤Âà∞ËææÊù≠Â∑ûÂàÜÊã£‰∏≠ÂøÉ</div>
                            </div>
                            <div class="logistics-item current">
                                <div class="logistics-time">2024-08-02 14:15</div>
                                <div class="logistics-text">Ê¥æÈÄÅ‰∏≠ - Âø´ÈÄíÂëòÊ≠£Âú®Ê¥æÈÄÅ</div>
                            </div>
                            <div class="logistics-item">
                                <div class="logistics-time">È¢ÑËÆ°ÈÄÅËææ</div>
                                <div class="logistics-text">‰ªäÊó• 18:00 Ââç</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- ‰∏™‰∫∫Â∏ñÂ≠êÁÆ°ÁêÜÊ®°ÊÄÅÊ°Ü -->
        <div class="modal" id="myPostsModal">
            <div class="modal-content" style="max-width: 800px;">
                <div class="modal-header">
                    <h2>üìù ÊàëÁöÑÂ∏ñÂ≠êÁÆ°ÁêÜ</h2>
                    <button class="modal-close" onclick="closeMyPostsModal()">√ó</button>
                </div>
                <div class="modal-body" style="max-height: 600px; overflow-y: auto;">
                    <div class="my-posts-tabs">
                        <button class="tab-btn active" onclick="showMyPostsTab('published')">Â∑≤ÂèëÂ∏É</button>
                        <button class="tab-btn" onclick="showMyPostsTab('drafts')">ËçâÁ®øÁÆ±</button>
                        <button class="tab-btn" onclick="showMyPostsTab('liked')">ÊàëÁöÑÁÇπËµû</button>
                    </div>
                    <div id="myPostsContent" class="my-posts-content">
                        <!-- Âä®ÊÄÅÂÜÖÂÆπ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Â∏ñÂ≠êËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü -->
        <div class="modal" id="postDetailModal">
            <div class="modal-content" style="max-width: 800px;">
                <div class="modal-header">
                    <h2 id="detailPostTitle">Â∏ñÂ≠êËØ¶ÊÉÖ</h2>
                    <button class="modal-close" onclick="closePostDetailModal()">√ó</button>
                </div>
                <div class="modal-body" style="max-height: 600px; overflow-y: auto;">
                    <div id="postDetailContent">
                        <!-- Âä®ÊÄÅÂÜÖÂÆπ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ÂÆ†Áâ©ËØÑËÆ∫Ê®°ÊÄÅÊ°Ü -->
        <div class="modal" id="catCommentModal">
            <div class="modal-content" style="max-width: 600px;">
                <div class="modal-header">
                    <h2>üí¨ ÁïôË®ÄËØÑËÆ∫</h2>
                    <button class="modal-close" onclick="closeCatCommentModal()">√ó</button>
                </div>
                <div class="modal-body" style="max-height: 500px; overflow-y: auto;">
                    <div class="cat-info" id="commentCatInfo" style="text-align: center; margin-bottom: 20px;">
                        <!-- Áå´Âí™‰ø°ÊÅØ -->
                    </div>
                    
                    <div class="comments-section">
                        <h3>üí¨ ËØÑËÆ∫Âå∫</h3>
                        <div id="catCommentsList" class="comments-list">
                            <!-- ËØÑËÆ∫ÂàóË°® -->
                        </div>
                        
                        <div class="add-comment">
                            <textarea id="newComment" placeholder="ÂÜô‰∏ãÊÇ®ÁöÑËØÑËÆ∫..." style="width: 100%; height: 80px; padding: 10px; border: 1px solid #ddd; border-radius: 8px; resize: vertical;"></textarea>
                            <button class="btn btn-primary" style="margin-top: 10px; width: 100%;" onclick="addCatComment()">ÂèëË°®ËØÑËÆ∫</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
        // ÂÖ®Â±ÄÊï∞ÊçÆÂ≠òÂÇ®
        let currentUser = {
            id: 'user_' + Date.now(),
            name: 'ËÆøÂÆ¢Áî®Êà∑',
            avatar: 'ËÆø',
            level: 'ËßÅ‰π†Èì≤Â±éÂÆò'
        };

        // ÂàùÂßãÂåñÁî®Êà∑Êï∞ÊçÆ
        function initUserData() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
            }
        }

        // ‰øùÂ≠òÁî®Êà∑Êï∞ÊçÆ
        function saveUserData() {
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
        }

        // Áî®Êà∑ÂèëÂ∏ñÊï∞ÊçÆ
        let userPosts = JSON.parse(localStorage.getItem('userPosts') || '[]');

        // Áå´Âí™ËØÑËÆ∫Êï∞ÊçÆ
        let catComments = JSON.parse(localStorage.getItem('catComments') || '{}');

        // ÁßÅ‰ø°Êï∞ÊçÆ
        let privateMessages = JSON.parse(localStorage.getItem('privateMessages') || '[]');

        // ËÆ∫ÂùõÊï∞ÊçÆ - Êõ¥‰∏∞ÂØåÁöÑË¥¥ÂêßÈ£éÊ†ºÊï∞ÊçÆ
        const catsData = [
            {
                id: 1,
                name: 'ÈáëÂÆù',
                age: '2Â≤Å',
                breed: 'Ëã±ÂõΩÈáëÊ∏êÂ±Ç',
                personality: 'Ê≤âÁ®≥Â§ßÊ∞îÔºåÁéãËÄÖÈ£éËåÉ',
                description: 'ÈáëÂÆùÊòØÊùéÂÖàÁîüÂÆ∂ÁöÑÈïáÂÆÖ‰πãÂÆùÔºåÊã•ÊúâÁ∫ØÊ≠£ÁöÑ12Ëâ≤ÈáëÊ∏êÂ±ÇË°ÄÁªü„ÄÇ‰ΩìÂûãÂÅ•Á°ïÔºåÊØõËâ≤ÈáëÈªÑÂèë‰∫ÆÔºåÂú®Èò≥ÂÖâ‰∏ãÈó™ÁÉÅÁùÄËø∑‰∫∫ÁöÑÂÖâËäí„ÄÇÊÄßÊ†ºÊ≤âÁ®≥Ê∏©ÂíåÔºå‰∏çÂñúÊ¨¢ÂêµÈóπÔºåÂñúÊ¨¢ÂÆâÈùôÂú∞Ë∂¥Âú®‰∏ª‰∫∫Ë∫´ËæπÁúã‰π¶„ÄÇÂ∑≤ÁªèÂÆåÊàêÁªùËÇ≤ÊâãÊúØÔºåË∫´‰ΩìÂÅ•Â∫∑ÔºåÂÆöÊúü‰ΩìÊ£Ä„ÄÇÁâπÂà´ÂñúÊ¨¢Âú®Èò≥Âè∞‰∏äÊôíÂ§™Èò≥Ôºå‰∫´ÂèóÊÇ†Èó≤ÁöÑÂçàÂêéÊó∂ÂÖâ„ÄÇ',
                image: 'https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=800&h=600&fit=crop&auto=format',
                gender: 'ÂÖ¨Áå´',
                weight: '5.8kg',
                color: '12Ëâ≤ÈáëÊ∏êÂ±Ç',
                vaccinated: true,
                neutered: true,
                addedDate: '2024-01-15'
            },
            {
                id: 2,
                name: 'ËúúÊ°É',
                age: '1Â≤Å4‰∏™Êúà',
                breed: 'Ëã±ÂõΩÈáëÊ∏êÂ±Ç',
                personality: 'ÁîúÁæéÂèØ‰∫∫ÔºåÊííÂ®á‰∏ìÂÆ∂',
                description: 'ËúúÊ°ÉÂÉèÂ•πÁöÑÂêçÂ≠ó‰∏ÄÊ†∑ÁîúÁæéÔºåÊòØÂÆ∂ÈáåÁöÑÊ∏©ÊüîÂ∞èÂÖ¨‰∏ª„ÄÇÊã•ÊúâÂúÜÊ∂¶ÁöÑËÑ∏Â∫ûÂíåÂ§ßÂ§ßÁöÑÁªøËâ≤ÁúºÁùõÔºåÊØõËâ≤ÂëàÁé∞Âá∫ËúúÊ°ÉËà¨ÁöÑÊöñËâ≤Ë∞É„ÄÇÁâπÂà´ÂñúÊ¨¢ÈªèÁùÄ‰∏ª‰∫∫Ôºå‰ºöÁî®ËΩØËΩØÁöÑË∫´‰ΩìËπ≠‰∫∫ÁöÑËÖøÔºåÂèëÂá∫Êª°Ë∂≥ÁöÑÂëºÂôúÂ£∞„ÄÇÂ∑≤ÁªèÂ≠¶‰ºö‰ΩøÁî®Áå´Á†ÇÁõÜÔºåÂêÉÈ•≠‰π†ÊÉØÂæàÂ•ΩÔºå‰∏çÊåëÈ£ü„ÄÇÊúÄÈÄÇÂêàÊúâÂ∞èÂ≠©ÁöÑÂÆ∂Â∫≠ÔºåÂØπÂ∞èÊúãÂèãÁâπÂà´ÊúâËÄêÂøÉ„ÄÇ',
                image: 'https://images.unsplash.com/photo-1513245543132-31f507417b26?w=800&h=600&fit=crop&auto=format',
                gender: 'ÊØçÁå´',
                weight: '4.2kg',
                color: '11Ëâ≤ÈáëÊ∏êÂ±Ç',
                vaccinated: true,
                neutered: true,
                addedDate: '2024-02-20'
            },
            {
                id: 3,
                name: 'ÂÖÉÂÆù',
                age: '3Â≤Å',
                breed: 'Ëã±ÂõΩÈáëÊ∏êÂ±Ç',
                personality: 'ÊÜ®ÂéöËÄÅÂÆûÔºåÈ£üÈáèÂ§ßÁéã',
                description: 'ÂÖÉÂÆùÊòØÂÆ∂ÈáåÁöÑÂºÄÂøÉÊûúÔºå‰ΩìÂûãÂæÆËÉñ‰ΩÜÈùûÂ∏∏ÂÅ•Â∫∑„ÄÇÊã•ÊúâÈáëÁÅøÁÅøÁöÑË¢´ÊØõÂíåÂúÜÊªöÊªöÁöÑË∫´‰ΩìÔºåÁúãËµ∑Êù•Â∞±ÂÉè‰∏Ä‰∏™Ë°åËµ∞ÁöÑÂÖÉÂÆù„ÄÇÊÄßÊ†ºÊÜ®ÂéöËÄÅÂÆûÔºå‰ªé‰∏ç‰∏ªÂä®ÊÉπ‰∫ãÔºå‰ΩÜÂØπÈ£üÁâ©ÊúâÁùÄÊâßÁùÄÁöÑÁà±„ÄÇÊØèÂ§©ÂÆöÊó∂ÂÆöÈáèÂñÇÈ£üÔºåÂ∑≤ÁªèÂÖªÊàêËâØÂ•ΩÁöÑÈ•ÆÈ£ü‰π†ÊÉØ„ÄÇÁâπÂà´ÂñúÊ¨¢Ë¢´Êå†‰∏ãÂ∑¥ÔºåÂè™Ë¶Å‰∏ÄÊå†Â∞±‰ºöÂèëÂá∫Êª°Ë∂≥ÁöÑÂëºÂôúÂ£∞„ÄÇÊòØÁêÜÊÉ≥ÁöÑÈô™‰º¥ÂûãÁå´Âí™„ÄÇ',
                image: 'https://images.unsplash.com/photo-1495360010541-f48722b34f7d?w=800&h=600&fit=crop&auto=format',
                gender: 'ÂÖ¨Áå´',
                weight: '6.8kg',
                color: '12Ëâ≤ÈáëÊ∏êÂ±Ç',
                vaccinated: true,
                neutered: true,
                addedDate: '2024-03-10'
            },
            {
                id: 4,
                name: 'Èõ™ÁêÉ',
                age: '11‰∏™Êúà',
                breed: 'Ëã±ÂõΩÈáëÊ∏êÂ±Ç',
                personality: 'Ê¥ªÊ≥ºÂ•ΩÂä®ÔºåÂ•ΩÂ•áÂøÉÂº∫',
                description: 'Èõ™ÁêÉÊòØÂÆ∂ÈáåÊúÄÂ∞è‰ΩÜÊúÄÊ¥ªÊ≥ºÁöÑÊàêÂëòÔºåËôΩÁÑ∂Âπ¥Á∫™Â∞è‰ΩÜÂ∑≤ÁªèÂ±ïÁé∞Âá∫ÈáëÊ∏êÂ±ÇÁöÑ‰ºòÁßÄÂìÅË¥®„ÄÇÊØõËâ≤Á∫ØÁôΩ‰∏≠Â∏¶ÁùÄÊ∑°Ê∑°ÁöÑÈáëËâ≤ÔºåÂ∞±ÂÉè‰∏Ä‰∏™Èõ™ÁôΩÁöÑÂ∞èÁªíÁêÉ„ÄÇÁâπÂà´Áà±Áé©ÔºåÂØπ‰ªª‰Ωï‰ºöÂä®ÁöÑ‰∏úË•øÈÉΩÂÖÖÊª°Â•ΩÂ•áÔºåÂñúÊ¨¢ËøΩÈÄêÊøÄÂÖâÁ¨îÂíåÈÄóÁå´Ê£í„ÄÇÂ∑≤ÁªèÂ≠¶‰ºö‰ΩøÁî®Áå´Á†ÇÔºåÂêÉÈ•≠Âæà‰πñÂ∑ß„ÄÇÂõ†‰∏∫ÊòØÂπºÁå´ÔºåËøòÈúÄË¶ÅÊõ¥Â§öÂÖ≥Ê≥®ÂíåÈô™‰º¥ÔºåÈùûÂ∏∏ÈÄÇÂêàÂñúÊ¨¢ÂíåÁå´Âí™‰∫íÂä®ÁöÑÂÆ∂Â∫≠„ÄÇ',
                image: 'https://images.unsplash.com/photo-1573865526739-10659fec78a5?w=800&h=600&fit=crop&auto=format',
                gender: 'ÊØçÁå´',
                weight: '3.6kg',
                color: '11Ëâ≤ÈáëÊ∏êÂ±Ç',
                vaccinated: true,
                neutered: false,
                addedDate: '2024-05-15'
            }
        ];

        let filteredCats = [...catsData];
        let currentCat = null;
        let likedCats = new Set();
        let orders = [];
        let messages = [];
        let notifications = 0;
        let cart = [];
        let shopOrders = [];
        let appointments = [];
        let forumPosts = [];
        let currentSection = 'cats';

        // ========== ‰∏™‰∫∫Â∏ñÂ≠êÁÆ°ÁêÜÂäüËÉΩ ==========
        
        // ÊòæÁ§∫ÊàëÁöÑÂ∏ñÂ≠êÁÆ°ÁêÜ
        function showMyPosts() {
            document.getElementById('myPostsModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            showMyPostsTab('published');
        }

        // ÂÖ≥Èó≠ÊàëÁöÑÂ∏ñÂ≠êÁÆ°ÁêÜ
        function closeMyPostsModal() {
            document.getElementById('myPostsModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ÊòæÁ§∫ÊàëÁöÑÂ∏ñÂ≠êÊ†áÁ≠æÈ°µ
        function showMyPostsTab(tab) {
            // Êõ¥Êñ∞Ê†áÁ≠æÊåâÈíÆÁä∂ÊÄÅ
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const content = document.getElementById('myPostsContent');
            let html = '';
            
            switch(tab) {
                case 'published':
                    html = renderPublishedPosts();
                    break;
                case 'drafts':
                    html = renderDraftPosts();
                    break;
                case 'liked':
                    html = renderLikedPosts();
                    break;
            }
            
            content.innerHTML = html;
        }

        // Ê∏≤ÊüìÂ∑≤ÂèëÂ∏ÉÁöÑÂ∏ñÂ≠ê
        function renderPublishedPosts() {
            const myPublishedPosts = userPosts.filter(post => post.status === 'published');
            
            if (myPublishedPosts.length === 0) {
                return '<div class="empty-comments">ÊÇ®ËøòÊ≤°ÊúâÂèëÂ∏ÉËøáÂ∏ñÂ≠ê</div>';
            }
            
            return myPublishedPosts.map(post => `
                <div class="my-post-item">
                    <div class="my-post-header">
                        <div class="my-post-title" onclick="viewPostDetail(${post.id})">${post.title}</div>
                        <div class="my-post-actions">
                            <button class="my-post-btn" onclick="editPost(${post.id})">ÁºñËæë</button>
                            <button class="my-post-btn delete" onclick="deletePost(${post.id})">Âà†Èô§</button>
                        </div>
                    </div>
                    <div class="my-post-meta">
                        ÂèëÂ∏ÉÊó∂Èó¥Ôºö${new Date(post.createTime).toLocaleString()} | 
                        Á±ªÂûãÔºö${post.typeName} | 
                        ÊµèËßàÔºö${post.views || 0} Ê¨°
                    </div>
                    <div class="my-post-stats">
                        <span>üëç ${post.likes || 0} ÁÇπËµû</span>
                        <span>üí¨ ${post.comments?.length || 0} ËØÑËÆ∫</span>
                    </div>
                </div>
            `).join('');
        }

        // Ê∏≤ÊüìËçâÁ®ø
        function renderDraftPosts() {
            const myDrafts = userPosts.filter(post => post.status === 'draft');
            
            if (myDrafts.length === 0) {
                return '<div class="empty-comments">ÊÇ®Ê≤°ÊúâËçâÁ®ø</div>';
            }
            
            return myDrafts.map(post => `
                <div class="my-post-item">
                    <div class="my-post-header">
                        <div class="my-post-title" onclick="editPost(${post.id})">${post.title || 'Êó†Ê†áÈ¢ò'}</div>
                        <div class="my-post-actions">
                            <button class="my-post-btn" onclick="publishDraft(${post.id})">ÂèëÂ∏É</button>
                            <button class="my-post-btn delete" onclick="deletePost(${post.id})">Âà†Èô§</button>
                        </div>
                    </div>
                    <div class="my-post-meta">
                        ÂàõÂª∫Êó∂Èó¥Ôºö${new Date(post.createTime).toLocaleString()}
                    </div>
                </div>
            `).join('');
        }

        // Ê∏≤ÊüìÁÇπËµûÁöÑÂ∏ñÂ≠ê
        function renderLikedPosts() {
            const likedPostIds = JSON.parse(localStorage.getItem('likedPosts') || '[]');
            const likedPosts = forumPostsData.filter(post => likedPostIds.includes(post.id));
            
            if (likedPosts.length === 0) {
                return '<div class="empty-comments">ÊÇ®ËøòÊ≤°ÊúâÁÇπËµûËøá‰ªª‰ΩïÂ∏ñÂ≠ê</div>';
            }
            
            return likedPosts.map(post => `
                <div class="my-post-item">
                    <div class="my-post-title" onclick="viewPostDetail(${post.id})">${post.title}</div>
                    <div class="my-post-meta">
                        ‰ΩúËÄÖÔºö${post.author} | ÂèëÂ∏ÉÊó∂Èó¥Ôºö${post.time}
                    </div>
                    <div class="my-post-stats">
                        <span>üëç ${post.likes} ÁÇπËµû</span>
                        <span>üí¨ ${post.comments} ËØÑËÆ∫</span>
                        <span>üëÅ ${post.views} ÊµèËßà</span>
                    </div>
                </div>
            `).join('');
        }

        // Êü•ÁúãÂ∏ñÂ≠êËØ¶ÊÉÖ
        function viewPostDetail(postId) {
            const post = forumPostsData.find(p => p.id === postId);
            if (!post) return;
            
            document.getElementById('detailPostTitle').textContent = post.title;
            const content = document.getElementById('postDetailContent');
            
            // Ëé∑ÂèñÂ∏ñÂ≠êÁöÑËØÑËÆ∫
            const postComments = JSON.parse(localStorage.getItem(`postComments_${postId}`) || '[]');
            
            content.innerHTML = `
                <div class="post-detail-header">
                    <div class="post-detail-author">
                        <div class="user-avatar">${post.avatar}</div>
                        <div>
                            <div>${post.author}</div>
                            <div class="author-level">${post.level}</div>
                        </div>
                    </div>
                    <div class="post-type">${post.typeName}</div>
                </div>
                
                <div class="post-detail-content">${post.content.replace(/\n/g, '<br>')}</div>
                
                <div class="post-detail-stats">
                    <span>üëç ${post.likes} ÁÇπËµû</span>
                    <span>üí¨ ${post.comments} ËØÑËÆ∫</span>
                    <span>üëÅ ${post.views} ÊµèËßà</span>
                    <span>üìÖ ${post.time}</span>
                </div>
                
                <div class="post-detail-comments">
                    <h3>üí¨ ËØÑËÆ∫ (${postComments.length})</h3>
                    
                    <div class="comment-form">
                        <textarea id="detailCommentInput" class="comment-input" placeholder="ÂÜô‰∏ãÊÇ®ÁöÑËØÑËÆ∫..."></textarea>
                        <button class="btn btn-primary" onclick="addPostComment(${postId})">ÂèëË°®ËØÑËÆ∫</button>
                    </div>
                    
                    <div id="postCommentsList">
                        ${postComments.map(comment => `
                            <div class="comment-item">
                                <div class="comment-author">${comment.author}</div>
                                <div class="comment-time">${new Date(comment.time).toLocaleString()}</div>
                                <div class="comment-content">${comment.content}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('postDetailModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // ÂÖ≥Èó≠Â∏ñÂ≠êËØ¶ÊÉÖ
        function closePostDetailModal() {
            document.getElementById('postDetailModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Ê∑ªÂä†Â∏ñÂ≠êËØÑËÆ∫
        function addPostComment(postId) {
            const content = document.getElementById('detailCommentInput').value.trim();
            if (!content) {
                alert('ËØ∑ËæìÂÖ•ËØÑËÆ∫ÂÜÖÂÆπ');
                return;
            }
            
            const comments = JSON.parse(localStorage.getItem(`postComments_${postId}`) || '[]');
            const newComment = {
                id: Date.now(),
                postId: postId,
                author: currentUser.name,
                avatar: currentUser.avatar,
                content: content,
                time: new Date().toISOString()
            };
            
            comments.push(newComment);
            localStorage.setItem(`postComments_${postId}`, JSON.stringify(comments));
            
            // Êõ¥Êñ∞Â∏ñÂ≠êËØÑËÆ∫Êï∞
            const post = forumPostsData.find(p => p.id === postId);
            if (post) {
                post.comments = comments.length;
            }
            
            document.getElementById('detailCommentInput').value = '';
            viewPostDetail(postId); // Âà∑Êñ∞ËØÑËÆ∫ÂàóË°®
        }

        // ÁºñËæëÂ∏ñÂ≠ê
        function editPost(postId) {
            const post = userPosts.find(p => p.id === postId);
            if (!post) return;
            
            // ËøôÈáåÂèØ‰ª•ÊâìÂºÄÁºñËæëÊ®°ÊÄÅÊ°ÜÊàñÂØºËà™Âà∞ÁºñËæëÈ°µÈù¢
            alert('ÁºñËæëÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖÔºÅ');
        }

        // ÂèëÂ∏ÉËçâÁ®ø
        function publishDraft(postId) {
            const postIndex = userPosts.findIndex(p => p.id === postId);
            if (postIndex === -1) return;
            
            userPosts[postIndex].status = 'published';
            userPosts[postIndex].publishTime = new Date().toISOString();
            
            // Ê∑ªÂä†Âà∞ËÆ∫ÂùõÊï∞ÊçÆ
            const forumPost = {
                ...userPosts[postIndex],
                time: 'ÂàöÂàö',
                isNew: true
            };
            forumPostsData.unshift(forumPost);
            
            localStorage.setItem('userPosts', JSON.stringify(userPosts));
            
            alert('Â∏ñÂ≠êÂèëÂ∏ÉÊàêÂäüÔºÅ');
            showMyPostsTab('published');
        }

        // Âà†Èô§Â∏ñÂ≠ê
        function deletePost(postId) {
            if (!confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™Â∏ñÂ≠êÂêóÔºü')) return;
            
            // ‰ªéÁî®Êà∑Â∏ñÂ≠ê‰∏≠Âà†Èô§
            const postIndex = userPosts.findIndex(p => p.id === postId);
            if (postIndex !== -1) {
                userPosts.splice(postIndex, 1);
                localStorage.setItem('userPosts', JSON.stringify(userPosts));
            }
            
            // ‰ªéËÆ∫ÂùõÊï∞ÊçÆ‰∏≠Âà†Èô§
            const forumIndex = forumPostsData.findIndex(p => p.id === postId);
            if (forumIndex !== -1) {
                forumPostsData.splice(forumIndex, 1);
            }
            
            alert('Â∏ñÂ≠êÂ∑≤Âà†Èô§');
            showMyPostsTab('published');
        }

        // ========== Áå´Âí™ËØÑËÆ∫ÂíåÁßÅ‰ø°ÂäüËÉΩ ==========
        
        // ÊâìÂºÄÁå´Âí™ËØÑËÆ∫Ê®°ÊÄÅÊ°Ü
        function openCatCommentModal() {
            if (!currentCat) return;
            
            const catInfo = document.getElementById('commentCatInfo');
            catInfo.innerHTML = `
                <img src="${currentCat.image}" class="cat-info-img" alt="${currentCat.name}">
                <h3>${currentCat.name}</h3>
                <p>${currentCat.breed} | ${currentCat.age} | ${currentCat.gender}</p>
            `;
            
            renderCatComments();
            document.getElementById('catCommentModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            closeModal(); // ÂÖ≥Èó≠Áå´Âí™ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü
        }

        // ÂÖ≥Èó≠Áå´Âí™ËØÑËÆ∫Ê®°ÊÄÅÊ°Ü
        function closeCatCommentModal() {
            document.getElementById('catCommentModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Ê∏≤ÊüìÁå´Âí™ËØÑËÆ∫
        function renderCatComments() {
            const comments = catComments[currentCat.id] || [];
            const commentsList = document.getElementById('catCommentsList');
            
            if (comments.length === 0) {
                commentsList.innerHTML = '<div class="empty-comments">ÊöÇÊó†ËØÑËÆ∫ÔºåÂø´Êù•Êä¢Ê≤ôÂèëÂêßÔºÅ</div>';
                return;
            }
            
            commentsList.innerHTML = comments.map(comment => `
                <div class="comment-item">
                    <div style="display: flex; align-items: center; margin-bottom: 8px;">
                        <div class="user-avatar">${comment.avatar}</div>
                        <div>
                            <div class="comment-author">${comment.author}</div>
                            <div class="comment-time">${new Date(comment.time).toLocaleString()}</div>
                        </div>
                    </div>
                    <div class="comment-content">${comment.content}</div>
                </div>
            `).join('');
        }

        // Ê∑ªÂä†Áå´Âí™ËØÑËÆ∫
        function addCatComment() {
            const content = document.getElementById('newComment').value.trim();
            if (!content) {
                alert('ËØ∑ËæìÂÖ•ËØÑËÆ∫ÂÜÖÂÆπ');
                return;
            }
            
            if (!catComments[currentCat.id]) {
                catComments[currentCat.id] = [];
            }
            
            const newComment = {
                id: Date.now(),
                author: currentUser.name,
                avatar: currentUser.avatar,
                content: content,
                time: new Date().toISOString()
            };
            
            catComments[currentCat.id].push(newComment);
            localStorage.setItem('catComments', JSON.stringify(catComments));
            
            document.getElementById('newComment').value = '';
            renderCatComments();
            
            alert('ËØÑËÆ∫ÂèëË°®ÊàêÂäüÔºÅ');
        }

        // ÂèëÈÄÅÁå´Âí™ÁßÅ‰ø°ÁªôÁÆ°ÁêÜÂëò
        function sendCatPrivateMessage() {
            if (!currentCat) return;
            
            const content = prompt(`ËØ∑ËæìÂÖ•ÊÇ®ÊÉ≥ÂØπÊùéÂÖàÁîüÂí®ËØ¢ÁöÑÂÖ≥‰∫é${currentCat.name}ÁöÑÈóÆÈ¢òÔºö`);
            if (!content) return;
            
            const message = {
                id: Date.now(),
                type: 'cat_inquiry',
                catId: currentCat.id,
                catName: currentCat.name,
                sender: currentUser.name,
                senderPhone: '', // ÂèØ‰ª•Âú®ÂêéÁª≠ÁâàÊú¨‰∏≠Ê∑ªÂä†
                content: content,
                createTime: new Date().toISOString(),
                status: 'unread',
                reply: ''
            };
            
            privateMessages.push(message);
            localStorage.setItem('privateMessages', JSON.stringify(privateMessages));
            
            alert(`ÁßÅ‰ø°ÂèëÈÄÅÊàêÂäüÔºÅÊùéÂÖàÁîü‰ºöÂ∞ΩÂø´ÂõûÂ§çÊÇ®ÂÖ≥‰∫é${currentCat.name}ÁöÑÈóÆÈ¢ò„ÄÇ`);
        }

        // ÂàùÂßãÂåñ
        function init() {
            initUserData();
            renderCats();
            updateCounts();
            setupEventListeners();
        }

        // ËÆæÁΩÆ‰∫ã‰ª∂ÁõëÂê¨Âô®
        function setupEventListeners() {
            document.getElementById('searchInput').addEventListener('input', filterCats);
            document.getElementById('genderFilter').addEventListener('change', filterCats);
            document.getElementById('sortBy').addEventListener('change', filterCats);
        }

        // Ê∏≤ÊüìÁå´Âí™Âç°Áâá
        function renderCats() {
            const grid = document.getElementById('catsGrid');
            
            if (filteredCats.length === 0) {
                grid.innerHTML = `
                    <div class="no-results" style="grid-column: 1/-1;">
                        <div class="no-results-icon">üîç</div>
                        <h3>Ê≤°ÊúâÊâæÂà∞ÂåπÈÖçÁöÑÁå´Âí™</h3>
                        <p>ËØïËØïË∞ÉÊï¥ÊêúÁ¥¢Êù°‰ª∂Êù•ÊâæÂà∞ÊÇ®ÂøÉ‰ª™ÁöÑÁå´Âí™„ÄÇ</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredCats.map((cat, index) => `
                <div class="cat-card fade-in" style="animation-delay: ${index * 0.1}s" onclick="showCatDetail(${cat.id})">
                    <img class="cat-image" src="${cat.image}" alt="${cat.name}">
                    <div class="cat-info">
                        <h3 class="cat-name">${cat.name}</h3>
                        <div class="cat-details">
                            <div class="cat-detail">${cat.age} ‚Ä¢ ${cat.gender} ‚Ä¢ ${cat.weight}</div>
                            <div class="cat-detail">${cat.breed}</div>
                        </div>
                        <div class="cat-personality">${cat.personality}</div>
                    </div>
                </div>
            `).join('');
        }

        // Á≠õÈÄâÁå´Âí™
        function filterCats() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const genderFilter = document.getElementById('genderFilter').value;
            const sortBy = document.getElementById('sortBy').value;

            let result = [...catsData];

            // ÊêúÁ¥¢Á≠õÈÄâ
            if (searchTerm) {
                result = result.filter(cat => 
                    cat.name.toLowerCase().includes(searchTerm) ||
                    cat.breed.toLowerCase().includes(searchTerm) ||
                    cat.personality.toLowerCase().includes(searchTerm)
                );
            }

            // ÊÄßÂà´Á≠õÈÄâ
            if (genderFilter !== 'all') {
                result = result.filter(cat => cat.gender === genderFilter);
            }

            // ÊéíÂ∫è
            switch (sortBy) {
                case 'newest':
                    result.sort((a, b) => new Date(b.addedDate) - new Date(a.addedDate));
                    break;
                case 'oldest':
                    result.sort((a, b) => new Date(a.addedDate) - new Date(b.addedDate));
                    break;
                case 'name':
                    result.sort((a, b) => a.name.localeCompare(b.name, 'zh-CN'));
                    break;
                case 'age':
                    result.sort((a, b) => {
                        const ageA = parseInt(a.age) || 0;
                        const ageB = parseInt(b.age) || 0;
                        return ageB - ageA;
                    });
                    break;
            }

            filteredCats = result;
            renderCats();
            updateCounts();
        }

        // Êõ¥Êñ∞ËÆ°Êï∞
        function updateCounts() {
            document.getElementById('totalCats').textContent = catsData.length;
            document.getElementById('catsCount').textContent = `ÂÖ± ${filteredCats.length} Âè™Áå´Âí™`;
        }

        // ÊòæÁ§∫Áå´Âí™ËØ¶ÊÉÖ
        function showCatDetail(catId) {
            currentCat = catsData.find(cat => cat.id === catId);
            if (!currentCat) return;

            document.getElementById('modalImage').src = currentCat.image;
            document.getElementById('modalTitle').textContent = currentCat.name;
            document.getElementById('modalAge').textContent = currentCat.age;
            document.getElementById('modalGender').textContent = currentCat.gender;
            document.getElementById('modalWeight').textContent = currentCat.weight;
            document.getElementById('modalBreed').textContent = currentCat.breed;
            document.getElementById('modalDescription').textContent = currentCat.description;

            const likeBtn = document.getElementById('likeBtn');
            if (likedCats.has(catId)) {
                likeBtn.classList.add('liked');
                likeBtn.textContent = 'üíö Â∑≤ÂñúÊ¨¢';
            } else {
                likeBtn.classList.remove('liked');
                likeBtn.textContent = '‚ù§Ô∏è ÂñúÊ¨¢';
            }

            document.getElementById('catModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
        function closeModal() {
            document.getElementById('catModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ÂàáÊç¢ÂñúÊ¨¢Áä∂ÊÄÅ
        function toggleLike() {
            if (!currentCat) return;

            const likeBtn = document.getElementById('likeBtn');
            if (likedCats.has(currentCat.id)) {
                likedCats.delete(currentCat.id);
                likeBtn.classList.remove('liked');
                likeBtn.textContent = '‚ù§Ô∏è ÂñúÊ¨¢';
            } else {
                likedCats.add(currentCat.id);
                likeBtn.classList.add('liked');
                likeBtn.textContent = 'üíö Â∑≤ÂñúÊ¨¢';
            }
        }

        // ÂàÜ‰∫´Áå´Âí™
        function shareCat() {
            if (!currentCat) return;

            const shareText = `Êù•ÁúãÁúã${currentCat.name}Ôºå‰∏ÄÂè™${currentCat.age}ÁöÑ${currentCat.breed}ÔºÅ${currentCat.personality}`;
            const shareUrl = window.location.href;

            if (navigator.share) {
                navigator.share({
                    title: `${currentCat.name} - Êù≠Â∑ûËá™ÂÆ∂Â∞èÁå´Âí™`,
                    text: shareText,
                    url: shareUrl
                });
            } else {
                // Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø
                navigator.clipboard.writeText(`${shareText} ${shareUrl}`).then(() => {
                    alert('ÂàÜ‰∫´ÈìæÊé•Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ');
                });
            }
        }

        // ÁÇπÂáªÊ®°ÊÄÅÊ°ÜÂ§ñÈÉ®ÂÖ≥Èó≠
        document.getElementById('catModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // ESCÈîÆÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Âπ≥ÊªëÊªöÂä®
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Áî®Êà∑‰∏ãÊãâËèúÂçï
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('show');
        }

        // ÁßªÂä®Á´ØËèúÂçïÂàáÊç¢
        function toggleMobileMenu() {
            const menu = document.getElementById('navMenu');
            menu.classList.toggle('show');
        }

        // ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠‰∏ãÊãâËèúÂçï
        document.addEventListener('click', function(e) {
            const userSection = document.querySelector('.user-section');
            if (!userSection.contains(e.target)) {
                document.getElementById('userDropdown').classList.remove('show');
            }
            
            // ÂÖ≥Èó≠ÁßªÂä®Á´ØËèúÂçï
            const navMenu = document.getElementById('navMenu');
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            if (!navMenu.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
                navMenu.classList.remove('show');
            }
        });

        // ÊâìÂºÄËÆ¢ÂçïÊ®°ÊÄÅÊ°Ü
        function openOrderModal() {
            if (!currentCat) return;
            
            document.getElementById('orderCatName').textContent = currentCat.name;
            document.getElementById('orderCatBreed').textContent = currentCat.breed;
            document.getElementById('orderModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            closeModal(); // ÂÖ≥Èó≠Áå´Âí™ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü
        }

        // ÂÖ≥Èó≠ËÆ¢ÂçïÊ®°ÊÄÅÊ°Ü
        function closeOrderModal() {
            document.getElementById('orderModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Êèê‰∫§ËÆ¢Âçï
        function submitOrder() {
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const address = document.getElementById('customerAddress').value.trim();
            const note = document.getElementById('orderNote').value.trim();

            if (!name || !phone || !address) {
                alert('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑÊî∂Ë¥ß‰ø°ÊÅØ');
                return;
            }

            const order = {
                id: Date.now(),
                catId: currentCat.id,
                catName: currentCat.name,
                customerName: name,
                customerPhone: phone,
                customerAddress: address,
                note: note,
                totalAmount: 12800,
                status: 'pending',
                createTime: new Date().toISOString(),
                logistics: {
                    company: 'È°∫‰∏∞ÈÄüËøê',
                    trackingNumber: 'SF' + Date.now(),
                    status: 'preparing'
                }
            };

            orders.push(order);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            alert('ËÆ¢ÂçïÊèê‰∫§ÊàêÂäüÔºÅÊàë‰ª¨‰ºöÂ∞ΩÂø´‰∏éÊÇ®ËÅîÁ≥ªÁ°ÆËÆ§„ÄÇ');
            closeOrderModal();
            
            // Ê∏ÖÁ©∫Ë°®Âçï
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            document.getElementById('customerAddress').value = '';
            document.getElementById('orderNote').value = '';
        }

        // ÊâìÂºÄÁßÅ‰ø°Ê®°ÊÄÅÊ°Ü
        function openMessageModal() {
            if (!currentCat) return;
            
            document.getElementById('messageModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            closeModal(); // ÂÖ≥Èó≠Áå´Âí™ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü
        }

        // ÂÖ≥Èó≠ÁßÅ‰ø°Ê®°ÊÄÅÊ°Ü
        function closeMessageModal() {
            document.getElementById('messageModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ÂèëÈÄÅÁßÅ‰ø°
        function sendMessage() {
            const name = document.getElementById('senderName').value.trim();
            const phone = document.getElementById('senderPhone').value.trim();
            const content = document.getElementById('messageContent').value.trim();

            if (!name || !phone || !content) {
                alert('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑÁßÅ‰ø°‰ø°ÊÅØ');
                return;
            }

            const message = {
                id: Date.now(),
                catId: currentCat.id,
                catName: currentCat.name,
                senderName: name,
                senderPhone: phone,
                content: content,
                createTime: new Date().toISOString(),
                status: 'unread',
                reply: ''
            };

            messages.push(message);
            localStorage.setItem('messages', JSON.stringify(messages));
            
            alert('ÁßÅ‰ø°ÂèëÈÄÅÊàêÂäüÔºÅÊùéÂÖàÁîü‰ºöÂ∞ΩÂø´ÂõûÂ§çÊÇ®„ÄÇ');
            closeMessageModal();
            
            // Ê∏ÖÁ©∫Ë°®Âçï
            document.getElementById('senderName').value = '';
            document.getElementById('senderPhone').value = '';
            document.getElementById('messageContent').value = '';
        }

        // ÊòæÁ§∫ËÆ¢ÂçïÂàóË°®
        function showOrders() {
            const ordersList = JSON.parse(localStorage.getItem('orders') || '[]');
            
            if (ordersList.length === 0) {
                alert('ÊÇ®ËøòÊ≤°ÊúâËÆ¢Âçï');
                return;
            }

            let ordersHtml = 'üì¶ ÊàëÁöÑËÆ¢Âçï\n\n';
            ordersList.forEach((order, index) => {
                ordersHtml += `${index + 1}. ${order.catName} - ${order.totalAmount}ÂÖÉ\n`;
                ordersHtml += `   Áä∂ÊÄÅ: ${getOrderStatus(order.status)}\n`;
                ordersHtml += `   Êó∂Èó¥: ${new Date(order.createTime).toLocaleString()}\n\n`;
            });

            alert(ordersHtml);
        }

        // ÊòæÁ§∫ÁßÅ‰ø°ÂàóË°®
        function showMessages() {
            const messagesList = JSON.parse(localStorage.getItem('messages') || '[]');
            
            if (messagesList.length === 0) {
                alert('ÊÇ®ËøòÊ≤°ÊúâÁßÅ‰ø°ËÆ∞ÂΩï');
                return;
            }

            let messagesHtml = 'üí¨ ÁßÅ‰ø°Ê∂àÊÅØ\n\n';
            messagesList.forEach((message, index) => {
                messagesHtml += `${index + 1}. Âí®ËØ¢${message.catName}\n`;
                messagesHtml += `   ÂÜÖÂÆπ: ${message.content}\n`;
                messagesHtml += `   Êó∂Èó¥: ${new Date(message.createTime).toLocaleString()}\n`;
                if (message.reply) {
                    messagesHtml += `   ÂõûÂ§ç: ${message.reply}\n`;
                }
                messagesHtml += '\n';
            });

            alert(messagesHtml);
            updateNotificationBadge();
        }

        // Áâ©ÊµÅËøΩË∏™Êï∞ÊçÆ
        const logisticsData = {
            orderNumber: 'HK20240801001',
            company: 'È°∫‰∏∞ÈÄüËøê',
            trackingNumber: 'SF1234567890',
            currentLocation: 'Êù≠Â∑ûÂ∏Ç‰∏äÂüéÂå∫Ëß£ÊîæË∑Ø88Âè∑',
            courierName: 'Âº†Â∏àÂÇÖ',
            courierPhone: '13812345678',
            estimatedDelivery: '‰ªäÊó• 18:00',
            route: [
                {
                    location: 'Êù≠Â∑ûÂàÜÊã£‰∏≠ÂøÉ',
                    address: 'Êù≠Â∑ûÂ∏ÇÊ±üÂπ≤Âå∫',
                    time: '08:20',
                    status: 'completed',
                    lat: 30.2741,
                    lng: 120.1551
                },
                {
                    location: 'Êù≠Â∑ûÈÖçÈÄÅÁ´ô',
                    address: 'Êù≠Â∑ûÂ∏Ç‰∏äÂüéÂå∫',
                    time: '12:30',
                    status: 'completed',
                    lat: 30.2594,
                    lng: 120.1697
                },
                {
                    location: 'ÊÇ®ÁöÑÂú∞ÂùÄ',
                    address: 'Êù≠Â∑ûÂ∏Ç‰∏äÂüéÂå∫Ëß£ÊîæË∑Ø88Âè∑',
                    time: '14:15',
                    status: 'current',
                    lat: 30.2628,
                    lng: 120.1752
                }
            ],
            timeline: [
                {
                    time: '2024-08-01 14:30',
                    status: 'completed',
                    text: 'ÊÇ®ÁöÑËÆ¢ÂçïÂ∑≤ÂèëË¥ß'
                },
                {
                    time: '2024-08-01 16:45',
                    status: 'completed',
                    text: 'Âø´ÈÄíÂ∑≤ÊèΩÊî∂'
                },
                {
                    time: '2024-08-02 08:20',
                    status: 'completed',
                    text: 'ËøêËæì‰∏≠ - Â∑≤Âà∞ËææÊù≠Â∑ûÂàÜÊã£‰∏≠ÂøÉ'
                },
                {
                    time: '2024-08-02 12:30',
                    status: 'completed',
                    text: 'Â∑≤Âà∞ËææÊù≠Â∑ûÈÖçÈÄÅÁ´ô'
                },
                {
                    time: '2024-08-02 14:15',
                    status: 'current',
                    text: 'Ê¥æÈÄÅ‰∏≠ - Âø´ÈÄíÂëòÊ≠£Âú®Ê¥æÈÄÅ'
                },
                {
                    time: 'È¢ÑËÆ°ÈÄÅËææ',
                    status: 'pending',
                    text: '‰ªäÊó• 18:00 Ââç'
                }
            ]
        };

        // ÊòæÁ§∫Áâ©ÊµÅËøΩË∏™
        function showLogistics() {
            document.getElementById('logisticsModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            initLogisticsMap();
            updateLogisticsInfo();
        }

        // ÂÖ≥Èó≠Áâ©ÊµÅÊ®°ÊÄÅÊ°Ü
        function closeLogisticsModal() {
            document.getElementById('logisticsModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ÂàùÂßãÂåñÁâ©ÊµÅÂú∞Âõæ
        function initLogisticsMap() {
            // Êõ¥Êñ∞Âü∫Êú¨‰ø°ÊÅØ
            document.getElementById('trackingOrderNumber').textContent = logisticsData.orderNumber;
            document.getElementById('trackingCompany').textContent = logisticsData.company;
            document.getElementById('trackingNumber').textContent = logisticsData.trackingNumber;

            // Êõ¥Êñ∞ÂÆûÊó∂‰ø°ÊÅØ
            document.getElementById('currentLocation').textContent = logisticsData.currentLocation;
            document.getElementById('courierName').textContent = logisticsData.courierName;
            document.getElementById('courierPhone').textContent = logisticsData.courierPhone.replace(/(\d{3})\d{4}(\d{4})/, '$1****$2');
            document.getElementById('estimatedDelivery').textContent = logisticsData.estimatedDelivery;
            document.getElementById('finalEstimate').textContent = logisticsData.estimatedDelivery;

            // Ê∏≤ÊüìË∑ØÁ∫øÊ≠•È™§
            renderDeliveryRoute();

            // Ê∏≤ÊüìÁâ©ÊµÅÊó∂Èó¥Á∫ø
            renderLogisticsTimeline();

            // ÂàùÂßãÂåñÂú∞Âõæ
            setTimeout(() => {
                loadDeliveryMap();
            }, 1000);
        }

        // Ê∏≤ÊüìÈÖçÈÄÅË∑ØÁ∫ø
        function renderDeliveryRoute() {
            const routeSteps = document.getElementById('routeSteps');
            routeSteps.innerHTML = logisticsData.route.map((step, index) => `
                <div class="route-step">
                    <div class="route-location">${step.location}</div>
                    <div class="route-time">${step.time} - ${step.address}</div>
                </div>
            `).join('');
        }

        // Ê∏≤ÊüìÁâ©ÊµÅÊó∂Èó¥Á∫ø
        function renderLogisticsTimeline() {
            const timeline = document.getElementById('logisticsTimeline');
            timeline.innerHTML = logisticsData.timeline.map((item, index) => `
                <div class="logistics-item ${item.status}">
                    <div class="logistics-time">${item.time}</div>
                    <div class="logistics-text">${item.text}</div>
                </div>
            `).join('');
        }

        // Âä†ËΩΩÈÖçÈÄÅÂú∞Âõæ
        function loadDeliveryMap() {
            const mapLoading = document.getElementById('mapLoading');
            const deliveryMap = document.getElementById('deliveryMap');

            // ÊûÑÂª∫Âú∞ÂõæURL - ‰ΩøÁî®OpenStreetMap
            const currentStep = logisticsData.route.find(step => step.status === 'current');
            if (currentStep) {
                const mapUrl = `https://www.openstreetmap.org/export/embed.html?bbox=${currentStep.lng-0.01},${currentStep.lat-0.01},${currentStep.lng+0.01},${currentStep.lat+0.01}&layer=mapnik&marker=${currentStep.lat},${currentStep.lng}`;
                
                deliveryMap.src = mapUrl;
                deliveryMap.style.display = 'block';
                mapLoading.style.display = 'none';
            }
        }

        // Âà∑Êñ∞Áâ©ÊµÅ‰ø°ÊÅØ
        function refreshTracking() {
            // Ê®°ÊãüÂà∑Êñ∞ÊïàÊûú
            const refreshBtn = event.target;
            refreshBtn.textContent = 'üîÑ Âà∑Êñ∞‰∏≠...';
            refreshBtn.disabled = true;

            setTimeout(() => {
                // Ê®°ÊãüÊõ¥Êñ∞‰ΩçÁΩÆ
                const locations = [
                    'Êù≠Â∑ûÂ∏Ç‰∏äÂüéÂå∫Ëß£ÊîæË∑Ø88Âè∑ÈôÑËøë',
                    'Êù≠Â∑ûÂ∏Ç‰∏äÂüéÂå∫Ëß£ÊîæË∑Ø88Âè∑',
                    'Â∑≤Âà∞ËææÁõÆÁöÑÂú∞ÔºåÊ≠£Âú®ËÅîÁ≥ªÊî∂‰ª∂‰∫∫'
                ];
                const randomLocation = locations[Math.floor(Math.random() * locations.length)];
                
                document.getElementById('currentLocation').textContent = randomLocation;
                document.getElementById('estimatedDelivery').textContent = '15ÂàÜÈíüÂÜÖ';
                document.getElementById('finalEstimate').textContent = '15ÂàÜÈíüÂÜÖ';

                refreshBtn.textContent = 'üîÑ Âà∑Êñ∞';
                refreshBtn.disabled = false;

                alert('Áâ©ÊµÅ‰ø°ÊÅØÂ∑≤Êõ¥Êñ∞ÔºÅ');
            }, 2000);
        }

        // ÊòæÁ§∫Êî∂Ëóè
        function showFavorites() {
            if (likedCats.size === 0) {
                alert('ÊÇ®ËøòÊ≤°ÊúâÊî∂ËóèÁöÑÁå´Âí™');
                return;
            }

            const favoriteCats = catsData.filter(cat => likedCats.has(cat.id));
            let favoritesHtml = '‚ù§Ô∏è ÊàëÁöÑÊî∂Ëóè\n\n';
            favoriteCats.forEach((cat, index) => {
                favoritesHtml += `${index + 1}. ${cat.name} - ${cat.age} - ${cat.personality}\n`;
            });

            alert(favoritesHtml);
        }

        // Ëé∑ÂèñËÆ¢ÂçïÁä∂ÊÄÅÊñáÊú¨
        function getOrderStatus(status) {
            const statusMap = {
                'pending': 'ÂæÖÁ°ÆËÆ§',
                'confirmed': 'Â∑≤Á°ÆËÆ§',
                'preparing': 'ÂáÜÂ§á‰∏≠',
                'shipped': 'Â∑≤ÂèëË¥ß',
                'delivered': 'Â∑≤ÈÄÅËææ',
                'cancelled': 'Â∑≤ÂèñÊ∂à'
            };
            return statusMap[status] || 'Êú™Áü•Áä∂ÊÄÅ';
        }

        // Êõ¥Êñ∞ÈÄöÁü•ËßíÊ†á
        function updateNotificationBadge() {
            const messagesList = JSON.parse(localStorage.getItem('messages') || '[]');
            const unreadCount = messagesList.filter(msg => msg.status === 'unread').length;
            
            const badge = document.getElementById('notificationBadge');
            if (unreadCount > 0) {
                badge.textContent = unreadCount;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

        // ÂïÜÂüéÊï∞ÊçÆ
        const productsData = [
            {
                id: 1,
                name: 'ÁöáÂÆ∂Áå´Á≤Æ ÊàêÁå´‰∏ìÁî®',
                price: 298,
                category: 'food',
                desc: 'Ëê•ÂÖªÂùáË°°ÔºåÈÄÇÂêàÊàêÂπ¥Áå´Âí™Êó•Â∏∏È£üÁî®ÔºåÂØåÂê´‰ºòË¥®ËõãÁôΩË¥®ÂíåÁª¥ÁîüÁ¥†',
                image: 'https://images.unsplash.com/photo-1589926414471-4341d13b7a76?w=400&h=300&fit=crop&auto=format'
            },
            {
                id: 2,
                name: 'Êô∫ËÉΩÈÄóÁå´Ê£íÂ•óË£Ö',
                price: 89,
                category: 'toy',
                desc: 'ÁîµÂä®‰∫íÂä®Áé©ÂÖ∑ÔºåËá™Âä®ÁßªÂä®ÔºåËÆ©Áå´Âí™Áà±‰∏çÈáäÊâãÔºåÈîªÁÇºÁå´Âí™ÂèçÂ∫îËÉΩÂäõ',
                image: 'https://images.unsplash.com/photo-1606214174555-259fd1c62692?w=400&h=300&fit=crop&auto=format'
            },
            {
                id: 3,
                name: 'Áå´Áî®Áª¥ÁîüÁ¥†Áâá',
                price: 156,
                category: 'health',
                desc: 'Â§çÂêàÁª¥ÁîüÁ¥†ÔºåÂ¢ûÂº∫ÂÖçÁñ´ÂäõÔºå‰øÉËøõÊØõÂèëÂÅ•Â∫∑ÔºåÈÄÇÂêàÂêÑÂπ¥ÈæÑÊÆµÁå´Âí™',
                image: 'https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400&h=300&fit=crop&auto=format'
            },
            {
                id: 4,
                name: 'Ë±™ÂçéÁå´Á™ù',
                price: 399,
                category: 'living',
                desc: 'ËàíÈÄÇÊüîËΩØÔºåÂÜ¨Â≠£‰øùÊöñÂ§èÂ≠£ÈÄèÊ∞îÔºåÂèØÊãÜÊ¥óÔºåÂ§öÁßçÂ∞∫ÂØ∏ÂèØÈÄâ',
                image: 'https://images.unsplash.com/photo-1574158622682-e40e69881006?w=400&h=300&fit=crop&auto=format'
            },
            {
                id: 5,
                name: 'ËøõÂè£Áå´Èõ∂È£üÁΩêÂ§¥',
                price: 128,
                category: 'food',
                desc: 'Â§©ÁÑ∂È£üÊùêÔºåÊó†Ê∑ªÂä†ÂâÇÔºåÂè£ÊÑü‰∏∞ÂØåÔºåÂèØ‰Ωú‰∏∫Â•ñÂä±ÊàñË°•ÂÖÖËê•ÂÖª',
                image: 'https://images.unsplash.com/photo-1596854407944-bf87f6fdd49e?w=400&h=300&fit=crop&auto=format'
            },
            {
                id: 6,
                name: 'Áå´Áà¨Êû∂',
                price: 599,
                category: 'living',
                desc: 'Â§öÂ±ÇÁªìÊûÑÔºåÂâëÈ∫ªÊü±ÔºåÈÄÇÂêàÂ§öÁå´ÂÆ∂Â∫≠ÔºåÊª°Ë∂≥Áå´Âí™ÊîÄÁà¨Â§©ÊÄß',
                image: 'https://images.unsplash.com/photo-1513245543132-31f507417b26?w=400&h=300&fit=crop&auto=format'
            }
        ];

        // ÂåªÈô¢Êï∞ÊçÆÔºàÂåÖÂê´ÁúüÂÆûÂùêÊ†áÔºâ
        const hospitalsData = [
            {
                id: 1,
                name: 'Êù≠Â∑ûÂÆ†Áâ©ÊÄªÂåªÈô¢',
                rating: 4.8,
                address: 'Êù≠Â∑ûÂ∏Ç‰∏äÂüéÂå∫Ëß£ÊîæË∑Ø88Âè∑',
                phone: '0571-88888888',
                services: ['24Â∞èÊó∂ÊÄ•ËØä', 'ÂÆ†Áâ©ÊâãÊúØ', 'Áñ´ËãóÊé•Áßç', '‰ΩìÊ£ÄÊúçÂä°'],
                distance: '1.2km',
                coordinates: {
                    lat: 30.274084,
                    lng: 120.155069
                },
                realAddress: 'ÊµôÊ±üÁúÅÊù≠Â∑ûÂ∏Ç‰∏äÂüéÂå∫Ëß£ÊîæË∑Ø88Âè∑'
            },
            {
                id: 2,
                name: 'Áà±ÂøÉÂÆ†Áâ©ËØäÊâÄ',
                rating: 4.6,
                address: 'Êù≠Â∑ûÂ∏ÇË•øÊπñÂå∫Êñá‰∏âË∑Ø66Âè∑',
                phone: '0571-66666666',
                services: ['Êó•Â∏∏ËØäÁñó', 'ÁæéÂÆπÊä§ÁêÜ', 'ÂØÑÂÖªÊúçÂä°'],
                distance: '2.5km',
                coordinates: {
                    lat: 30.262834,
                    lng: 120.127629
                },
                realAddress: 'ÊµôÊ±üÁúÅÊù≠Â∑ûÂ∏ÇË•øÊπñÂå∫Êñá‰∏âË∑Ø66Âè∑'
            },
            {
                id: 3,
                name: 'ÂÆ†Â∫∑Âä®Áâ©ÂåªÈô¢',
                rating: 4.9,
                address: 'Êù≠Â∑ûÂ∏ÇÊã±Â¢ÖÂå∫‰ΩìËÇ≤Âú∫Ë∑Ø99Âè∑',
                phone: '0571-77777777',
                services: ['‰∏ìÁßëËØäÁñó', '‰∏≠ÂåªÁêÜÁñó', 'Â∫∑Â§çÊä§ÁêÜ', 'Ëê•ÂÖªÂí®ËØ¢'],
                distance: '3.1km',
                coordinates: {
                    lat: 30.314539,
                    lng: 120.168386
                },
                realAddress: 'ÊµôÊ±üÁúÅÊù≠Â∑ûÂ∏ÇÊã±Â¢ÖÂå∫‰ΩìËÇ≤Âú∫Ë∑Ø99Âè∑'
            },
            {
                id: 4,
                name: 'Êù≠Â∑ûÂçèÂíåÂÆ†Áâ©ÂåªÈô¢',
                rating: 4.7,
                address: 'Êù≠Â∑ûÂ∏ÇÊª®Ê±üÂå∫Ê±üÂçóÂ§ßÈÅì588Âè∑',
                phone: '0571-55555555',
                services: ['24Â∞èÊó∂ÊÄ•ËØä', 'ÂÆ†Áâ©ÊâãÊúØ', '‰∏ìÁßëËØäÁñó', 'ÁæéÂÆπÊä§ÁêÜ'],
                distance: null,
                coordinates: {
                    lat: 30.208458,
                    lng: 120.212316
                },
                realAddress: 'ÊµôÊ±üÁúÅÊù≠Â∑ûÂ∏ÇÊª®Ê±üÂå∫Ê±üÂçóÂ§ßÈÅì588Âè∑'
            },
            {
                id: 5,
                name: 'Áà±ÂÆ†Âä®Áâ©ËØäÊâÄ',
                rating: 4.5,
                address: 'Êù≠Â∑ûÂ∏ÇÊ±üÂπ≤Âå∫Èí±Ê±üË∑Ø168Âè∑',
                phone: '0571-44444444',
                services: ['Áñ´ËãóÊé•Áßç', '‰ΩìÊ£ÄÊúçÂä°', 'ÂØÑÂÖªÊúçÂä°', 'Ëê•ÂÖªÂí®ËØ¢'],
                distance: null,
                coordinates: {
                    lat: 30.274128,
                    lng: 120.215634
                },
                realAddress: 'ÊµôÊ±üÁúÅÊù≠Â∑ûÂ∏ÇÊ±üÂπ≤Âå∫Èí±Ê±üË∑Ø168Âè∑'
            },
            {
                id: 6,
                name: 'ÂÆ†Áâ©Â∫∑ÂÅ•‰∏≠ÂøÉ',
                rating: 4.8,
                address: 'Êù≠Â∑ûÂ∏Ç‰ΩôÊù≠Âå∫Êñá‰∏ÄË•øË∑Ø888Âè∑',
                phone: '0571-33333333',
                services: ['24Â∞èÊó∂ÊÄ•ËØä', 'ÂÆ†Áâ©ÊâãÊúØ', '‰∏≠ÂåªÁêÜÁñó', 'Â∫∑Â§çÊä§ÁêÜ'],
                distance: null,
                coordinates: {
                    lat: 30.284527,
                    lng: 120.031278
                },
                realAddress: 'ÊµôÊ±üÁúÅÊù≠Â∑ûÂ∏Ç‰ΩôÊù≠Âå∫Êñá‰∏ÄË•øË∑Ø888Âè∑'
            }
        ];

        // Áî®Êà∑‰ΩçÁΩÆ
        let userLocation = null;

        // ËÆ∫ÂùõÊï∞ÊçÆ - Êõ¥‰∏∞ÂØåÁöÑË¥¥ÂêßÈ£éÊ†ºÊï∞ÊçÆ
        const forumPostsData = [
            {
                id: 1,
                type: 'dating',
                typeName: 'ÂÆ†Áâ©Áõ∏‰∫≤',
                title: '„ÄêÁõ∏‰∫≤„ÄëÂØªÊâæËã±Áü≠ËìùÁå´ÈÖçÂÅ∂ÔºåÊàëÂÆ∂ÂÖ¨Áå´2Â≤Å‰∫Ü<span class="hot-tag">ÁÉ≠</span>',
                content: 'ÂÆ∂ÈáåÊúâ‰∏ÄÂè™Á∫ØÁßçËã±Áü≠ËìùÁå´Ôºå2Â≤ÅÔºåÊÄßÊ†ºÊ∏©È°∫ÔºåÊØõËâ≤Á∫ØÊ≠£ÔºåÂ∑≤ÁªèÂÅöËøá‰ΩìÊ£ÄÔºåÊÉ≥Êâæ‰∏ÄÂè™ÂÅ•Â∫∑ÁöÑÊØçÁå´ÈÖçÂØπ„ÄÇÊúâÊÑèËÄÖËØ∑ËÅîÁ≥ªÔºå‰ª∑Ê†ºÈù¢ËÆÆ„ÄÇÂèØ‰ª•‰∏äÈó®ÁúãÁå´Ôºå‰øùËØÅË°ÄÁªüÁ∫ØÊ≠£„ÄÇ',
                author: 'Áå´Áà∏ÁéãÂÖàÁîü',
                avatar: 'Áéã',
                level: 'ËµÑÊ∑±Èì≤Â±éÂÆò',
                time: '2Â∞èÊó∂Ââç',
                likes: 23,
                comments: 15,
                views: 156,
                isHot: true,
                latestComments: [
                    { author: 'Áå´Âí™Áà±Â•ΩËÄÖ', content: 'ÊàëÂÆ∂ÁöÑÊØçÁå´ÂèØ‰ª•ËÄÉËôëÔºåÂä†ÂæÆ‰ø°ËØ¶ËÅä' },
                    { author: '‰∏ì‰∏öÁπÅËÇ≤‰∫∫', content: 'ÂìÅÁõ∏‰∏çÈîôÔºåÊúâË°ÄÁªüËØÅ‰π¶ÂêóÔºü' }
                ]
            },
            {
                id: 2,
                type: 'experience',
                typeName: 'ÂÖªÂÆ†ÁªèÈ™å',
                title: '„ÄêÁªèÈ™å„ÄëÂàÜ‰∫´ÔºöÈáëÊ∏êÂ±ÇÁå´Âí™ÁöÑÊó•Â∏∏Êä§ÁêÜÂøÉÂæó<span class="hot-tag">Á≤æÂçé</span>',
                content: 'ÂÖªÈáëÊ∏êÂ±Ç3Âπ¥‰∫ÜÔºåÊÄªÁªì‰∫Ü‰∏Ä‰∫õÊä§ÁêÜÁªèÈ™åÔºåÂåÖÊã¨ÊØõÂèëÊä§ÁêÜ„ÄÅÈ•ÆÈ£üÊê≠ÈÖç„ÄÅÊó•Â∏∏ËøêÂä®Á≠âÔºåÂ∏åÊúõÂØπÊñ∞ÊâãÊúâÂ∏ÆÂä©„ÄÇ\n\n1. ÊØõÂèëÊä§ÁêÜÔºöÊØèÂ§©Ê¢≥ÊØõÔºå‰ΩøÁî®‰∏ìÁî®Áå´Á≤Æ\n2. È•ÆÈ£üÊê≠ÈÖçÔºöËç§Á¥†Êê≠ÈÖçÔºåË°•ÂÖÖÁª¥ÁîüÁ¥†\n3. Êó•Â∏∏ËøêÂä®ÔºöÊØèÂ§©Èô™Áé©30ÂàÜÈíü‰ª•‰∏ä\n\nËØ¶ÁªÜÁªèÈ™åÊ¨¢Ëøé‰∫§ÊµÅ...',
                author: 'Áå´Âí™Ëææ‰∫∫',
                avatar: 'Áå´',
                level: 'ÈáëÁâåÈì≤Â±éÂÆò',
                time: '5Â∞èÊó∂Ââç',
                likes: 56,
                comments: 32,
                views: 423,
                isHot: true,
                latestComments: [
                    { author: 'Êñ∞ÊâãÂ∞èÁôΩ', content: 'Â≠¶Âà∞‰∫ÜÔºåÊî∂Ëóè‰∫ÜÔºÅ' },
                    { author: 'ÂÖªÁå´ËÄÅÊâã', content: 'ÂæàÂÆûÁî®ÁöÑÂàÜ‰∫´ÔºåÊÑüË∞¢' }
                ]
            },
            {
                id: 3,
                type: 'help',
                typeName: 'Ê±ÇÂä©ÈóÆÁ≠î',
                title: '„ÄêÊ±ÇÂä©„ÄëÁå´Âí™Á™ÅÁÑ∂‰∏çÁà±ÂêÉÈ•≠ÊÄé‰πàÂäûÔºü<span class="new-tag">Êñ∞</span>',
                content: 'ÊàëÂÆ∂Áå´Âí™Âπ≥Êó∂ÂæàËÉΩÂêÉÔºå‰ΩÜÊòØ‰ªéÊò®Â§©ÂºÄÂßãÂ∞±‰∏çÊÄé‰πàÂêÉÈ•≠‰∫ÜÔºåÁ≤æÁ•ûÁä∂ÊÄÅËøòÂèØ‰ª•ÔºåËØ∑ÈóÆÂ§ßÂÆ∂ËøôÊòØÊÄé‰πàÂõû‰∫ãÔºüÈúÄË¶ÅÂéªÂåªÈô¢ÂêóÔºüÁå´Âí™3Â≤ÅÔºåÂπ≥Êó∂È•ÆÈ£üËßÑÂæãÔºåÊ≤°ÊúâÂÖ∂‰ªñÂºÇÂ∏∏„ÄÇ',
                author: 'Êñ∞ÊâãÈì≤Â±éÂÆò',
                avatar: 'Êñ∞',
                level: 'ËßÅ‰π†Èì≤Â±éÂÆò',
                time: '1Â§©Ââç',
                likes: 12,
                comments: 28,
                views: 89,
                isNew: true,
                latestComments: [
                    { author: 'ÂÖΩÂåªÂ∞èÁéã', content: 'ÂèØËÉΩÊòØÂ§©Ê∞îÂéüÂõ†ÔºåÂÖàËßÇÂØü‰∏ÄÂ§©' },
                    { author: 'ÁªèÈ™å‰∏∞ÂØå', content: 'Ê£ÄÊü•‰∏Ä‰∏ãÁå´Á≤ÆÊòØ‰∏çÊòØÂèòË¥®‰∫Ü' }
                ]
            },
            {
                id: 4,
                type: 'dating',
                typeName: 'ÂÆ†Áâ©Áõ∏‰∫≤',
                title: '„ÄêÁõ∏‰∫≤„ÄëÁæéÁü≠Áå´Âí™ÊâæÂØπË±°ÔºåË¶ÅÊ±ÇÂØπÊñπÂÅ•Â∫∑Ê¥ªÊ≥º',
                content: 'ÂÆ∂ÈáåÊúâÂè™ÁæéÁü≠Ôºå8‰∏™ÊúàÂ§ßÔºåÊ¥ªÊ≥ºÂèØÁà±ÔºåÂ∑≤Êé•ÁßçÊâÄÊúâÁñ´ËãóÔºåÊÉ≥Êâæ‰∏™ÂêåÈæÑÁöÑÁå´Âí™Áé©‰º¥Ôºå‰ª•Âêé‰πüÂèØ‰ª•ËÄÉËôëÈÖçÂØπ„ÄÇË¶ÅÊ±ÇÂØπÊñπÂÅ•Â∫∑Ê¥ªÊ≥ºÔºåÂìÅÁßç‰∏çÈôê„ÄÇ',
                author: 'ÁæéÁü≠Â¶àÂ¶à',
                avatar: 'Áæé',
                level: '‰∏≠Á∫ßÈì≤Â±éÂÆò',
                time: '2Â§©Ââç',
                likes: 34,
                comments: 19,
                views: 234,
                latestComments: [
                    { author: 'Â∏ÉÂÅ∂ÂÆ∂Èïø', content: 'ÊàëÂÆ∂ÁöÑÂ∏ÉÂÅ∂ÂèØ‰ª•ËÄÉËôë' },
                    { author: '‰∏ì‰∏öÁπÅËÇ≤', content: 'ÂìÅÁõ∏‰∏çÈîôÔºåÂ§öÂ§ßÂπ¥ÈæÑÈÖçÂØπÊØîËæÉÂ•ΩÔºü' }
                ]
            },
            {
                id: 5,
                type: 'experience',
                typeName: 'ÂÖªÂÆ†ÁªèÈ™å',
                title: '„ÄêÂàÜ‰∫´„ÄëÊñ∞ÊâãÂÖªÁå´ÂøÖÂ§áÊ∏ÖÂçïÔºåÈÅøÂÖçË∏©ÂùëÔºÅ',
                content: '‰Ωú‰∏∫‰∏ÄÂêçÂÖªÁå´3Âπ¥ÁöÑËÄÅÊâãÔºåÊÄªÁªìÂá∫Êñ∞ÊâãÂøÖÂ§áÁâ©ÂìÅÊ∏ÖÂçïÔºö\n‚úÖ Áå´Á†ÇÁõÜÔºàÊé®ËçêÂºÄÊîæÂºèÔºâ\n‚úÖ ‰ºòË¥®Áå´Á≤ÆÔºàÊ†πÊçÆÂπ¥ÈæÑÊÆµÈÄâÊã©Ôºâ\n‚úÖ Áå´ÊäìÊùøÔºàÂøÖÂ§áÔºåÈò≤Ê≠¢ÊäìÂùèÂÆ∂ÂÖ∑Ôºâ\n‚úÖ Áé©ÂÖ∑ÔºàÈÄóÁå´Ê£í„ÄÅÊøÄÂÖâÁ¨îÁ≠âÔºâ\n\nÂÖ∂‰ªñÊ≥®ÊÑè‰∫ãÈ°π...',
                author: 'ÂÖªÁå´ËÄÅÂè∏Êú∫',
                avatar: 'ËÄÅ',
                level: 'ÈáëÁâåÈì≤Â±éÂÆò',
                time: '3Â§©Ââç',
                likes: 78,
                comments: 45,
                views: 567,
                isHot: true,
                latestComments: [
                    { author: 'ÂáÜÈì≤Â±éÂÆò', content: 'Â§™ÊúâÁî®‰∫ÜÔºåÂáÜÂ§áÊé•Áå´ÂõûÂÆ∂' },
                    { author: 'Áå´Ëàç‰∏ª‰∫∫', content: 'ÊÄªÁªìÂæóÂæàÂà∞‰ΩçÔºåÊîØÊåÅ‰∏Ä‰∏ã' }
                ]
            },
            {
                id: 6,
                type: 'help',
                typeName: 'Ê±ÇÂä©ÈóÆÁ≠î',
                title: '„ÄêÊ±ÇÂä©„ÄëÁå´Âí™ÊÄªÂú®ÊàëÁù°ËßâÊó∂ÂÄôÂè´ÊÄé‰πàÂäûÔºü',
                content: 'ÊàëÂÆ∂Áå´Âí™ÊÄªÊòØÂú®ÊàëÁù°ËßâÁöÑÊó∂ÂÄôÂè´‰∏™‰∏çÂÅúÔºå‰∏•ÈáçÂΩ±ÂìçÁù°Áú†„ÄÇËØï‰∫ÜÂæàÂ§öÊñπÊ≥ïÈÉΩ‰∏çÁÆ°Áî®ÔºåËØ∑ÈóÆÊúâ‰ªÄ‰πàÂ•ΩÂäûÊ≥ïÂêóÔºüÁå´Âí™1Â≤ÅÂ§öÔºåÁôΩÂ§©ÂæàÊ≠£Â∏∏„ÄÇ',
                author: 'Â§±Áú†Èì≤Â±éÂÆò',
                avatar: 'Â§±',
                level: 'ËßÅ‰π†Èì≤Â±éÂÆò',
                time: '4Â§©Ââç',
                likes: 25,
                comments: 38,
                views: 312,
                latestComments: [
                    { author: 'Áù°Áú†‰∏ìÂÆ∂', content: 'Áù°ÂâçÈô™ÂÆÉÁé©Á¥ØÂ∞±Â•Ω‰∫Ü' },
                    { author: 'Ë°å‰∏∫‰∏ìÂÆ∂', content: 'ÂèØËÉΩÊòØÁº∫‰πèÂÆâÂÖ®ÊÑüÔºåËØïËØï‰∏ÄËµ∑Áù°' }
                ]
            }
        ];

        // ÊòæÁ§∫ÂïÜÂüé
        function showShop() {
            hideAllSections();
            document.getElementById('shopSection').style.display = 'block';
            currentSection = 'shop';
            renderProducts('all');
            window.scrollTo(0, 0);
        }

        // Ê∏≤ÊüìÂïÜÂìÅ
        function renderProducts(category) {
            const grid = document.getElementById('productsGrid');
            let products = category === 'all' ? productsData : productsData.filter(p => p.category === category);
            
            grid.innerHTML = products.map(product => `
                <div class="product-card">
                    <img class="product-image" src="${product.image}" alt="${product.name}">
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <div class="product-price">¬•${product.price}</div>
                        <p class="product-desc">${product.desc}</p>
                        <button class="add-to-cart" onclick="addToCart(${product.id})">Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶</button>
                    </div>
                </div>
            `).join('');
        }

        // Á≠õÈÄâÂïÜÂìÅ
        function filterProducts(category) {
            // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            renderProducts(category);
        }

        // Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶
        function addToCart(productId) {
            const product = productsData.find(p => p.id === productId);
            cart.push(product);
            localStorage.setItem('cart', JSON.stringify(cart));
            alert(`${product.name} Â∑≤Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶`);
        }

        // ÊòæÁ§∫ÂåªÈô¢
        function showHospitals() {
            hideAllSections();
            document.getElementById('hospitalSection').style.display = 'block';
            currentSection = 'hospitals';
            
            // ÂÖàËé∑ÂèñÁî®Êà∑‰ΩçÁΩÆÔºåÂÜçÊ∏≤ÊüìÂåªÈô¢
            getUserLocation(() => {
                calculateDistances();
                renderHospitals();
            });
            
            window.scrollTo(0, 0);
        }

        // Ê∏≤ÊüìÂåªÈô¢
        function renderHospitals() {
            const grid = document.getElementById('hospitalGrid');
            grid.innerHTML = hospitalsData.map((hospital, index) => `
                <div class="hospital-card ${index === 0 ? 'nearest' : ''}">
                    ${index === 0 ? '<div style="background: #34c759; color: white; padding: 6px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; margin-bottom: 10px; display: inline-block;">üìç ÊúÄËøë</div>' : ''}
                    <div class="hospital-header">
                        <h3 class="hospital-name">${hospital.name}</h3>
                        <div class="hospital-rating">
                            ‚≠ê ${hospital.rating}
                        </div>
                    </div>
                    <div class="hospital-address">
                        üìç ${hospital.address}
                        ${hospital.distance !== null ? `<span style="color: #0071e3; font-weight: 600; margin-left: 8px;">(${hospital.distance.toFixed(1)}km)</span>` : '<span style="color: #86868b; margin-left: 8px;">(Ëé∑ÂèñË∑ùÁ¶ª‰∏≠...)</span>'}
                    </div>
                    <div class="hospital-phone">üìû ${hospital.phone}</div>
                    <div class="hospital-services">
                        ${hospital.services.map(service => `<span class="service-tag">${service}</span>`).join('')}
                    </div>
                    <div class="hospital-actions">
                        <button class="hospital-btn book-btn" onclick="bookHospital(${hospital.id})">È¢ÑÁ∫¶ÊåÇÂè∑</button>
                        <button class="hospital-btn review-btn" onclick="reviewHospital(${hospital.id})">Êü•ÁúãËØÑ‰ª∑</button>
                        <button class="hospital-btn" style="background: #0071e3; color: white;" onclick="showHospitalOnMap(${hospital.id})">üó∫Ô∏è Âú∞Âõæ</button>
                    </div>
                    <div class="map-section" id="hospitalMap${hospital.id}" style="display: none;">
                        <div class="route-title">üó∫Ô∏è ${hospital.name} ‰ΩçÁΩÆ</div>
                        <div class="map-container">
                            <iframe 
                                id="map${hospital.id}"
                                class="map-iframe" 
                                src="https://www.openstreetmap.org/export/embed.html?bbox=${hospital.coordinates.lng-0.01},${hospital.coordinates.lat-0.01},${hospital.coordinates.lng+0.01},${hospital.coordinates.lat+0.01}&layer=mapnik&marker=${hospital.coordinates.lat},${hospital.coordinates.lng}"
                                allowfullscreen>
                            </iframe>
                        </div>
                    </div>
                </div>
            `).join('');
        }
                    </div>
                    <div class="map-section" id="hospitalMap${hospital.id}">
                        <div class="map-container" id="map${hospital.id}"></div>
                        <div class="map-actions">
                            <button class="map-btn" onclick="navigateToHospital(${hospital.id})">üß≠ ÂØºËà™ÂâçÂæÄ</button>
                            <button class="map-btn" onclick="callHospital(${hospital.phone})">üìû Êã®ÊâìÁîµËØù</button>
                        </div>
                        <div class="location-info" id="locationInfo${hospital.id}">
                            <strong>ËØ¶ÁªÜÂú∞ÂùÄÔºö</strong>${hospital.realAddress}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // È¢ÑÁ∫¶ÂåªÈô¢
        function bookHospital(hospitalId) {
            const hospital = hospitalsData.find(h => h.id === hospitalId);
            const phone = prompt(`ËØ∑ËæìÂÖ•ÊÇ®ÁöÑËÅîÁ≥ªÁîµËØùÔºå${hospital.name}‰ºö‰∏ªÂä®ËÅîÁ≥ªÊÇ®Ôºö`);
            if (phone) {
                const appointment = {
                    id: Date.now(),
                    hospitalId: hospitalId,
                    hospitalName: hospital.name,
                    customerPhone: phone,
                    status: 'pending',
                    createTime: new Date().toISOString()
                };
                appointments.push(appointment);
                localStorage.setItem('appointments', JSON.stringify(appointments));
                alert('È¢ÑÁ∫¶ÊàêÂäüÔºÅÂåªÈô¢‰ºöÂ∞ΩÂø´ËÅîÁ≥ªÊÇ®Á°ÆËÆ§Êó∂Èó¥„ÄÇ');
            }
        }

        // Êü•ÁúãËØÑ‰ª∑
        function reviewHospital(hospitalId) {
            const hospital = hospitalsData.find(h => h.id === hospitalId);
            alert(`${hospital.name}\n\n‚≠ê ËØÑÂàÜÔºö${hospital.rating}/5.0\n\nÁî®Êà∑ËØÑ‰ª∑Á≤æÈÄâÔºö\n‚Ä¢ ÂåªÁîüÊÄÅÂ∫¶ÂæàÂ•ΩÔºå‰∏ì‰∏öË¥üË¥£\n‚Ä¢ ‰ª∑Ê†ºÈÄèÊòéÔºåÊ≤°Êúâ‰π±Êî∂Ë¥π\n‚Ä¢ ÁéØÂ¢ÉÂπ≤ÂáÄÔºåËÆæÂ§áÂÖàËøõ\n‚Ä¢ 24Â∞èÊó∂ÊÄ•ËØäÂæàÊñπ‰æø`);
        }

        // ÊòæÁ§∫ËÆ∫Âùõ
        function showForum() {
            hideAllSections();
            document.getElementById('forumSection').style.display = 'block';
            currentSection = 'forum';
            renderForum('all');
            window.scrollTo(0, 0);
        }

        // Ê∏≤ÊüìËÆ∫ÂùõÂÜÖÂÆπ
        function renderForum(type) {
            const content = document.getElementById('forumContent');
            let posts = type === 'all' ? forumPostsData : 
                      type === 'hot' ? forumPostsData.filter(p => p.isHot) : 
                      forumPostsData.filter(p => p.type === type);
            
            // ÊéíÂ∫èÔºöÁÉ≠Èó®Â∏ñÂ≠êÂú®Ââç
            posts.sort((a, b) => {
                if (type === 'hot') return b.likes - a.likes;
                if (type === 'all') return b.views - a.views;
                return b.id - a.id;
            });

            // ËÆ∫ÂùõÁªüËÆ°
            const stats = {
                total: forumPostsData.length,
                today: forumPostsData.filter(p => p.time.includes('Â∞èÊó∂Ââç')).length,
                hot: forumPostsData.filter(p => p.isHot).length
            };

            content.innerHTML = `
                <div class="forum-stats">
                    <div class="stat-item">
                        <div class="stat-number">${stats.total}</div>
                        <div class="stat-label">ÊÄªÂ∏ñÂ≠ê</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${stats.today}</div>
                        <div class="stat-label">‰ªäÊó•Êñ∞Â∏ñ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${stats.hot}</div>
                        <div class="stat-label">ÁÉ≠Èó®Â∏ñÂ≠ê</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${posts.reduce((sum, p) => sum + p.likes, 0)}</div>
                        <div class="stat-label">ÊÄªÁÇπËµû</div>
                    </div>
                </div>
            ` + posts.map(post => `
                <div class="forum-post">
                    <div class="post-main">
                        <div class="author-section">
                            <div class="author-avatar">${post.avatar}</div>
                            <div class="author-name">${post.author}</div>
                            <div class="author-level">${post.level}</div>
                        </div>
                        <div class="post-content-main">
                            <h3 class="post-title" onclick="viewPostDetail(${post.id})">${post.title}</h3>
                            <div class="post-content">${post.content}</div>
                            <div class="post-meta">
                                <span class="post-type">${post.typeName}</span>
                                <span>üïê ${post.time}</span>
                                <span>üëÅÔ∏è ${post.views} ÊµèËßà</span>
                            </div>
                            <div class="post-actions">
                                <div class="post-action" onclick="togglePostLike(${post.id})">
                                    <span>üëç</span>
                                    <span>${post.likes}</span>
                                </div>
                                <div class="post-action" onclick="commentOnPost(${post.id})">
                                    <span>üí¨</span>
                                    <span>${post.comments}</span>
                                </div>
                                <div class="post-action" onclick="sharePost(${post.id})">
                                    <span>üîó</span>
                                    <span>ÂàÜ‰∫´</span>
                                </div>
                                <div class="post-action" onclick="collectPost(${post.id})">
                                    <span>‚≠ê</span>
                                    <span>Êî∂Ëóè</span>
                                </div>
                            </div>
                            ${post.latestComments && post.latestComments.length > 0 ? `
                                <div class="post-comment-preview">
                                    ${post.latestComments.map(comment => `
                                        <div class="comment-item">
                                            <span class="comment-author">${comment.author}:</span>
                                            ${comment.content}
                                        </div>
                                    `).join('')}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // ÂàáÊç¢ËÆ∫ÂùõÊ†áÁ≠æ
        function switchForumTab(type) {
            document.querySelectorAll('.forum-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            renderForum(type);
        }

        // Êü•ÁúãÂ∏ñÂ≠êËØ¶ÊÉÖ
        function viewPostDetail(postId) {
            const post = forumPostsData.find(p => p.id === postId);
            if (!post) return;
            
            alert(`Â∏ñÂ≠êËØ¶ÊÉÖ\n\nÊ†áÈ¢òÔºö${post.title.replace(/<[^>]*>/g, '')}\n\n‰ΩúËÄÖÔºö${post.author}\nÊó∂Èó¥Ôºö${post.time}\n\n${post.content.replace(/<[^>]*>/g, '')}\n\nüëç ${post.likes} Ëµû  üí¨ ${post.comments} ËØÑËÆ∫  üëÅÔ∏è ${post.views} ÊµèËßà`);
        }

        // Êî∂ËóèÂ∏ñÂ≠ê
        function collectPost(postId) {
            const post = forumPostsData.find(p => p.id === postId);
            alert(`Â∑≤Êî∂ËóèÂ∏ñÂ≠êÔºö${post.title.replace(/<[^>]*>/g, '')}\n\nÊÇ®ÂèØ‰ª•Âú®‰∏™‰∫∫‰∏≠ÂøÉÊü•ÁúãÊî∂ËóèÁöÑÂ∏ñÂ≠ê„ÄÇ`);
        }

        // ÂàáÊç¢Â∏ñÂ≠êÁÇπËµû
        function togglePostLike(postId) {
            const post = forumPostsData.find(p => p.id === postId);
            if (!post) return;
            
            post.likes = post.liked ? Math.max(0, post.likes - 1) : post.likes + 1;
            post.liked = !post.liked;
            renderForum(getCurrentForumType());
        }

        // Ëé∑ÂèñÂΩìÂâçËÆ∫ÂùõÁ±ªÂûã
        function getCurrentForumType() {
            const activeTab = document.querySelector('.forum-tab.active');
            if (activeTab.textContent.includes('ÂÖ®ÈÉ®')) return 'all';
            if (activeTab.textContent.includes('ÁÉ≠Èó®')) return 'hot';
            if (activeTab.textContent.includes('Áõ∏‰∫≤')) return 'dating';
            if (activeTab.textContent.includes('ÁªèÈ™å')) return 'experience';
            if (activeTab.textContent.includes('Ê±ÇÂä©')) return 'help';
            return 'all';
        }

        // ÂÖ®Â±ÄÂèòÈáè
        let selectedPostType = 'experience';
        let selectedImages = [];

        // ÊòæÁ§∫ÂèëÂ∏ÉÂ∏ñÂ≠êÊ®°ÊÄÅÊ°Ü
        function showNewPostModal() {
            document.getElementById('postModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // ÈáçÁΩÆË°®Âçï
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            document.getElementById('titleCount').textContent = '0';
            document.getElementById('contentCount').textContent = '0';
            document.getElementById('imagePreview').innerHTML = '';
            document.getElementById('imagePreview').style.display = 'none';
            selectedImages = [];
            
            // ËÆæÁΩÆÈªòËÆ§Á±ªÂûã
            selectPostType(document.querySelector('.post-type-btn.active'));
            
            // ÁõëÂê¨ËæìÂÖ•
            setupPostInputListeners();
        }

        // ÂÖ≥Èó≠ÂèëÂ∏ñÊ®°ÊÄÅÊ°Ü
        function closePostModal() {
            document.getElementById('postModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ÈÄâÊã©Â∏ñÂ≠êÁ±ªÂûã
        function selectPostType(element) {
            document.querySelectorAll('.post-type-btn').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
            selectedPostType = element.dataset.type;
            
            // Ê†πÊçÆÁ±ªÂûãÊõ¥Êñ∞ËæìÂÖ•ÊèêÁ§∫
            const titleInput = document.getElementById('postTitle');
            const contentInput = document.getElementById('postContent');
            
            const placeholders = {
                experience: {
                    title: '‚úçÔ∏è ÂàÜ‰∫´‰Ω†ÁöÑÂÖªÂÆ†ÂøÉÂæó...',
                    content: 'üíù ÂàÜ‰∫´‰Ω†ÁöÑÁ≤æÂΩ©ÂÜÖÂÆπ...&#10;&#10;üìù Â∞èË¥¥Â£´Ôºö&#10;‚Ä¢ ÂàÜ‰∫´Áå´Âí™Êä§ÁêÜÁªèÈ™å&#10;‚Ä¢ ‰ªãÁªçÈ•≤ÂÖªÊäÄÂ∑ßÂíåÂøÉÂæó&#10;‚Ä¢ Êé®ËçêÂ•ΩÁî®‰∫ßÂìÅÂíåÊñπÊ≥ï'
                },
                dating: {
                    title: 'üíï ‰∏∫‰Ω†ÁöÑÁà±Áå´ÂØªÊâæÂØπË±°...',
                    content: 'üíù ÂàÜ‰∫´‰Ω†ÁöÑÁ≤æÂΩ©ÂÜÖÂÆπ...&#10;&#10;üìù Â∞èË¥¥Â£´Ôºö&#10;‚Ä¢ ‰ªãÁªçÁå´Âí™Âπ¥ÈæÑ„ÄÅÂìÅÁßç„ÄÅÊÄßÊ†º&#10;‚Ä¢ ËØ¥ÊòéÂØπÂè¶‰∏ÄÂçäÁöÑË¶ÅÊ±Ç&#10;‚Ä¢ ÈôÑ‰∏äÁå´Âí™ËêåÁÖßÊïàÊûúÊõ¥‰Ω≥'
                },
                help: {
                    title: '‚ùì ÂØªÊ±ÇÂ§ßÂÆ∂ÁöÑÂ∏ÆÂä©...',
                    content: 'üíù ÂàÜ‰∫´‰Ω†ÁöÑÁ≤æÂΩ©ÂÜÖÂÆπ...&#10;&#10;üìù Â∞èË¥¥Â£´Ôºö&#10;‚Ä¢ ËØ¶ÁªÜÊèèËø∞ÈÅáÂà∞ÁöÑÈóÆÈ¢ò&#10;‚Ä¢ ËØ¥ÊòéÂ∑≤ÁªèÂ∞ùËØïÁöÑËß£ÂÜ≥ÊñπÊ≥ï&#10;‚Ä¢ Êèê‰æõÂøÖË¶ÅÁöÑËÉåÊôØ‰ø°ÊÅØ'
                },
                share: {
                    title: 'üì∏ ËÆ∞ÂΩïÁæéÂ•ΩÁöÑÂÖªÂÆ†Áû¨Èó¥...',
                    content: 'üíù ÂàÜ‰∫´‰Ω†ÁöÑÁ≤æÂΩ©ÂÜÖÂÆπ...&#10;&#10;üìù Â∞èË¥¥Â£´Ôºö&#10;‚Ä¢ ÂàÜ‰∫´Áå´Âí™ÁöÑÂèØÁà±Êó•Â∏∏&#10;‚Ä¢ ËÆ∞ÂΩïÊúâË∂£ÁöÑ‰∫íÂä®Áû¨Èó¥&#10;‚Ä¢ ÊôíÂá∫ËêåÁÖßÂíåËßÜÈ¢ë'
                }
            };
            
            const placeholder = placeholders[selectedPostType];
            titleInput.placeholder = placeholder.title;
            contentInput.placeholder = placeholder.content;
        }

        // ËÆæÁΩÆËæìÂÖ•ÁõëÂê¨Âô®
        function setupPostInputListeners() {
            const titleInput = document.getElementById('postTitle');
            const contentInput = document.getElementById('postContent');
            
            titleInput.addEventListener('input', function() {
                document.getElementById('titleCount').textContent = this.value.length;
            });
            
            contentInput.addEventListener('input', function() {
                document.getElementById('contentCount').textContent = this.value.length;
            });
        }

        // ÈÄâÊã©ÂõæÁâá
        function selectPostImages() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.multiple = true;
            input.max = '9';
            
            input.addEventListener('change', function(e) {
                handleImageSelection(e.target.files);
            });
            
            input.click();
        }

        // Â§ÑÁêÜÂõæÁâáÈÄâÊã©
        function handleImageSelection(files) {
            const maxImages = 9;
            let newImages = Array.from(files).slice(0, maxImages - selectedImages.length);
            
            newImages.forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        selectedImages.push({
                            name: file.name,
                            url: e.target.result,
                            size: file.size
                        });
                        updateImagePreview();
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // Êõ¥Êñ∞ÂõæÁâáÈ¢ÑËßà
        function updateImagePreview() {
            const preview = document.getElementById('imagePreview');
            
            if (selectedImages.length === 0) {
                preview.style.display = 'none';
                return;
            }
            
            preview.style.display = 'block';
            preview.innerHTML = `
                <div style="font-size: 14px; color: #1d1d1f; margin-bottom: 10px; font-weight: 600;">
                    üì∑ Â∑≤ÈÄâÊã© ${selectedImages.length} Âº†ÂõæÁâá
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 10px;">
                    ${selectedImages.map((img, index) => `
                        <div style="position: relative; aspect-ratio: 1; border-radius: 8px; overflow: hidden; border: 2px solid #f0f0f0;">
                            <img src="${img.url}" style="width: 100%; height: 100%; object-fit: cover;">
                            <button onclick="removeImage(${index})" style="position: absolute; top: -5px; right: -5px; width: 20px; height: 20px; border-radius: 50%; background: #ff3b30; color: white; border: none; cursor: pointer; font-size: 12px;">√ó</button>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // ÁßªÈô§ÂõæÁâá
        function removeImage(index) {
            selectedImages.splice(index, 1);
            updateImagePreview();
        }

        // Êèê‰∫§Êñ∞Â∏ñÂ≠ê
        function submitNewPost() {
            const title = document.getElementById('postTitle').value.trim();
            const content = document.getElementById('postContent').value.trim();
            
            if (!title) {
                alert('ËØ∑ËæìÂÖ•Â∏ñÂ≠êÊ†áÈ¢ò');
                return;
            }
            
            if (!content) {
                alert('ËØ∑ËæìÂÖ•Â∏ñÂ≠êÂÜÖÂÆπ');
                return;
            }
            
            if (title.length < 5) {
                alert('Ê†áÈ¢òËá≥Â∞ëÈúÄË¶Å5‰∏™Â≠ó');
                return;
            }
            
            if (content.length < 10) {
                alert('ÂÜÖÂÆπËá≥Â∞ëÈúÄË¶Å10‰∏™Â≠ó');
                return;
            }
            
            const typeNames = {
                experience: 'ÂÖªÂÆ†ÁªèÈ™å',
                dating: 'ÂÆ†Áâ©Áõ∏‰∫≤',
                help: 'Ê±ÇÂä©ÈóÆÁ≠î',
                share: 'Êó•Â∏∏ÂàÜ‰∫´'
            };
            
            const newPost = {
                id: Date.now(),
                type: selectedPostType,
                typeName: typeNames[selectedPostType],
                title: title + (selectedImages.length > 0 ? ' <span class="new-tag">Âõæ</span>' : ''),
                content: content,
                author: currentUser.name,
                avatar: currentUser.avatar,
                level: currentUser.level,
                time: 'ÂàöÂàö',
                likes: 0,
                comments: 0,
                views: 0,
                isNew: true,
                latestComments: [],
                images: selectedImages.length > 0 ? selectedImages : null
            };
            
            // ‰øùÂ≠òÂà∞Áî®Êà∑Â∏ñÂ≠êÂàóË°®
            const userPost = {
                ...newPost,
                status: 'published',
                createTime: new Date().toISOString()
            };
            userPosts.push(userPost);
            localStorage.setItem('userPosts', JSON.stringify(userPosts));
            
            // ‰øùÂ≠òÂà∞ËÆ∫ÂùõÂ∏ñÂ≠êÂàóË°®
            forumPosts.unshift(newPost);
            localStorage.setItem('forumPosts', JSON.stringify(forumPosts));
            
            // Ê∑ªÂä†Âà∞ËÆ∫ÂùõÊï∞ÊçÆÁî®‰∫éÊòæÁ§∫
            forumPostsData.unshift(newPost);
            
            closePostModal();
            alert('üéâ Â∏ñÂ≠êÂèëÂ∏ÉÊàêÂäüÔºÅÂ§ßÂÆ∂ÂèØ‰ª•ÁúãÂà∞‰Ω†ÁöÑÂ∏ñÂ≠ê‰∫Ü');
            
            // Âà∑Êñ∞ËÆ∫ÂùõÊòæÁ§∫
            if (currentSection === 'forum') {
                renderForum(getCurrentForumType());
            }
        }

        // ÈöêËóèÊâÄÊúâÂå∫Âüü
        function hideAllSections() {
            document.getElementById('catsSection').style.display = 'none';
            document.getElementById('shopSection').style.display = 'none';
            document.getElementById('hospitalSection').style.display = 'none';
            document.getElementById('forumSection').style.display = 'none';
        }

        // ÊòæÁ§∫È¶ñÈ°µ/Áå´Âí™Âå∫Âüü
        function showHome() {
            hideAllSections();
            document.getElementById('catsSection').style.display = 'block';
            currentSection = 'cats';
            window.scrollTo(0, 0);
        }

        // ÊòæÁ§∫ÂïÜÂüéËÆ¢Âçï
        function showShopOrders() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            if (cart.length === 0) {
                alert('Ë¥≠Áâ©ËΩ¶ÊòØÁ©∫ÁöÑ');
                return;
            }
            
            let orderHtml = 'üõí Ë¥≠Áâ©ËΩ¶ÂïÜÂìÅ\n\n';
            let total = 0;
            cart.forEach((item, index) => {
                orderHtml += `${index + 1}. ${item.name} - ¬•${item.price}\n`;
                total += item.price;
            });
            orderHtml += `\nÊÄªËÆ°: ¬•${total}\n\nÂéªÁªìÁÆóËØ∑ËÅîÁ≥ªÂÆ¢Êúç`;
            
            alert(orderHtml);
        }

        // ÊòæÁ§∫ÂåªÈô¢È¢ÑÁ∫¶
        function showHospitalAppointments() {
            const appointments = JSON.parse(localStorage.getItem('appointments') || '[]');
            if (appointments.length === 0) {
                alert('ÊÇ®ËøòÊ≤°ÊúâÈ¢ÑÁ∫¶ËÆ∞ÂΩï');
                return;
            }
            
            let aptHtml = 'üè• ÂåªÈô¢È¢ÑÁ∫¶ËÆ∞ÂΩï\n\n';
            appointments.forEach((apt, index) => {
                aptHtml += `${index + 1}. ${apt.hospitalName}\n`;
                aptHtml += `   ÁîµËØù: ${apt.customerPhone}\n`;
                aptHtml += `   Áä∂ÊÄÅ: ${apt.status === 'pending' ? 'ÂæÖÁ°ÆËÆ§' : 'Â∑≤Á°ÆËÆ§'}\n`;
                aptHtml += `   Êó∂Èó¥: ${new Date(apt.createTime).toLocaleString()}\n\n`;
            });
            
            alert(aptHtml);
        }

        // Âú∞ÂõæÂàùÂßãÂåñ
        function initMap(containerId, coordinates, title) {
            try {
                // Â∞ùËØï‰ΩøÁî®È´òÂæ∑Âú∞Âõæ
                if (typeof AMap !== 'undefined') {
                    const map = new AMap.Map(containerId, {
                        zoom: 15,
                        center: [coordinates.lng, coordinates.lat]
                    });
                    
                    const marker = new AMap.Marker({
                        position: [coordinates.lng, coordinates.lat],
                        title: title,
                        map: map
                    });
                    
                    const infoWindow = new AMap.InfoWindow({
                        content: `<div style="padding: 10px;"><strong>${title}</strong></div>`
                    });
                    
                    marker.on('click', function() {
                        infoWindow.open(map, marker.getPosition());
                    });
                    
                    return map;
                }
            } catch (error) {
                console.log('Âú∞ÂõæÂàùÂßãÂåñÂ§±Ë¥•Ôºå‰ΩøÁî®Â§áÁî®ÊñπÊ°à');
            }
        }

        // Ëé∑ÂèñÁî®Êà∑‰ΩçÁΩÆ
        function getUserLocation(callback) {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        console.log('Áî®Êà∑‰ΩçÁΩÆËé∑ÂèñÊàêÂäüÔºö', userLocation);
                        if (callback) callback();
                    },
                    (error) => {
                        console.log('‰ΩçÁΩÆËé∑ÂèñÂ§±Ë¥•Ôºö', error.message);
                        // ‰ΩøÁî®ÈªòËÆ§‰ΩçÁΩÆÔºàÊù≠Â∑ûÂ∏Ç‰∏≠ÂøÉÔºâ
                        userLocation = {
                            lat: 30.274084,
                            lng: 120.155069
                        };
                        if (callback) callback();
                    }
                );
            } else {
                // ÊµèËßàÂô®‰∏çÊîØÊåÅÂÆö‰ΩçÔºå‰ΩøÁî®ÈªòËÆ§‰ΩçÁΩÆ
                userLocation = {
                    lat: 30.274084,
                    lng: 120.155069
                };
                if (callback) callback();
            }
        }

        // ËÆ°ÁÆóË∑ùÁ¶ª
        function calculateDistances() {
            if (!userLocation) return;
            
            hospitalsData.forEach(hospital => {
                const distance = getDistance(
                    userLocation.lat, 
                    userLocation.lng, 
                    hospital.coordinates.lat, 
                    hospital.coordinates.lng
                );
                hospital.distance = distance;
            });
            
            // ÊåâË∑ùÁ¶ªÊéíÂ∫è
            hospitalsData.sort((a, b) => a.distance - b.distance);
        }

        // ËÆ°ÁÆó‰∏§ÁÇπ‰πãÈó¥Ë∑ùÁ¶ªÔºàÂçÉÁ±≥Ôºâ
        function getDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // Âú∞ÁêÉÂçäÂæÑÔºàÂçÉÁ±≥Ôºâ
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // ÊòæÁ§∫ÂåªÈô¢Âú∞Âõæ
        function showHospitalOnMap(hospitalId) {
            const hospital = hospitalsData.find(h => h.id === hospitalId);
            const mapSection = document.getElementById(`hospitalMap${hospitalId}`);
            
            // ÂàáÊç¢Âú∞ÂõæÊòæÁ§∫
            if (mapSection.style.display === 'block') {
                mapSection.style.display = 'none';
                return;
            }
            
            // ÈöêËóèÂÖ∂‰ªñÂú∞Âõæ
            document.querySelectorAll('.map-section').forEach(section => {
                section.style.display = 'none';
            });
            
            mapSection.style.display = 'block';
            
            // ÊªöÂä®Âà∞Âú∞Âõæ‰ΩçÁΩÆ
            setTimeout(() => {
                mapSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
        }

        // ÂØºËà™Âà∞ÂåªÈô¢
        function navigateToHospital(hospitalId) {
            const hospital = hospitalsData.find(h => h.id === hospitalId);
            
            if (userLocation) {
                // È´òÂæ∑Âú∞ÂõæÂØºËà™
                const navUrl = `https://uri.amap.com/navigation?to=${hospital.coordinates.lng},${hospital.coordinates.lat},${hospital.name}&mode=car`;
                window.open(navUrl, '_blank');
            } else {
                // Â§áÁî®ÊñπÊ°àÔºöÊâìÂºÄÂú∞ÂõæÂ∫îÁî®
                const mapUrl = `https://amap.com/search?query=${encodeURIComponent(hospital.realAddress)}`;
                window.open(mapUrl, '_blank');
            }
        }

        // Êã®ÊâìÂåªÈô¢ÁîµËØù
        function callHospital(phone) {
            if (confirm(`Á°ÆÂÆöË¶ÅÊã®Êâì ${phone} ÂêóÔºü`)) {
                window.location.href = `tel:${phone}`;
            }
        }

        // ÂÆûÊó∂Áâ©ÊµÅËøΩË∏™
        function initLogisticsMap() {
            try {
                // Ê®°ÊãüÁâ©ÊµÅË∑ØÂæÑÁÇπ
                const logisticsPoints = [
                    { lng: 120.155069, lat: 30.274084, status: 'ÂèëË¥ßÁÇπ' },
                    { lng: 120.170843, lat: 30.276080, status: '‰∏≠ËΩ¨Á´ô' },
                    { lng: 120.127629, lat: 30.262834, status: 'ÈÖçÈÄÅ‰∏≠' },
                    { lng: 120.145777, lat: 30.289459, status: 'ÁõÆÁöÑÂú∞' }
                ];
                
                if (typeof AMap !== 'undefined') {
                    const map = new AMap.Map('logisticsMap', {
                        zoom: 12,
                        center: [120.155069, 30.274084]
                    });
                    
                    // ÁªòÂà∂Ë∑ØÂæÑ
                    const path = logisticsPoints.map(point => [point.lng, point.lat]);
                    const polyline = new AMap.Polyline({
                        path: path,
                        strokeColor: '#0071e3',
                        strokeWeight: 4,
                        strokeStyle: 'solid'
                    });
                    map.add(polyline);
                    
                    // Ê∑ªÂä†Ê†áËÆ∞ÁÇπ
                    logisticsPoints.forEach((point, index) => {
                        const marker = new AMap.Marker({
                            position: [point.lng, point.lat],
                            title: point.status,
                            map: map
                        });
                        
                        const infoWindow = new AMap.InfoWindow({
                            content: `<div style="padding: 10px;"><strong>${point.status}</strong></div>`
                        });
                        
                        marker.on('click', function() {
                            infoWindow.open(map, marker.getPosition());
                        });
                    });
                }
            } catch (error) {
                console.log('Áâ©ÊµÅÂú∞ÂõæÂàùÂßãÂåñÂ§±Ë¥•');
            }
        }

        // Âà∑Êñ∞Áâ©ÊµÅ‰ø°ÊÅØ
        function refreshLogistics() {
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'üîÑ Âà∑Êñ∞‰∏≠...';
            btn.disabled = true;
            
            // Ê®°ÊãüÂÆûÊó∂Êõ¥Êñ∞
            setTimeout(() => {
                const timeline = document.getElementById('logisticsTimeline');
                const newStatus = document.createElement('div');
                newStatus.className = 'logistics-item completed';
                newStatus.innerHTML = `
                    <div class="logistics-time">${new Date().toLocaleString()}</div>
                    <div class="logistics-text">Áâ©ÊµÅ‰ø°ÊÅØÂ∑≤Êõ¥Êñ∞ - ÂÆûÊó∂‰ΩçÁΩÆÔºöÊù≠Â∑ûÂ∏ÇË•øÊπñÂå∫</div>
                `;
                
                timeline.insertBefore(newStatus, timeline.firstChild);
                
                btn.textContent = originalText;
                btn.disabled = false;
                
                // ÈáçÊñ∞ÂàùÂßãÂåñÂú∞Âõæ
                initLogisticsMap();
            }, 2000);
        }

        // È°µÈù¢Âä†ËΩΩÊó∂‰ªélocalStorageÊÅ¢Â§çÊï∞ÊçÆ
        function loadFromStorage() {
            const savedOrders = localStorage.getItem('orders');
            const savedMessages = localStorage.getItem('messages');
            const savedCart = localStorage.getItem('cart');
            const savedShopOrders = localStorage.getItem('shopOrders');
            const savedAppointments = localStorage.getItem('appointments');
            const savedForumPosts = localStorage.getItem('forumPosts');
            const savedUserPosts = localStorage.getItem('userPosts');
            const savedCatComments = localStorage.getItem('catComments');
            const savedPrivateMessages = localStorage.getItem('privateMessages');
            
            if (savedOrders) orders = JSON.parse(savedOrders);
            if (savedMessages) messages = JSON.parse(savedMessages);
            if (savedCart) cart = JSON.parse(savedCart);
            if (savedShopOrders) shopOrders = JSON.parse(savedShopOrders);
            if (savedAppointments) appointments = JSON.parse(savedAppointments);
            if (savedForumPosts) {
                forumPosts = JSON.parse(savedForumPosts);
                // ÂêàÂπ∂ÈªòËÆ§Êï∞ÊçÆÂíåÁî®Êà∑ÂèëÂ∏ÉÁöÑÊï∞ÊçÆ
                forumPosts.forEach(userPost => {
                    if (!forumPostsData.find(p => p.id === userPost.id)) {
                        forumPostsData.push(userPost);
                    }
                });
            }
            if (savedUserPosts) userPosts = JSON.parse(savedUserPosts);
            if (savedCatComments) catComments = JSON.parse(savedCatComments);
            if (savedPrivateMessages) privateMessages = JSON.parse(savedPrivateMessages);
            
            updateNotificationBadge();
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            init();
            loadFromStorage();
            getUserLocation(); // Ëé∑ÂèñÁî®Êà∑‰ΩçÁΩÆÔºàÂêéÂè∞ÈùôÈªòËé∑ÂèñÔºâ
            
            // ÂàùÂßãÂåñÊó∂ÈöêËóèÊâÄÊúâÂå∫ÂüüÔºåÁÑ∂ÂêéÊòæÁ§∫Áå´Âí™Âå∫Âüü
            hideAllSections();
            document.getElementById('catsSection').style.display = 'block';
        });
    </script>
</body>
</html>